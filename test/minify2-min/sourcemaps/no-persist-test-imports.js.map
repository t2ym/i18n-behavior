{"version":3,"sources":["no-persist-test-imports.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","updateProperty","element","properties","name","path","split","cursor","p","shift","notifyPath","Polymer","dom","document","querySelector","getProperty","target","trim","replace","previousSibling","nodeType","COMMENT_NODE","TEXT_NODE","data","match","nextSibling","getEffectiveChildNodes","filter","item","deepMap","source","map","prop","_typeof","translate","lang","text","result","undefined","minifyText","setupFakeServer","e","isFakeServer","server","sinon","fakeServer","autoRespond","respondImmediately","respondWith","xhr","urlPath","fakeServerContents","hasOwnProperty","respond","Content-Type","teardownFakeServer","restore","setupFixture","params","fixtureModel","fixtureName","fixture","runningTest","querySelectorAll","title","currentPath","window","location","pathname","Error","textContent","suite","is","parentElement","classList","add","forEach","node","remove","Promise","resolve","reject","addEventListener","setupFixtureDomChange","ev","rootTarget","removeEventListener","setupFixtureLangDomChange","event","effectiveLang","render","ex","_children","f","t","instanceProps","__templatizeOwner","_ctor","Templatize","templatize","forwardHostProp","_instance","stamp","model","this","root","bind","setupFixtureLangUpdated","setTimeout","fire","JSON","stringify","restoreFixture","_intervalId","clearInterval","observeHtmlLang","getLocalDomRoot","suitesRunner","suites","el","expected","noProperties","rawValue","assign","defTimeout","timeout","setup","suiteSetup","then","fixtureSetup","console","log","error","test","localDOM","isSuppressingSuiteParams","templateDefaultLang","join","assert","isString","equal","isBoolean","actual","deepcopy","isObject","deepEqual","rawText","childPath","nodes","select","ok","a","lightDOM","teardown","suiteTeardown","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_createClass","defineProperties","props","descriptor","defineProperty","key","protoProps","staticProps","Symbol","iterator","obj","/commented-simple-text-element/commented-simple-text-element.json","/commented-simple-text-element/locales/commented-simple-text-element.fr.json","/compound-binding-dom-bind.json","/compound-binding-element/compound-binding-element.json","/compound-binding-element/locales/compound-binding-element.fr.json","/edge-case-dom-bind.json","/edge-case/advanced-binding-element.json","/edge-case/complex-compound-binding-element.json","/edge-case/empty-element.json","/edge-case/locales/advanced-binding-element.fr.json","/edge-case/locales/complex-compound-binding-element.fr.json","/edge-case/locales/empty-element.fr.json","/fallback-text-element/fallback-text-element.json","/fallback-text-element/locales/fallback-text-element.fr-CA.json","/fallback-text-element/locales/fallback-text-element.fr.json","/locales/compound-binding-dom-bind.fr.json","/locales/simple-attribute-dom-bind.fr.json","/locales/simple-text-dom-bind.fr.json","/multiple-case/item-element.json","/multiple-case/locales/item-element.fr.json","/multiple-case/locales/multiple-element.fr.json","/multiple-case/multiple-element.json","/plural-gender-element/locales/plural-gender-element.fr.json","/plural-gender-element/plural-gender-element.json","/preference/preference-element.json","/simple-attribute-dom-bind.json","/simple-attribute-element/locales/simple-attribute-element.fr.json","/simple-attribute-element/locales/text-attribute-element.fr.json","/simple-attribute-element/simple-attribute-element.json","/simple-attribute-element/text-attribute-element.json","/simple-text-dom-bind.json","/simple-text-element/locales/simple-text-element.fr.json","/simple-text-element/locales/simple-text-element.ru.json","/simple-text-element/simple-text-element.json","/simple-text-id-element/locales/simple-text-id-element.fr.json","/simple-text-id-element/simple-text-id-element.json","/template-default-lang/locales/null-template-default-lang-element.ja.json","/template-default-lang/locales/null-template-default-lang-element.zh-Hans-CN.json","/template-default-lang/locales/template-default-lang-element.zh-Hans-CN.json","/template-default-lang/null-template-default-lang-element.json","/template-default-lang/template-default-lang-element.json","Number","isNaN","base","g","_name","suiteMap","null","s","baseName","extension","href","indexOf","syntax","_syntax","m","end","start","rules","previous","cssText","parsedCssText","atRule","type","parsedSelector","selector","keyframesName","aa","ba","c","q","b","d","h","k","push","substring","ca","r","lastIndexOf","da","u","pop","v","y","z","ea","fa","ga","ha","ja","l","_applyShimInvalid","ka","ia","E","D","nativeCss","shimcssproperties","C","nativeShadow","shimshadow","G","F","H","__cssRules","I","la","matchMedia","matches","J","K","M","pa","A","qa","N","B","exec","index","slice","O","na","n","set","lastIndex","oa","createElement","setAttribute","style","all","head","appendChild","getComputedStyle","getPropertyValue","ra","L","w","x","W","X","sa","Q","P","R","readyState","T","U","S","invalidCallback","ShadyCSS","CustomStyleInterface","transformCallback","validateCallback","requestAnimationFrame","enqueued","V","processStyles","getStyleForCustomStyle","ShadyDOM","inUse","navigator","userAgent","CSS","supports","WebComponents","flags","ma","o","content","j","detectMixin","transformStyle","transformCustomStyle","transformRules","transformRule","transformTemplate","_separator","HTMLImports","whenReady","prepareTemplate","_styleAst","styleSubtree","removeProperty","setProperty","shadowRoot","styleElement","children","childNodes","localName","getAttribute","styleDocument","body","ScopingShim","Y","Z","getComputedStyleValue","ApplyShim","info","_polymerFn","version","goog","reflect","objectProperty","cachingMixin","mixin","__mixinApplications","WeakMap","application","dedupeId","dedupingMixin","__id","__dedupeId","baseSet","__mixinSet","extended","CaseMap","_caseMap","_rx","dashToCamel","camelToDash","dashToCamelCase","dash","toUpperCase","camelToDashCase","camel","toLowerCase","resolveCss","ownerDocument","CSS_URL_RX","pre","url","post","resolveAttrs","URL_ATTRS","at","a$","attributes","search","BINDING_RX","ABS_URL","resolver","getUrlResolver","resolveUrl","baseUri","tempDoc","implementation","createHTMLDocument","tempDocBase","__urlResolver","*","form","ResolveUrl","importModule","moduleId","DomModule","MODULE_STYLES_SELECTOR","INCLUDE_ATTR","StyleGather","cssFromModules","moduleIds","warnIfNotFound","modules","cssFromModule","_cssText","cssFromElement","warn","e$","include","__appliedElement","parentNode","removeChild","findModule","id","lcModules","styleOutsideTemplateCheck","inst","_HTMLElement","apply","arguments","old","register","__assetpath","owner","importForElement","baseURI","HTMLElement","customElements","define","Path","isPath","dotIndex","isAncestor","isDescendant","newBase","normalize","parts","args","toString","part","last","isDeep","global","Async","timeOut","after","delay","run","fn","cancel","clearTimeout","animationFrame","cancelAnimationFrame","idlePeriod","requestIdleCallback","timer","cancelIdleCallback","microTask","_currVal","_lastVal","_callbacks","_twiddleContent","_twiddle","createTextNode","callback","handle","idx","_atEndOfMicrotask","len","cb","splice","flush","_observer","takeRecords","MutationObserver","observe","characterData","saveAccessorValue","nativeProperties","__data","_setPendingProperty","__dataProto","caseMap","microtask","proto","getOwnPropertyNames","PropertyAccessors","_superClass","_this2","_initializeProperties","observedAttributes","_createPropertyAccessor","_attributeToProperty","__serializing","__dataCounter","__dataInvalid","__dataPending","__dataOld","_initializeProtoProperties","_setProperty","attribute","hasAttribute","_valueToNodeAttribute","_deserializeValue","str","_serializeValue","removeAttribute","Date","outValue","Boolean","parse","String","readOnly","_invalidateProperties","_shouldPropertyChange","_this3","_flushProperties","oldProps","changedProps","_propertiesChanged","currentProps","parseTemplateAnnotations","template","stripWhiteSpace","_content","_notes","parseNodeAnnotations","list","Node","parseTextNodeAnnotation","parseElementAnnotations","parseBindings","bindingRegex","literal","mode","negate","customEvent","notifyEvent","colon","compoundIndex","literalFromParts","note","bindings","kind","isCompound","events","insertionPointTag","_hasInsertionPoint","parseChildNodesAnnotations","parseNodeAttributeAnnotations","wrapTemplateExtension","templateExtensions","replaceChild","firstChild","parseTemplate","next","childAnnotation","createDocumentFragment","emptyArray","templateContent","annotation","attrs","parseNodeAttributeAnnotation","origName","propertyName","findTemplateAnnotatedNode","applyIdToMap","applyEventListener","host","_addMethodEventListenerToNode","applyTemplateContent","createNodeEventHandler","context","eventName","methodName","_methodHost","handler","detail","IDENT","NUMBER","SQUOTE_STRING","DQUOTE_STRING","STRING","ARGUMENT","ARGUMENTS","ARGUMENT_LIST","BINDING","OPEN_BRACKET","CLOSE_BRACKET","NEGATE","EXPRESSION","RegExp","dom-if","dom-repeat","TemplateStamp","_superClass2","_this4","$","_templateNodes","_templateNotes","HTMLTemplateElement","decorate","notes","_parseTemplateAnnotations","importNode","__noInsertionPoint","_addEventListenerToNode","ensureOwnEffectMap","effects","protoFx","instFx","runEffects","fromAbove","hasPaths","ran","runEffectsForProperty","rootProperty","fxs","fx","lastRun","pathMatchesTrigger","trigger","triggerPath","structured","wildcard","runObserverEffect","changedProp","runNotifyEffects","__notifyEffects","notified","__dataHost","dispatchNotifyEvent","queueProperty","dispatchEvent","CustomEvent","runNotifyEffect","addNotifyListener","handleNotification","targetPath","setPropertyFromNotification","__readOnly","_setPendingPropertyOrPath","runReflectEffect","sanitizeDOMValue","attrName","_propertyToAttribute","runComputedEffects","computeEffects","__computeEffects","inputProps","computedProps","runComputedEffect","runMethodEffect","computedProp","methodInfo","__propertyEffects","computeLinkedPaths","links","__dataLinkedPaths","cache","__dataTemp","link","addBindingEffect","dynamicFns","signature","addMethodBindingEffect","_addPropertyEffect","TYPES","PROPAGATE","runBindingEffect","_enqueueClient","applyBindingValue","computeBindingValue","_setUnmanagedPropertyToNode","storage","__dataCompoundStorage","createMethodEffect","runMethodBindingEffect","val","processAnnotations","_processed","parseMethod","hostProps","_hostProps","discoverTemplateHostProps","concat","b$","p$","kk","templateHostProps","Base","shouldAddListener","binding","addAnnotatedListener","_bindListeners","setupBindListeners","setupBindings","setupCompoundBinding","sig","effectFn","arg","dynamicFn","marshalArgs","expression","static","parseArgs","argList","rawArg","parseArg","fc","values","baseChanged","literals","notifySplices","array","splices","splicesPath","indexSplices","notifySplice","addedCount","removed","upper","ANY","COMPUTE","REFLECT","NOTIFY","OBSERVE","READ_ONLY","PropertyEffects","_mixin","__dataInitialized","__dataPendingClients","__dataFromAbove","__dataHasPaths","effect","_hasPropertyEffect","isPathNotification","hasEffect","prevProps","client","clients","ready","__propagateEffects","_flushClients","__reflectEffects","__observeEffects","to","_len","items","_key","ret","hadLength","deleteCount","Math","floor","_len2","_key2","_len3","_key3","unshift","propPath","protectedSetter","attr","ElementMixin","ownConfigForClass","klass","__ownConfig","config","flattenProperties","flattenedProps","propertiesForClass","__classProperties","superCtor","PolymerElement","propertyDefaultsForClass","__classPropertyDefaults","hasClassFinalized","finalizeClassAndSuper","finalize","finalizeClass","__finalized","telemetry","finalizeConfig","finalizeTemplate","cloneNode","observers","createPropertyFromConfig","_createMethodObserver","allProps","computed","_hasReadOnlyEffect","_createComputedProperty","_createReadOnlyProperty","reflectToAttribute","_hasReflectEffect","_createReflectedProperty","notify","_hasNotifyEffect","_createNotifyingProperty","observer","_createPropertyObserver","ext","insertBefore","_bindTemplate","_template","_mixin2","_this6","instanceCount","hostStack","registerHost","__observedAttributes","_isPropertyPending","isEmpty","beginHosting","_stampTemplate","_attachDom","endHosting","attachShadow","module","assetpath","stack","stackLen","registrations","_regLog","dumpRegistrations","updateStyles","Debouncer","_asyncModule","_callback","_timer","setConfig","asyncModule","isActive","debounce","debouncer","setupTeardownMouseCanceller","en","IS_TOUCH_ONLY","MOUSE_EVENTS","mouseCanceller","ignoreMouse","POINTERSTATE","mouse","mouseIgnoreJob","unset","MOUSE_TIMEOUT","hasLeftMouseButton","buttons","MouseEvent","MOUSE_HAS_BUTTONS","MOUSE_WHICH_TO_BUTTONS","which","button","isSyntheticClick","gestures","_findOriginalTarget","bcr","getBoundingClientRect","pageX","pageY","left","right","top","bottom","firstTouchAction","ta","composedPath","TOUCH_ACTION","trackDocument","stateObj","movefn","upfn","untrackDocument","HAS_NATIVE_TA","touchAction","GESTURE_KEY","HANDLED_OBJ","TAP_DISTANCE","TRACK_DISTANCE","TRACK_LENGTH","mouseEvent","sc","sourceCapabilities","firesTouchEvents","skip","preventDefault","stopPropagation","touch","scrollDecided","recognizers","deepTargetFind","elementFromPoint","_handleNative","handled","currentTarget","gobj","gs","changedTouches","touches","identifier","_handleTouchAction","flow","reset","clientX","clientY","prevent","dx","abs","dy","cancelable","addListener","evType","_add","removeListener","_remove","recognizer","deps","dep","gd","_count","setTouchAction","recog","emits","_findRecognizerByEvent","evName","_fire","Event","bubbles","composed","defaultPrevented","preventer","sourceEvent","resetMouseCanceller","mousedown","touchstart","touchend","state","started","moves","addMove","move","hasMovedEnough","ct","touchmove","secondlast","lastmove","ddx","ddy","hover","NaN","save","click","forward","findOriginalTarget","Gestures","GestureEventListeners","_superClass3","whenImportsReady","importHref","onload","onerror","optAsync","rel","cleanup","loadListener","errorListener","__dynamicImportLoaded","schedule","scheduled","flushQueue","beforeRenderQueue","afterRenderQueue","queue","RenderStatus","beforeNextRender","afterNextRender","newSplice","EDIT_LEAVE","EDIT_UPDATE","EDIT_ADD","EDIT_DELETE","ArraySplice","calcEditDistances","current","currentStart","currentEnd","oldStart","oldEnd","rowCount","columnCount","distances","equals","north","west","spliceOperationsFromEditDistances","edits","northWest","min","reverse","calcSplices","prefixCount","suffixCount","minLength","sharedPrefix","sharedSuffix","ops","oldIndex","searchLength","index1","index2","count","calculateSplices","currentValue","previousValue","flushDebouncers","didFlush","debouncerQueue","enqueueDebouncer","shadyDOM","debouncers","isSlot","getEffectiveNodes","assignedNodes","flatten","reduce","forwardMethods","methods","_loop","method","forwardReadOnlyProperties","_loop2","forwardProperties","_loop3","matchesSelector","Element","normalizedMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","EffectiveNodesObserver","_this8","_shadyChildrenObserver","_nativeChildrenObserver","_connected","_target","_effectiveNodes","_scheduled","_boundSchedule","_schedule","_connect","_this9","_listenSlots","observeChildren","mutations","_processMutations","childList","_unlistenSlots","unobserveChildren","disconnect","_this10","_processSlotMutations","mutation","addedNodes","removedNodes","shadyChildrenObserver","newNodes","nodeList","DomApi","patch","observerHandle","contains","doc","getRootNode","ip$","assignedSlot","externalNode","deep","Document","c$","ELEMENT_NODE","_activeElement","activeElement","EventApi","ctor","__domApi","addDebouncer","Settings","useShadow","styleInterface","LegacyElementMixin","_mixin3","LegacyElement","_this11","created","isAttached","attached","detached","attributeChanged","_registered","_ensureAttributes","_applyListeners","api","n$","pd","inherited","options","hbl","__boundListeners","bl","_removeEventListenerFromNode","direction","slctr","forceRender","queryDistributedElements","cn","tc","getDistributedNodes","getContentChildNodes","container","shouldObserve","jobName","wait","_debouncers","waitTime","tag","elt","setProperties","loadFn","errorFn","bool","transformText","webkitTransform","transform","arrayOrPath","level","_console","_len4","_key4","_logger","_len5","_key5","_len6","_key6","_len7","_key7","DocumentFragment","mixinBehaviors","behaviors","superBehaviors","flattenBehaviors","_mixinBehaviors","GenerateClassFromInfo","exclude","_warn","generatedFrom","registered","PolymerGenerated","_Base","listeners","hostAttributes","_ensureAttribute","metaProps","beforeRegister","Class","HTMLTemplateElementExtension","newInstance","upgradeTemplate","findMethodHost","templateHost","createTemplatizerClass","TemplateInstanceBase","__templatizeOptions","addNotifyEffects","addPropagateEffects","userForwardHostProp","__templatizeTemplateClass","_DataTemplate","TemplatizedTemplate","DataTemplate","PROPERTY_EFFECT_TYPES","createForwardHostPropEffect","hostProp","iprop","userNotifyInstanceProp","notifyInstanceProp","createNotifyInstancePropEffect","hprop","createNotifyHostPropEffect","instProp","_Polymer$PropertyEffe","_this13","_configureProperties","_templateInstance","__hideTemplateChildren__","_showHideChildren","__hostProps","_this14","hide","__polymerTextContent__","__polymerDisplay__","display","_class","baseClass","__templatizeInstanceClass","modelForElement","Templatizer","_templatizerTemplate","_instanceProps","_forwardHostPropV2","_notifyInstancePropV2","DomBind","_mixin4","__removeChildren","__children","_this19","_ret4","__insertChildren","DomRepeat","_Polymer$Element","_this20","__instances","__limit","Infinity","__pool","__renderDebouncer","__itemsIdxToInstIdx","__chunkCount","__lastChunkTime","__needFullRefresh","__sortFn","__filterFn","__observePaths","__ctor","as","indexAs","itemsIndexAs","sort","renderedItemCount","initialCount","targetFramerate","_targetFrameTime","__isDetached","__detachInstance","__attachInstance","_this21","_ret5","__render","i$","methodHost","__getMethodHost","__debounceRender","rate","ceil","performance","now","__requestRenderChunk","_this22","__renderChunk","currChunkTime","ratio","round","change","__handleItemPath","__initializeChunking","paths","__ensureTemplatized","__applyFullRefresh","_setRenderedItemCount","__tryRenderChunk","_this23","isntIdxToItemsIdx","itemsIdxToInstIdx","instIdx","limit","itemIdx","__insertInstance","__detachAndRemoveInstance","__stampInstance","beforeRow","beforeNode","hidden","itemsPath","dot","itemsIdx","parseInt","itemSubPath","__handleObservedPaths","itemPath","DomIf","_Polymer$Element2","_this24","__invalidProps","__instance","if","restamp","_this25","DOCUMENT_FRAGMENT_NODE","__teardownInstance","__ensureInstance","_lastIf","_this26","_ret6","__syncHostProperties","lastChild","ArraySelectorMixin","_superClass4","_class2","_this27","__lastItems","__lastMulti","__selectedMap","multi","selected","selectedItem","toggle","itemsInfo","newItems","lastItems","lastMulti","clearSelection","__applySplices","__deselectChangedIdx","_this28","_loop4","has","__updateLinks","sidx","_this29","linkPaths","Map","isSelected","_this30","__selectedIndexForItemIndex","deselect","selectIndex","deselectIndex","clear","ArraySelector","customStyles","__seenByShadyCSS","__shadyCSSCachedStyle","getStyle","addCustomStyle","CustomStyle","_HTMLElement2","_this31","_style","_bindingRegex_patch","_bindingRegex_1_2_4","_bindingRegex_1_2_4_patched","Annotations","_bindingRegex","XMLHttpRequest","response","status","statusText","completes","resolveCompletes","rejectCompletes","progress","aborted","errored","timedOut","succeeded","send","_setProgress","lengthComputable","loaded","total","_setErrored","_updateStatus","_setTimedOut","_setResponse","parseResponse","open","async","acceptType","json","html","xml","arraybuffer","handleAs","headers","newHeaders","keys","requestHeader","_error","setRequestHeader","jsonPrefix","responseType","_responseType","_jsonPrefix","withCredentials","_encodeBodyObject","preferResponseText","prefixLen","responseText","_","responseXML","message","abort","_setAborted","contentType","bodyObj","_wwwFormUrlEncode","pieces","_wwwFormUrlEncodePiece","encodeURIComponent","_setStatus","_setStatusText","sync","auto","verbose","lastRequest","loading","lastResponse","lastError","activeRequests","debounceDuration","_boundHandleResponse","_handleResponse","queryString","param","queryParts","requestUrl","bindingChar","requestHeaders","header","toRequestOptions","generateRequest","request","requestOptions","_handleError","_discardRequest","_setLastRequest","_setLoading","_setLastResponse","_setLastError","requestIndex","_requestOptionsChanged","_setupIntlPolyfill","intlLibraryUrl","Intl","intlLibraryLoadingStatus","IntlPolyfill","intlLibraryScript","intlLibraryLoaded","_setupIntlPolyfillLocale","locale","script","intlScript","supported","NumberFormat","supportedLocalesOf","localeMatcher","fallbackLanguages","_enumerateFallbackLanguages","enSupport","DEFAULT_LANG","anotherIntlLocaleLoadedBindThis","anotherIntlLocaleLoadErrorBindThis","fallbackSupport","intlLocaleLoadedBindThis","intlLocaleLoadErrorBindThis","libraryLoadedBindThis","extLangCode","scriptCode","countryCode","isExtLangCode","isScriptCode","isCountryCode","_setupIntlPolyfillCalled","_lang","raw","offset","rawNumber","number","formatted","_setupObservers","textNode","_textMutated","attributeFilter","nodeObserver","observeNodes","attributeName","_rawChanged","_render","_langChanged","_optionsChanged","_onOptionsPropertyChanged","_offsetChanged","_formatNumber","format","_cp","ord","v0","plurals","amd","exports","af","ak","am","ar","t0","n100","asa","ast","az","i10","i100","i1000","be","n10","bem","bez","bg","bh","bm","bn","bo","br","n1000000","brx","bs","f10","f100","ce","cgg","chr","ckb","cs","cy","de","dsb","dv","dz","ee","eo","es","et","eu","ff","fi","fil","fo","fr","fur","fy","gl","gsw","gu","guw","gv","haw","he","hi","hr","hsb","hu","hy","ig","ii","in","it","iu","iw","jbo","jgo","ji","jmc","jv","jw","kab","kaj","kcg","kde","kea","kkj","kl","km","kn","ko","ks","ksb","ksh","ku","kw","ky","lag","lb","lg","lkt","ln","lo","lt","lv","mas","mg","mgo","mk","ml","mn","mo","mr","ms","mt","my","nah","naq","nb","nd","ne","nl","nn","nnh","no","nqo","nr","nso","ny","nyn","om","or","os","pap","pl","prg","ps","pt","pt-PT","rm","ro","rof","ru","rwk","sah","saq","sdh","se","seh","ses","sg","sh","shi","si","sk","sl","sma","smi","smj","smn","sms","sn","so","sq","sr","ss","ssy","st","sv","sw","syr","te","teo","th","ti","tig","tk","tl","tn","tr","ts","tzm","ug","uk","ur","uz","ve","vi","vo","vun","wa","wae","wo","xh","xog","yi","yo","zh","zu","paramAttribute","paramFormat","observeParams","_setupParams","elements","needParamObservation","tagName","_templateMutated","templateElement","templateTextNode","listen","_paramFormatChanged","oldParamFormat","lastTemplateText","_paramAttributeChanged","oldParamAttribute","_getPluralCategory","category","_selectTemplateText","templateText","templateObject","other","paramPlaceholder","tmpNode","shadowDomV1","shadyDomV1","innerHTML","useRaw","autoSaveDisabled","errorMessage","_loaded","_boundHandleStorage","_handleStorage","_load","_trySaveValue","_doNotSave","_debounceReload","reload","externalChange","localStorage","getItem","removeItem","setItem","defaultLang","hasNative","useNative","currentScript","_currentScript","domModule","registerI18nPreference","persist","isReady","_observe","language","browserLanguage","_disconnect","_onLoadEmptyStorage","isInitialized","_onLoadStorage","_onPersistChange","_onStorageValueChange","_htmlLangMutationObserverCallback","_htmlLangMutationObserver","_htmlLangMutationObserverCallbackBindThis","sharedData","BehaviorsStore","_I18nAttrRepo","_created","customAttributes","_traverseTemplateTree","__ready__","standardTemplate","standard","isLocalizableAttribute","_getType","_matchAttribute","_compareSelectors","s1","s2","name1","name2","localeCompare","setLocalizableAttribute","prev","selectors","","registerLocalizableAttributes","textAttr","nodeName","__esModule","Buffer","isBuffer","getOwnPropertySymbols","getKeys","getSymbols","getTime","copy","copyValue","copyCollection","ShadowDOMPolyfill","isStandardPropertyConfigurable","langPropertyDescriptor","extraWhiteSpaceNode","bundles","bundleFetchingInstances","startUrl","localesPath","attributesRepository","userPreference","debuglog","I18nControllerBehavior","isI18nController","masterBundles","I18nBehavior","lang-updated","_getBundle","resolved","tryLang","fallbackLanguageList","_fetchStatus","lastLang","_handleLangAttributeChange","oldValue","oldLang","ajaxLang","_fetchLanguage","_updateEffectiveLang","targetLang","_fetchBundle","nextFallbackLanguage","fetchingInstance","_constructBundle","_forwardLangEventBindThis","_forwardLangEvent","_handleBundleFetchedBindThis","_handleBundleFetched","ajax","_handleResponseBindFetchingInstance","_handleErrorBindFetchingInstance","skipFetching","bundle","_deepMap","success","rawResponses","_observeHtmlLangChanged","_htmlLangObserver","_handleHtmlLangChange","baseLang","_constructDefaultBundle","_id","parentTemplate","localizableText","jsonData","_traverseAttributes","messageId","attrId","isLocalizable","dummy","parameterized","processed","parsed","_generateMessageId","_setBundleValue","setAttributeNode","span","templateTextParams","whiteSpaceElements","isWhiteSpace","isCompoundAnnotatedNode","child","parsedValue","parsedValue2","childElementCount","_isCompoundAnnotatedText","childStatus","templateNonCommentChildNodes","templateChild","hasText","hasCompoundAnnotatedText","hasTextChild","hasCompoundAnnotatedChildNode","hasGrandChildren","grandChild","_hasAnnotatedText","_compoundAnnotationToSpan","_child","templateNode","childTextNode","currentList","DOCUMENT_NODE","childNode","messageIdPath","substr","table","i18nFormat","_templateLocalizable","assetUrl","URL","currentImport","_propertyEffects","attributeOldValue","_onDomChangeBindThis","_onDomChange","__data__","Bind","_createAccessors","_properties","_I18nBehavior","_tmpNode","i18nAttrRepos","domModules","repo","i18nBehaviorDomBind","extend","i18nDomBind","domBind","domBindProto","_Polymer","PreferenceElement","_Mixins$Localizable","Mixins","Localizable","_BaseElements$I18nEle","_PreferenceElement","BaseElements","I18nElement","Define","_langUpdated","lang0","lang1","navigatorLanguage","isNavigatorLanguageEn","lang.raw","done"],"mappings":"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","file":"../no-persist-test-imports.js","sourcesContent":["\"use strict\";\nvar fakeServerContents =\n{\n  \"/commented-simple-text-element/commented-simple-text-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"outermost header 1\\\",\\n  \\\"text_4\\\": \\\" outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"simple text without id\\\",\\n  \\\"span_6\\\": \\\"simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"simple text with id\\\",\\n  \\\"label-2\\\": \\\"simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"parameters\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"id\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" outermost text at the end \\\"\\n}\",\n  \"/commented-simple-text-element/locales/commented-simple-text-element.fr.json\": \"{\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" fr outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"fr outermost header 1\\\",\\n  \\\"text_4\\\": \\\" fr outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"fr simple text without id\\\",\\n  \\\"span_6\\\": \\\"fr simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"fr simple text with id\\\",\\n  \\\"label-2\\\": \\\"fr simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"fr simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" fr simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"fr simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" fr simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"fr simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" fr simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"fr simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"fr great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"fr line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"fr line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"fr line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"fr line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"fr line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"fr line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr parameters\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr id\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" fr outermost text at the end \\\"\\n}\\n\",\n  \"/compound-binding-dom-bind.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": [\\n    \\\" outermost text at the beginning with compound {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"h1_3\\\": [\\n    \\\"outermost header 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"text_4\\\": [\\n    \\\" outermost text in the middle with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"span_5\\\": [\\n    \\\"simple text without id with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"span_6\\\": [\\n    \\\"simple text without id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"label-1\\\": [\\n    \\\"simple text with id and {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"label-2\\\": [\\n    \\\"simple text with id and {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:span\\\": [\\n    \\\"simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:span_1\\\": [\\n    \\\"simple text within div with {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:div_2:div\\\": [\\n    \\\"great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text\\\": [\\n    \\\" simple text as the first element in div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:span_1\\\": [\\n    \\\"simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text_2\\\": [\\n    \\\" simple text in the middle of div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:span_3\\\": [\\n    \\\"simple text within div with {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:div_4:div\\\": [\\n    \\\"great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text_5\\\": [\\n    \\\" simple text at the last element in div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"toplevel-div:span\\\": [\\n    \\\"simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"toplevel-div:span_1\\\": [\\n    \\\"simple text within div 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"third-level-div\\\": [\\n    \\\"great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"second-level-div:div_1\\\": [\\n    \\\"great grandchild text within div without id with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li\\\": [\\n    \\\"line item without id 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li_1\\\": [\\n    \\\"line item without id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li_2\\\": [\\n    \\\"line item without id 3 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li\\\": [\\n    \\\"line item with id 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li_1\\\": [\\n    \\\"line item with id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li_2\\\": [\\n    \\\"line item with id 3 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"p_13\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"A paragraph with {1}, {2}, and {3} is converted to {4}.\\\",\\n    \\\"id\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": [\\n    \\\" outermost text at the end with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ]\\n}\",\n  \"/compound-binding-element/compound-binding-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": [\\n    \\\" outermost text at the beginning with compound {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"h1_3\\\": [\\n    \\\"outermost header 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"text_4\\\": [\\n    \\\" outermost text in the middle with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"span_5\\\": [\\n    \\\"simple text without id with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"span_6\\\": [\\n    \\\"simple text without id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"label-1\\\": [\\n    \\\"simple text with id and {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"label-2\\\": [\\n    \\\"simple text with id and {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:span\\\": [\\n    \\\"simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:span_1\\\": [\\n    \\\"simple text within div with {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:div_2:div\\\": [\\n    \\\"great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text\\\": [\\n    \\\" simple text as the first element in div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:span_1\\\": [\\n    \\\"simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text_2\\\": [\\n    \\\" simple text in the middle of div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:span_3\\\": [\\n    \\\"simple text within div with {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:div_4:div\\\": [\\n    \\\"great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text_5\\\": [\\n    \\\" simple text at the last element in div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"toplevel-div:span\\\": [\\n    \\\"simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"toplevel-div:span_1\\\": [\\n    \\\"simple text within div 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"third-level-div\\\": [\\n    \\\"great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"second-level-div:div_1\\\": [\\n    \\\"great grandchild text within div without id with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li\\\": [\\n    \\\"line item without id 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li_1\\\": [\\n    \\\"line item without id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li_2\\\": [\\n    \\\"line item without id 3 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li\\\": [\\n    \\\"line item with id 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li_1\\\": [\\n    \\\"line item with id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li_2\\\": [\\n    \\\"line item with id 3 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"p_13\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"A paragraph with {1}, {2}, and {3} is converted to {4}.\\\",\\n    \\\"id\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": [\\n    \\\" outermost text at the end with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ]\\n}\",\n  \"/compound-binding-element/locales/compound-binding-element.fr.json\": \"{\\n  \\\"model\\\": {},\\n  \\\"text\\\": [\\n    \\\" fr outermost text at the beginning with compound {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"h1_3\\\": [\\n    \\\"fr outermost header 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"text_4\\\": [\\n    \\\" fr outermost text in the middle with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"span_5\\\": [\\n    \\\"fr simple text without id with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"span_6\\\": [\\n    \\\"fr simple text without id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"label-1\\\": [\\n    \\\"fr simple text with id and {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"label-2\\\": [\\n    \\\"fr simple text with id and {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:span\\\": [\\n    \\\"fr simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:span_1\\\": [\\n    \\\"fr simple text within div with {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:div_2:div\\\": [\\n    \\\"fr great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text\\\": [\\n    \\\" fr simple text as the first element in div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:span_1\\\": [\\n    \\\"fr simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text_2\\\": [\\n    \\\" fr simple text in the middle of div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:span_3\\\": [\\n    \\\"fr simple text within div with {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:div_4:div\\\": [\\n    \\\"fr great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text_5\\\": [\\n    \\\" fr simple text at the last element in div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"toplevel-div:span\\\": [\\n    \\\"fr simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"toplevel-div:span_1\\\": [\\n    \\\"fr simple text within div 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"third-level-div\\\": [\\n    \\\"fr great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"second-level-div:div_1\\\": [\\n    \\\"fr great grandchild text within div without id with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li\\\": [\\n    \\\"fr line item without id 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li_1\\\": [\\n    \\\"fr line item without id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li_2\\\": [\\n    \\\"fr line item without id 3 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li\\\": [\\n    \\\"fr line item with id 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li_1\\\": [\\n    \\\"fr line item with id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li_2\\\": [\\n    \\\"fr line item with id 3 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"p_13\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"fr A paragraph with {1}, {2}, and {3} is converted to {4}.\\\",\\n    \\\"fr id\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": [\\n    \\\" fr outermost text at the end with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ]\\n}\\n\",\n  \"/edge-case-dom-bind.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": [\\n    \\\" name = {1} \\\",\\n    \\\"{{text.name}}\\\"\\n  ],\\n  \\\"i18n-number_1\\\": \\\"1\\\",\\n  \\\"i18n-format_2\\\": [\\n    \\\"{{text.format}}\\\",\\n    \\\"1\\\"\\n  ],\\n  \\\"i18n-format_3\\\": [\\n    \\\"format\\\",\\n    \\\"\\\"\\n  ],\\n  \\\"p_8\\\": [\\n    \\\"hello {1}{2} {3} world\\\",\\n    \\\"<br>\\\",\\n    \\\"<span>\\\",\\n    \\\"<span>\\\"\\n  ],\\n  \\\"p_9\\\": [\\n    \\\"hello{1}world\\\",\\n    \\\"<br>\\\"\\n  ],\\n  \\\"text_10\\\": \\\" hello \\\",\\n  \\\"text_14\\\": \\\" world \\\"\\n}\",\n  \"/edge-case/advanced-binding-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {\\n    \\\"aria-attributes\\\": {\\n      \\\"title\\\": \\\"tooltip text\\\",\\n      \\\"aria-label\\\": \\\"aria label text\\\",\\n      \\\"aria-valuetext\\\": \\\"aria value text\\\"\\n    }\\n  },\\n  \\\"annotated-format\\\": [\\n    \\\"{{tr(status,text.statusMessageFormats)}}\\\",\\n    \\\"{{parameter}}\\\",\\n    \\\"string parameter\\\"\\n  ],\\n  \\\"span_5\\\": [\\n    \\\"{1} {2}\\\",\\n    \\\"{{text.defaultValue}}\\\",\\n    \\\"{{text.defaultValue}}\\\"\\n  ],\\n  \\\"statusMessages\\\": {\\n    \\\"ok\\\": \\\"healthy status\\\",\\n    \\\"busy\\\": \\\"busy status\\\",\\n    \\\"error\\\": \\\"error status\\\",\\n    \\\"default\\\": \\\"unknown status\\\"\\n  },\\n  \\\"defaultValue\\\": \\\"default value\\\",\\n  \\\"statusMessageFormats\\\": {\\n    \\\"ok\\\": \\\"healthy status\\\",\\n    \\\"busy\\\": \\\"busy status with {2}\\\",\\n    \\\"error\\\": \\\"error status with {1} and {2}\\\",\\n    \\\"default\\\": \\\"unknown status\\\"\\n  },\\n  \\\"nodefault\\\": {\\n    \\\"ok\\\": \\\"ok status\\\"\\n  }\\n}\",\n  \"/edge-case/complex-compound-binding-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"item-update2:text\\\": [\\n    \\\"updated: {1}, by: \\\",\\n    \\\"{{text.updated}}\\\"\\n  ],\\n  \\\"item-update2:text_2\\\": \\\" xxx \\\",\\n  \\\"item-update2:dom-if_3:template:span:b\\\": \\\"IF CONTENT\\\",\\n  \\\"item-update2:b_4\\\": \\\"abc\\\",\\n  \\\"item-update2:dom-if_5:template:text\\\": \\\"IF CONTENT 2\\\",\\n  \\\"item-update2:text_6\\\": \\\" hello \\\",\\n  \\\"item-update:text\\\": [\\n    \\\"updated: {1}, by: \\\",\\n    \\\"{{text.updated}}\\\"\\n  ],\\n  \\\"item-update:text_2\\\": \\\" xxx \\\",\\n  \\\"item-update:dom-if_3:template:b\\\": \\\"IF CONTENT\\\",\\n  \\\"item-update:b_4\\\": \\\"abc\\\",\\n  \\\"item-update:dom-if_5:template:text\\\": \\\"IF CONTENT 2\\\",\\n  \\\"item-update:text_6\\\": \\\" hello \\\",\\n  \\\"item-update3:text\\\": [\\n    \\\"updated: {1}, by: \\\",\\n    \\\"{{text.updated}}\\\"\\n  ],\\n  \\\"item-update3:text_2\\\": \\\" xxx \\\",\\n  \\\"item-update3:dom-if_3:template:b\\\": \\\"IF\\\",\\n  \\\"item-update3:dom-if_3:template:b_1\\\": \\\"CONTENT\\\",\\n  \\\"item-update3:b_4\\\": \\\"abc\\\",\\n  \\\"item-update3:dom-if_5:template:text\\\": \\\"IF CONTENT 2\\\",\\n  \\\"item-update3:text_6\\\": \\\" hello \\\",\\n  \\\"item-update4:text\\\": [\\n    \\\"updated: {1}, by: \\\",\\n    \\\"{{text.updated}}\\\"\\n  ],\\n  \\\"item-update4:dom-repeat_1:template:text\\\": [\\n    \\\" {1} = {2} \\\",\\n    \\\"{{item.name}}\\\",\\n    \\\"{{text.updated}}\\\"\\n  ],\\n  \\\"item-update4:text_2\\\": \\\" xxx \\\",\\n  \\\"item-update4:dom-if_3:template:b\\\": \\\"IF CONTENT\\\",\\n  \\\"item-update4:b_4\\\": \\\"abc\\\",\\n  \\\"item-update4:dom-if_5:template:text\\\": \\\"IF CONTENT 2\\\",\\n  \\\"item-update4:text_6\\\": \\\" hello \\\",\\n  \\\"paragraph:text\\\": \\\"A paragraph with \\\",\\n  \\\"paragraph:text_2\\\": \\\" is converted to \\\",\\n  \\\"paragraph:code_3\\\": \\\"<i18n-format>\\\",\\n  \\\"paragraph:text_4\\\": \\\". \\\",\\n  \\\"paragraph2:text\\\": \\\"A paragraph with deep \\\",\\n  \\\"paragraph2:text_2\\\": \\\" is \\\",\\n  \\\"paragraph2:b_3\\\": \\\"not\\\",\\n  \\\"paragraph2:text_4\\\": \\\" converted to \\\",\\n  \\\"paragraph2:code_5\\\": \\\"<i18n-format>\\\",\\n  \\\"paragraph2:text_6\\\": \\\". \\\",\\n  \\\"authors\\\": [\\n    {\\n      \\\"name\\\": \\\"Joe\\\"\\n    },\\n    {\\n      \\\"name\\\": \\\"Alice\\\"\\n    }\\n  ],\\n  \\\"updated\\\": \\\"Jan 1st, 2016\\\",\\n  \\\"parameters\\\": [\\n    \\\"parameter 1\\\",\\n    \\\"parameter 2\\\"\\n  ]\\n}\",\n  \"/edge-case/empty-element.json\": \"{}\",\n  \"/edge-case/locales/advanced-binding-element.fr.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {\\n    \\\"aria-attributes\\\": {\\n      \\\"title\\\": \\\"fr tooltip text\\\",\\n      \\\"aria-label\\\": \\\"fr aria label text\\\",\\n      \\\"aria-valuetext\\\": \\\"fr aria value text\\\"\\n    }\\n  },\\n  \\\"annotated-format\\\": [\\n    \\\"{{tr(status,text.statusMessageFormats)}}\\\",\\n    \\\"{{parameter}}\\\",\\n    \\\"fr string parameter\\\"\\n  ],\\n  \\\"span_5\\\": [\\n    \\\"fr {1} {2}\\\",\\n    \\\"{{text.defaultValue}}\\\",\\n    \\\"{{text.defaultValue}}\\\"\\n  ],\\n  \\\"statusMessages\\\": {\\n    \\\"ok\\\": \\\"fr healthy status\\\",\\n    \\\"busy\\\": \\\"fr busy status\\\",\\n    \\\"error\\\": \\\"fr error status\\\",\\n    \\\"default\\\": \\\"fr unknown status\\\"\\n  },\\n  \\\"defaultValue\\\": \\\"fr default value\\\",\\n  \\\"statusMessageFormats\\\": {\\n    \\\"ok\\\": \\\"fr healthy status\\\",\\n    \\\"busy\\\": \\\"fr busy status with {2}\\\",\\n    \\\"error\\\": \\\"fr error status with {1} and {2}\\\",\\n    \\\"default\\\": \\\"fr unknown status\\\"\\n  },\\n  \\\"nodefault\\\": {\\n    \\\"ok\\\": \\\"fr ok status\\\"\\n  }\\n}\",\n  \"/edge-case/locales/complex-compound-binding-element.fr.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"item-update2:text\\\": [\\n    \\\"fr updated: {1}, by: \\\",\\n    \\\"{{text.updated}}\\\"\\n  ],\\n  \\\"item-update2:text_2\\\": \\\" fr xxx \\\",\\n  \\\"item-update2:dom-if_3:template:span:b\\\": \\\"fr IF CONTENT\\\",\\n  \\\"item-update2:b_4\\\": \\\"fr abc\\\",\\n  \\\"item-update2:dom-if_5:template:text\\\": \\\"fr IF CONTENT 2\\\",\\n  \\\"item-update2:text_6\\\": \\\" fr hello \\\",\\n  \\\"item-update:text\\\": [\\n    \\\"fr updated: {1}, by: \\\",\\n    \\\"{{text.updated}}\\\"\\n  ],\\n  \\\"item-update:text_2\\\": \\\" fr xxx \\\",\\n  \\\"item-update:dom-if_3:template:b\\\": \\\"fr IF CONTENT\\\",\\n  \\\"item-update:b_4\\\": \\\"fr abc\\\",\\n  \\\"item-update:dom-if_5:template:text\\\": \\\"fr IF CONTENT 2\\\",\\n  \\\"item-update:text_6\\\": \\\" fr hello \\\",\\n  \\\"item-update3:text\\\": [\\n    \\\"fr updated: {1}, by: \\\",\\n    \\\"{{text.updated}}\\\"\\n  ],\\n  \\\"item-update3:text_2\\\": \\\" fr xxx \\\",\\n  \\\"item-update3:dom-if_3:template:b\\\": \\\"fr IF\\\",\\n  \\\"item-update3:dom-if_3:template:b_1\\\": \\\"fr CONTENT\\\",\\n  \\\"item-update3:b_4\\\": \\\"fr abc\\\",\\n  \\\"item-update3:dom-if_5:template:text\\\": \\\"fr IF CONTENT 2\\\",\\n  \\\"item-update3:text_6\\\": \\\" fr hello \\\",\\n  \\\"item-update4:text\\\": [\\n    \\\"fr updated: {1}, by: \\\",\\n    \\\"{{text.updated}}\\\"\\n  ],\\n  \\\"item-update4:dom-repeat_1:template:text\\\": [\\n    \\\" fr {1} = {2} \\\",\\n    \\\"{{item.name}}\\\",\\n    \\\"{{text.updated}}\\\"\\n  ],\\n  \\\"item-update4:text_2\\\": \\\" fr xxx \\\",\\n  \\\"item-update4:dom-if_3:template:b\\\": \\\"fr IF CONTENT\\\",\\n  \\\"item-update4:b_4\\\": \\\"fr abc\\\",\\n  \\\"item-update4:dom-if_5:template:text\\\": \\\"fr IF CONTENT 2\\\",\\n  \\\"item-update4:text_6\\\": \\\" fr hello \\\",\\n  \\\"paragraph:text\\\": \\\"fr A paragraph with \\\",\\n  \\\"paragraph:text_2\\\": \\\" fr is converted to \\\",\\n  \\\"paragraph:code_3\\\": \\\"fr <i18n-format>\\\",\\n  \\\"paragraph:text_4\\\": \\\"fr . \\\",\\n  \\\"paragraph2:text\\\": \\\"fr A paragraph with deep \\\",\\n  \\\"paragraph2:text_2\\\": \\\" fr is \\\",\\n  \\\"paragraph2:b_3\\\": \\\"fr not\\\",\\n  \\\"paragraph2:text_4\\\": \\\" fr converted to \\\",\\n  \\\"paragraph2:code_5\\\": \\\"fr <i18n-format>\\\",\\n  \\\"paragraph2:text_6\\\": \\\"fr . \\\",\\n  \\\"authors\\\": [\\n    {\\n      \\\"name\\\": \\\"fr Joe\\\"\\n    },\\n    {\\n      \\\"name\\\": \\\"fr Alice\\\"\\n    }\\n  ],\\n  \\\"updated\\\": \\\"fr Jan 1st, 2016\\\",\\n  \\\"parameters\\\": [\\n    \\\"fr parameter 1\\\",\\n    \\\"fr parameter 2\\\"\\n  ]\\n}\",\n  \"/edge-case/locales/empty-element.fr.json\": \"{}\",\n  \"/fallback-text-element/fallback-text-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"outermost header 1\\\",\\n  \\\"text_4\\\": \\\" outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"simple text without id\\\",\\n  \\\"span_6\\\": \\\"simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"simple text with id\\\",\\n  \\\"label-2\\\": \\\"simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"parameters\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"id\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" outermost text at the end \\\"\\n}\",\n  \"/fallback-text-element/locales/fallback-text-element.fr-CA.json\": \"{\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\"fr-CA  outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"fr-CA outermost header 1\\\",\\n  \\\"text_4\\\": \\\"fr-CA  outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"fr-CA simple text without id\\\",\\n  \\\"span_6\\\": \\\"fr-CA simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"fr-CA simple text with id\\\",\\n  \\\"label-2\\\": \\\"fr-CA simple text with id 2\\\",\\n  \\\"div_10:span_1\\\": \\\"fr-CA simple text within div\\\",\\n  \\\"toplevel-div:span\\\": \\\"fr-CA simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"fr-CA simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"fr-CA great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"fr-CA great grandchild text within div without id\\\",\\n  \\\"p_13\\\": [\\n    \\\"fr-CA A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr-CA parameters\\\",\\n    \\\"fr-CA <i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"fr-CA A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr-CA id\\\",\\n    \\\"fr-CA <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\"fr-CA  outermost text at the end \\\"\\n}\\n\",\n  \"/fallback-text-element/locales/fallback-text-element.fr.json\": \"{\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\"fr  outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"fr outermost header 1\\\",\\n  \\\"text_4\\\": \\\"fr  outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"fr simple text without id\\\",\\n  \\\"span_6\\\": \\\"fr simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"fr simple text with id\\\",\\n  \\\"label-2\\\": \\\"fr simple text with id 2\\\",\\n  \\\"toplevel-div:span\\\": \\\"fr simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"fr great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"fr line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"fr line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"fr line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"fr line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"fr line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"fr line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr parameters\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr id\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\"fr  outermost text at the end \\\"\\n}\\n\",\n  \"/locales/compound-binding-dom-bind.fr.json\": \"{\\n  \\\"model\\\": {},\\n  \\\"text\\\": [\\n    \\\" fr outermost text at the beginning with compound {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"h1_3\\\": [\\n    \\\"fr outermost header 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"text_4\\\": [\\n    \\\" fr outermost text in the middle with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"span_5\\\": [\\n    \\\"fr simple text without id with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"span_6\\\": [\\n    \\\"fr simple text without id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"label-1\\\": [\\n    \\\"fr simple text with id and {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"label-2\\\": [\\n    \\\"fr simple text with id and {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:span\\\": [\\n    \\\"fr simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:span_1\\\": [\\n    \\\"fr simple text within div with {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_9:div_2:div\\\": [\\n    \\\"fr great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text\\\": [\\n    \\\" fr simple text as the first element in div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:span_1\\\": [\\n    \\\"fr simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text_2\\\": [\\n    \\\" fr simple text in the middle of div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:span_3\\\": [\\n    \\\"fr simple text within div with {1} and {2} variables 2\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:div_4:div\\\": [\\n    \\\"fr great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_10:text_5\\\": [\\n    \\\" fr simple text at the last element in div with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"toplevel-div:span\\\": [\\n    \\\"fr simple text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"toplevel-div:span_1\\\": [\\n    \\\"fr simple text within div 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"third-level-div\\\": [\\n    \\\"fr great grandchild text within div with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"second-level-div:div_1\\\": [\\n    \\\"fr great grandchild text within div without id with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li\\\": [\\n    \\\"fr line item without id 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li_1\\\": [\\n    \\\"fr line item without id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"div_12:ul:li_2\\\": [\\n    \\\"fr line item without id 3 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li\\\": [\\n    \\\"fr line item with id 1 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li_1\\\": [\\n    \\\"fr line item with id 2 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"line-items:li_2\\\": [\\n    \\\"fr line item with id 3 with {1} and {2} variables\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"p_13\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"fr A paragraph with {1}, {2}, and {3} is converted to {4}.\\\",\\n    \\\"fr id\\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": [\\n    \\\" fr outermost text at the end with {1} and {2} variables \\\",\\n    \\\"{{param1}}\\\",\\n    \\\"{{param2}}\\\"\\n  ]\\n}\\n\",\n  \"/locales/simple-attribute-dom-bind.fr.json\": \"{\\n  \\\"model\\\": {\\n    \\\"standard-input\\\": {\\n      \\\"placeholder\\\": \\\"fr standard HTML5 attribute\\\"\\n    },\\n    \\\"outer-div:input_2\\\": {\\n      \\\"placeholder\\\": \\\"fr standard HTML5 attribute without id\\\"\\n    },\\n    \\\"paper-input-element\\\": {\\n      \\\"label\\\": \\\"fr paper-input label\\\",\\n      \\\"error-message\\\": \\\"fr paper-input error message\\\",\\n      \\\"placeholder\\\": \\\"fr paper-input placeholder\\\"\\n    },\\n    \\\"outer-div:paper-input_4\\\": {\\n      \\\"label\\\": \\\"fr paper-input label without id\\\",\\n      \\\"error-message\\\": \\\"fr paper-input error message without id\\\",\\n      \\\"placeholder\\\": \\\"fr paper-input placeholder without id\\\"\\n    },\\n    \\\"pie-chart\\\": {\\n      \\\"options\\\": {\\n        \\\"title\\\": \\\"fr Distribution of days in 2001H1\\\"\\n      },\\n      \\\"cols\\\": [\\n        {\\n          \\\"label\\\": \\\"fr Month\\\",\\n          \\\"type\\\": \\\"string\\\"\\n        },\\n        {\\n          \\\"label\\\": \\\"fr Days\\\",\\n          \\\"type\\\": \\\"number\\\"\\n        }\\n      ],\\n      \\\"rows\\\": [\\n        [\\n          \\\"fr Jan\\\",\\n          31\\n        ],\\n        [\\n          \\\"fr Feb\\\",\\n          28\\n        ],\\n        [\\n          \\\"fr Mar\\\",\\n          31\\n        ],\\n        [\\n          \\\"fr Apr\\\",\\n          30\\n        ],\\n        [\\n          \\\"fr May\\\",\\n          31\\n        ],\\n        [\\n          \\\"fr Jun\\\",\\n          30\\n        ]\\n      ]\\n    },\\n    \\\"column-chart\\\": {\\n      \\\"options\\\": {\\n        \\\"title\\\": \\\"fr Inventory\\\"\\n      },\\n      \\\"data\\\": [\\n        [\\n          \\\"fr Year\\\",\\n          \\\"fr Things\\\",\\n          \\\"fr Stuff\\\"\\n        ],\\n        [\\n          \\\"2004\\\",\\n          1000,\\n          400\\n        ],\\n        [\\n          \\\"2005\\\",\\n          1170,\\n          460\\n        ],\\n        [\\n          \\\"2006\\\",\\n          660,\\n          1120\\n        ],\\n        [\\n          \\\"2007\\\",\\n          1030,\\n          540\\n        ]\\n      ]\\n    },\\n    \\\"custom-attr\\\": {\\n      \\\"custom-text-attr1\\\": \\\"fr custom text attribute 1\\\",\\n      \\\"custom-text-attr2\\\": \\\"fr custom text attribute 2\\\",\\n      \\\"custom-text-attr3\\\": \\\"fr custom text attribute 3\\\"\\n    },\\n    \\\"selective-attr\\\": {\\n      \\\"custom-text-attr4\\\": [\\n        \\\"fr {1} custom-text-attr4 attribute with param {2} and param {3} {4}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"[[text.ordinary-div]]\\\",\\n        \\\"{{text.ordinary-div}}\\\"\\n      ],\\n      \\\"custom-text-attr5\\\": [\\n        \\\"[[text.ordinary-div]]\\\",\\n        \\\" fr custom-text-attr5 attribute with param \\\",\\n        \\\"{{or('',text.ordinary-div)}}\\\",\\n        \\\" fr and param \\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ],\\n      \\\"i18n-target\\\": [\\n        \\\"fr i18n-target attribute with param {1} and param {2}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ],\\n      \\\"i18n-target2\\\": [\\n        \\\"fr i18n-target2 attribute with param \\\",\\n        \\\"{{or('',text.ordinary-div)}}\\\",\\n        \\\" fr and param \\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ]\\n    },\\n    \\\"selective-attr2\\\": {\\n      \\\"i18n-target\\\": \\\"fr i18n-target attribute 2\\\"\\n    },\\n    \\\"selective-attr3\\\": {\\n      \\\"i18n-target6\\\": \\\"fr i18n-target6 attribute 2\\\"\\n    },\\n    \\\"selective-attr4\\\": {\\n      \\\"i18n-target6\\\": \\\"fr i18n-target6 attribute 3\\\"\\n    },\\n    \\\"json-data-id\\\": {\\n      \\\"attr1\\\": \\\"fr this attr1 is extracted\\\",\\n      \\\"i18n-target-attr\\\": \\\"fr this attribute is also extracted\\\"\\n    },\\n    \\\"template_2:json-data_1\\\": {\\n      \\\"attr1\\\": \\\"fr this attr1 without id is extracted\\\",\\n      \\\"i18n-target-attr\\\": \\\"fr this attribute without id is also extracted\\\"\\n    }\\n  },\\n  \\\"ordinary-div\\\": \\\"fr text 1\\\"\\n}\\n\",\n  \"/locales/simple-text-dom-bind.fr.json\": \"{\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" fr outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"fr outermost header 1\\\",\\n  \\\"text_4\\\": \\\" fr outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"fr simple text without id\\\",\\n  \\\"span_6\\\": \\\"fr simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"fr simple text with id\\\",\\n  \\\"label-2\\\": \\\"fr simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"fr simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" fr simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"fr simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" fr simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"fr simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" fr simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"fr simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"fr great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"fr line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"fr line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"fr line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"fr line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"fr line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"fr line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr parameters\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr id\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" fr outermost text at the end \\\"\\n}\\n\",\n  \"/multiple-case/item-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"label\\\": \\\"A\\\"\\n}\",\n  \"/multiple-case/locales/item-element.fr.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"label\\\": \\\"fr A\\\"\\n}\",\n  \"/multiple-case/locales/multiple-element.fr.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {}\\n}\",\n  \"/multiple-case/multiple-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {}\\n}\",\n  \"/plural-gender-element/locales/plural-gender-element.fr.json\": \"{\\n  \\\"model\\\": {},\\n  \\\"compound-format-text\\\": [\\n    {\\n      \\\"0\\\": \\\"fr You ({3}) gave no gifts.\\\",\\n      \\\"1\\\": {\\n        \\\"male\\\": \\\"fr You ({3}) gave him ({4}) {5}.\\\",\\n        \\\"female\\\": \\\"fr You ({3}) gave her ({4}) {5}.\\\",\\n        \\\"other\\\": \\\"fr You ({3}) gave them ({4}) {5}.\\\"\\n      },\\n      \\\"one\\\": {\\n        \\\"male\\\": \\\"fr You ({3}) gave him ({4}) and one other person {5}.\\\",\\n        \\\"female\\\": \\\"fr You ({3}) gave her ({4}) and one other person {5}.\\\",\\n        \\\"other\\\": \\\"fr You ({3}) gave them ({4}) and one other person {5}.\\\"\\n      },\\n      \\\"other\\\": \\\"fr You ({3}) gave them ({4}) and {1} other people gifts.\\\"\\n    },\\n    \\\"{{recipients.length - 1}}\\\",\\n    \\\"{{recipients.0.gender}}\\\",\\n    \\\"{{sender.name}}\\\",\\n    \\\"{{recipients.0.name}}\\\",\\n    \\\"fr a gift\\\"\\n  ]\\n}\\n\",\n  \"/plural-gender-element/plural-gender-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"compound-format-text\\\": [\\n    {\\n      \\\"0\\\": \\\"You ({3}) gave no gifts.\\\",\\n      \\\"1\\\": {\\n        \\\"male\\\": \\\"You ({3}) gave him ({4}) {5}.\\\",\\n        \\\"female\\\": \\\"You ({3}) gave her ({4}) {5}.\\\",\\n        \\\"other\\\": \\\"You ({3}) gave them ({4}) {5}.\\\"\\n      },\\n      \\\"one\\\": {\\n        \\\"male\\\": \\\"You ({3}) gave him ({4}) and one other person {5}.\\\",\\n        \\\"female\\\": \\\"You ({3}) gave her ({4}) and one other person {5}.\\\",\\n        \\\"other\\\": \\\"You ({3}) gave them ({4}) and one other person {5}.\\\"\\n      },\\n      \\\"other\\\": \\\"You ({3}) gave them ({4}) and {1} other people gifts.\\\"\\n    },\\n    \\\"{{recipients.length - 1}}\\\",\\n    \\\"{{recipients.0.gender}}\\\",\\n    \\\"{{sender.name}}\\\",\\n    \\\"{{recipients.0.name}}\\\",\\n    \\\"a gift\\\"\\n  ]\\n}\",\n  \"/preference/preference-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {}\\n}\",\n  \"/simple-attribute-dom-bind.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {\\n    \\\"standard-input\\\": {\\n      \\\"placeholder\\\": \\\"standard HTML5 attribute\\\"\\n    },\\n    \\\"outer-div:input_2\\\": {\\n      \\\"placeholder\\\": \\\"standard HTML5 attribute without id\\\"\\n    },\\n    \\\"paper-input-element\\\": {\\n      \\\"label\\\": \\\"paper-input label\\\",\\n      \\\"error-message\\\": \\\"paper-input error message\\\",\\n      \\\"placeholder\\\": \\\"paper-input placeholder\\\"\\n    },\\n    \\\"outer-div:paper-input_4\\\": {\\n      \\\"label\\\": \\\"paper-input label without id\\\",\\n      \\\"error-message\\\": \\\"paper-input error message without id\\\",\\n      \\\"placeholder\\\": \\\"paper-input placeholder without id\\\"\\n    },\\n    \\\"pie-chart\\\": {\\n      \\\"options\\\": {\\n        \\\"title\\\": \\\"Distribution of days in 2001H1\\\"\\n      },\\n      \\\"cols\\\": [\\n        {\\n          \\\"label\\\": \\\"Month\\\",\\n          \\\"type\\\": \\\"string\\\"\\n        },\\n        {\\n          \\\"label\\\": \\\"Days\\\",\\n          \\\"type\\\": \\\"number\\\"\\n        }\\n      ],\\n      \\\"rows\\\": [\\n        [\\n          \\\"Jan\\\",\\n          31\\n        ],\\n        [\\n          \\\"Feb\\\",\\n          28\\n        ],\\n        [\\n          \\\"Mar\\\",\\n          31\\n        ],\\n        [\\n          \\\"Apr\\\",\\n          30\\n        ],\\n        [\\n          \\\"May\\\",\\n          31\\n        ],\\n        [\\n          \\\"Jun\\\",\\n          30\\n        ]\\n      ]\\n    },\\n    \\\"column-chart\\\": {\\n      \\\"options\\\": {\\n        \\\"title\\\": \\\"Inventory\\\"\\n      },\\n      \\\"data\\\": [\\n        [\\n          \\\"Year\\\",\\n          \\\"Things\\\",\\n          \\\"Stuff\\\"\\n        ],\\n        [\\n          \\\"2004\\\",\\n          1000,\\n          400\\n        ],\\n        [\\n          \\\"2005\\\",\\n          1170,\\n          460\\n        ],\\n        [\\n          \\\"2006\\\",\\n          660,\\n          1120\\n        ],\\n        [\\n          \\\"2007\\\",\\n          1030,\\n          540\\n        ]\\n      ]\\n    },\\n    \\\"custom-attr\\\": {\\n      \\\"custom-text-attr1\\\": \\\"custom text attribute 1\\\",\\n      \\\"custom-text-attr2\\\": \\\"custom text attribute 2\\\",\\n      \\\"custom-text-attr3\\\": \\\"custom text attribute 3\\\"\\n    },\\n    \\\"selective-attr\\\": {\\n      \\\"custom-text-attr4\\\": [\\n        \\\"{1} custom-text-attr4 attribute with param {2} and param {3} {4}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"[[text.ordinary-div]]\\\",\\n        \\\"{{text.ordinary-div}}\\\"\\n      ],\\n      \\\"custom-text-attr5\\\": [\\n        \\\"[[text.ordinary-div]]\\\",\\n        \\\" custom-text-attr5 attribute with param \\\",\\n        \\\"{{or('',text.ordinary-div)}}\\\",\\n        \\\" and param \\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ],\\n      \\\"i18n-target\\\": [\\n        \\\"i18n-target attribute with param {1} and param {2}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ],\\n      \\\"i18n-target2\\\": [\\n        \\\"i18n-target2 attribute with param \\\",\\n        \\\"{{or('',text.ordinary-div)}}\\\",\\n        \\\" and param \\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ]\\n    },\\n    \\\"selective-attr2\\\": {\\n      \\\"i18n-target\\\": \\\"i18n-target attribute 2\\\"\\n    },\\n    \\\"selective-attr3\\\": {\\n      \\\"i18n-target6\\\": \\\"i18n-target6 attribute 2\\\"\\n    },\\n    \\\"selective-attr4\\\": {\\n      \\\"i18n-target6\\\": \\\"i18n-target6 attribute 3\\\"\\n    },\\n    \\\"json-data-id\\\": {\\n      \\\"attr1\\\": \\\"this attr1 is extracted\\\",\\n      \\\"i18n-target-attr\\\": \\\"this attribute is also extracted\\\"\\n    },\\n    \\\"template_2:json-data_1\\\": {\\n      \\\"attr1\\\": \\\"this attr1 without id is extracted\\\",\\n      \\\"i18n-target-attr\\\": \\\"this attribute without id is also extracted\\\"\\n    }\\n  },\\n  \\\"ordinary-div\\\": \\\"text 1\\\"\\n}\",\n  \"/simple-attribute-element/locales/simple-attribute-element.fr.json\": \"{\\n  \\\"model\\\": {\\n    \\\"standard-input\\\": {\\n      \\\"placeholder\\\": \\\"fr standard HTML5 attribute\\\"\\n    },\\n    \\\"outer-div:input_2\\\": {\\n      \\\"placeholder\\\": \\\"fr standard HTML5 attribute without id\\\"\\n    },\\n    \\\"paper-input-element\\\": {\\n      \\\"label\\\": \\\"fr paper-input label\\\",\\n      \\\"error-message\\\": \\\"fr paper-input error message\\\",\\n      \\\"placeholder\\\": \\\"fr paper-input placeholder\\\"\\n    },\\n    \\\"outer-div:paper-input_4\\\": {\\n      \\\"label\\\": \\\"fr paper-input label without id\\\",\\n      \\\"error-message\\\": \\\"fr paper-input error message without id\\\",\\n      \\\"placeholder\\\": \\\"fr paper-input placeholder without id\\\"\\n    },\\n    \\\"pie-chart\\\": {\\n      \\\"options\\\": {\\n        \\\"title\\\": \\\"fr Distribution of days in 2001H1\\\"\\n      },\\n      \\\"cols\\\": [\\n        {\\n          \\\"label\\\": \\\"fr Month\\\",\\n          \\\"type\\\": \\\"string\\\"\\n        },\\n        {\\n          \\\"label\\\": \\\"fr Days\\\",\\n          \\\"type\\\": \\\"number\\\"\\n        }\\n      ],\\n      \\\"rows\\\": [\\n        [\\n          \\\"fr Jan\\\",\\n          31\\n        ],\\n        [\\n          \\\"fr Feb\\\",\\n          28\\n        ],\\n        [\\n          \\\"fr Mar\\\",\\n          31\\n        ],\\n        [\\n          \\\"fr Apr\\\",\\n          30\\n        ],\\n        [\\n          \\\"fr May\\\",\\n          31\\n        ],\\n        [\\n          \\\"fr Jun\\\",\\n          30\\n        ]\\n      ]\\n    },\\n    \\\"column-chart\\\": {\\n      \\\"options\\\": {\\n        \\\"title\\\": \\\"fr Inventory\\\"\\n      },\\n      \\\"data\\\": [\\n        [\\n          \\\"fr Year\\\",\\n          \\\"fr Things\\\",\\n          \\\"fr Stuff\\\"\\n        ],\\n        [\\n          \\\"2004\\\",\\n          1000,\\n          400\\n        ],\\n        [\\n          \\\"2005\\\",\\n          1170,\\n          460\\n        ],\\n        [\\n          \\\"2006\\\",\\n          660,\\n          1120\\n        ],\\n        [\\n          \\\"2007\\\",\\n          1030,\\n          540\\n        ]\\n      ]\\n    },\\n    \\\"custom-attr\\\": {\\n      \\\"custom-text-attr1\\\": \\\"fr custom text attribute 1\\\",\\n      \\\"custom-text-attr2\\\": \\\"fr custom text attribute 2\\\",\\n      \\\"custom-text-attr3\\\": \\\"fr custom text attribute 3\\\"\\n    },\\n    \\\"selective-attr\\\": {\\n      \\\"custom-text-attr4\\\": [\\n        \\\"fr {1} custom-text-attr4 attribute with param {2} and param {3} {4}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"[[text.ordinary-div]]\\\",\\n        \\\"{{text.ordinary-div}}\\\"\\n      ],\\n      \\\"custom-text-attr5\\\": [\\n        \\\"[[text.ordinary-div]]\\\",\\n        \\\" fr custom-text-attr5 attribute with param \\\",\\n        \\\"{{or('',text.ordinary-div)}}\\\",\\n        \\\" fr and param \\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ],\\n      \\\"i18n-target\\\": [\\n        \\\"fr i18n-target attribute with param {1} and param {2}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ],\\n      \\\"i18n-target2\\\": [\\n        \\\"fr i18n-target2 attribute with param \\\",\\n        \\\"{{or('',text.ordinary-div)}}\\\",\\n        \\\" fr and param \\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ]\\n    },\\n    \\\"selective-attr2\\\": {\\n      \\\"i18n-target\\\": \\\"fr i18n-target attribute 2\\\"\\n    },\\n    \\\"selective-attr3\\\": {\\n      \\\"i18n-target6\\\": \\\"fr i18n-target6 attribute 2\\\"\\n    },\\n    \\\"selective-attr4\\\": {\\n      \\\"i18n-target6\\\": \\\"fr i18n-target6 attribute 3\\\"\\n    },\\n    \\\"json-data-id\\\": {\\n      \\\"attr1\\\": \\\"fr this attr1 is extracted\\\",\\n      \\\"i18n-target-attr\\\": \\\"fr this attribute is also extracted\\\"\\n    },\\n    \\\"template_2:json-data_1\\\": {\\n      \\\"attr1\\\": \\\"fr this attr1 without id is extracted\\\",\\n      \\\"i18n-target-attr\\\": \\\"fr this attribute without id is also extracted\\\"\\n    }\\n  },\\n  \\\"ordinary-div\\\": \\\"fr text 1\\\"\\n}\\n\",\n  \"/simple-attribute-element/locales/text-attribute-element.fr.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"span_4\\\": \\\"fr text\\\"\\n}\\n\",\n  \"/simple-attribute-element/simple-attribute-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {\\n    \\\"standard-input\\\": {\\n      \\\"placeholder\\\": \\\"standard HTML5 attribute\\\"\\n    },\\n    \\\"outer-div:input_2\\\": {\\n      \\\"placeholder\\\": \\\"standard HTML5 attribute without id\\\"\\n    },\\n    \\\"paper-input-element\\\": {\\n      \\\"label\\\": \\\"paper-input label\\\",\\n      \\\"error-message\\\": \\\"paper-input error message\\\",\\n      \\\"placeholder\\\": \\\"paper-input placeholder\\\"\\n    },\\n    \\\"outer-div:paper-input_4\\\": {\\n      \\\"label\\\": \\\"paper-input label without id\\\",\\n      \\\"error-message\\\": \\\"paper-input error message without id\\\",\\n      \\\"placeholder\\\": \\\"paper-input placeholder without id\\\"\\n    },\\n    \\\"pie-chart\\\": {\\n      \\\"options\\\": {\\n        \\\"title\\\": \\\"Distribution of days in 2001H1\\\"\\n      },\\n      \\\"cols\\\": [\\n        {\\n          \\\"label\\\": \\\"Month\\\",\\n          \\\"type\\\": \\\"string\\\"\\n        },\\n        {\\n          \\\"label\\\": \\\"Days\\\",\\n          \\\"type\\\": \\\"number\\\"\\n        }\\n      ],\\n      \\\"rows\\\": [\\n        [\\n          \\\"Jan\\\",\\n          31\\n        ],\\n        [\\n          \\\"Feb\\\",\\n          28\\n        ],\\n        [\\n          \\\"Mar\\\",\\n          31\\n        ],\\n        [\\n          \\\"Apr\\\",\\n          30\\n        ],\\n        [\\n          \\\"May\\\",\\n          31\\n        ],\\n        [\\n          \\\"Jun\\\",\\n          30\\n        ]\\n      ]\\n    },\\n    \\\"column-chart\\\": {\\n      \\\"options\\\": {\\n        \\\"title\\\": \\\"Inventory\\\"\\n      },\\n      \\\"data\\\": [\\n        [\\n          \\\"Year\\\",\\n          \\\"Things\\\",\\n          \\\"Stuff\\\"\\n        ],\\n        [\\n          \\\"2004\\\",\\n          1000,\\n          400\\n        ],\\n        [\\n          \\\"2005\\\",\\n          1170,\\n          460\\n        ],\\n        [\\n          \\\"2006\\\",\\n          660,\\n          1120\\n        ],\\n        [\\n          \\\"2007\\\",\\n          1030,\\n          540\\n        ]\\n      ]\\n    },\\n    \\\"custom-attr\\\": {\\n      \\\"custom-text-attr1\\\": \\\"custom text attribute 1\\\",\\n      \\\"custom-text-attr2\\\": \\\"custom text attribute 2\\\",\\n      \\\"custom-text-attr3\\\": \\\"custom text attribute 3\\\"\\n    },\\n    \\\"selective-attr\\\": {\\n      \\\"custom-text-attr4\\\": [\\n        \\\"{1} custom-text-attr4 attribute with param {2} and param {3} {4}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"[[text.ordinary-div]]\\\",\\n        \\\"{{text.ordinary-div}}\\\"\\n      ],\\n      \\\"custom-text-attr5\\\": [\\n        \\\"[[text.ordinary-div]]\\\",\\n        \\\" custom-text-attr5 attribute with param \\\",\\n        \\\"{{or('',text.ordinary-div)}}\\\",\\n        \\\" and param \\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ],\\n      \\\"i18n-target\\\": [\\n        \\\"i18n-target attribute with param {1} and param {2}\\\",\\n        \\\"{{text.ordinary-div}}\\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ],\\n      \\\"i18n-target2\\\": [\\n        \\\"i18n-target2 attribute with param \\\",\\n        \\\"{{or('',text.ordinary-div)}}\\\",\\n        \\\" and param \\\",\\n        \\\"[[text.ordinary-div]]\\\"\\n      ]\\n    },\\n    \\\"selective-attr2\\\": {\\n      \\\"i18n-target\\\": \\\"i18n-target attribute 2\\\"\\n    },\\n    \\\"selective-attr3\\\": {\\n      \\\"i18n-target6\\\": \\\"i18n-target6 attribute 2\\\"\\n    },\\n    \\\"selective-attr4\\\": {\\n      \\\"i18n-target6\\\": \\\"i18n-target6 attribute 3\\\"\\n    },\\n    \\\"json-data-id\\\": {\\n      \\\"attr1\\\": \\\"this attr1 is extracted\\\",\\n      \\\"i18n-target-attr\\\": \\\"this attribute is also extracted\\\"\\n    },\\n    \\\"template_2:json-data_1\\\": {\\n      \\\"attr1\\\": \\\"this attr1 without id is extracted\\\",\\n      \\\"i18n-target-attr\\\": \\\"this attribute without id is also extracted\\\"\\n    }\\n  },\\n  \\\"ordinary-div\\\": \\\"text 1\\\"\\n}\",\n  \"/simple-attribute-element/text-attribute-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"span_4\\\": \\\"text\\\"\\n}\",\n  \"/simple-text-dom-bind.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"outermost header 1\\\",\\n  \\\"text_4\\\": \\\" outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"simple text without id\\\",\\n  \\\"span_6\\\": \\\"simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"simple text with id\\\",\\n  \\\"label-2\\\": \\\"simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"parameters\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"id\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" outermost text at the end \\\"\\n}\",\n  \"/simple-text-element/locales/simple-text-element.fr.json\": \"{\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" fr outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"fr outermost header 1\\\",\\n  \\\"text_4\\\": \\\" fr outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"fr simple text without id\\\",\\n  \\\"span_6\\\": \\\"fr simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"fr simple text with id\\\",\\n  \\\"label-2\\\": \\\"fr simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"fr simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" fr simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"fr simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" fr simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"fr simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" fr simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"fr simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"fr great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"fr line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"fr line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"fr line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"fr line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"fr line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"fr line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr parameters\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr id\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" fr outermost text at the end \\\"\\n}\\n\",\n  \"/simple-text-element/locales/simple-text-element.ru.json\": \"{\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" ru outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"ru outermost header 1\\\",\\n  \\\"text_4\\\": \\\" ru outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"ru simple text without id\\\",\\n  \\\"span_6\\\": \\\"ru simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"ru simple text with id\\\",\\n  \\\"label-2\\\": \\\"ru simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"ru simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"ru simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"ru great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" ru simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"ru simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" ru simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"ru simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"ru great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" ru simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"ru simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"ru simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"ru great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"ru great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"ru line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"ru line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"ru line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"ru line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"ru line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"ru line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"ru A paragraph with {1} is converted to {2}.\\\",\\n    \\\"ru parameters\\\",\\n    \\\"ru <i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"ru A paragraph with {1} is converted to {2}.\\\",\\n    \\\"ru id\\\",\\n    \\\"ru <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" ru outermost text at the end \\\"\\n}\\n\",\n  \"/simple-text-element/simple-text-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"outermost header 1\\\",\\n  \\\"text_4\\\": \\\" outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"simple text without id\\\",\\n  \\\"span_6\\\": \\\"simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"simple text with id\\\",\\n  \\\"label-2\\\": \\\"simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"parameters\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"id\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" outermost text at the end \\\"\\n}\",\n  \"/simple-text-id-element/locales/simple-text-id-element.fr.json\": \"{\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" fr outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"fr outermost header 1\\\",\\n  \\\"text_4\\\": \\\" fr outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"fr simple text without id\\\",\\n  \\\"span_6\\\": \\\"fr simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"fr simple text with id\\\",\\n  \\\"label-2\\\": \\\"fr simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"fr simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" fr simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"fr simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" fr simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"fr simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" fr simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"fr simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"second-level-div\\\": [\\n    \\\" fr {1}\\\\n        {2} \\\",\\n    \\\"fr great grandchild text within div\\\",\\n    \\\"fr great grandchild text within div without id\\\"\\n  ],\\n  \\\"div_12:ul:li\\\": \\\"fr line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"fr line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"fr line item without id 3\\\",\\n  \\\"line-items\\\": [\\n    \\\" fr {1}\\\\n        {2}\\\\n        {3} \\\",\\n    \\\"fr line item with id 1\\\",\\n    \\\"fr line item with id 2\\\",\\n    \\\"fr line item with id 3\\\"\\n  ],\\n  \\\"p_13\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr parameters\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr id\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" fr outermost text at the end \\\"\\n}\\n\",\n  \"/simple-text-id-element/simple-text-id-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"outermost header 1\\\",\\n  \\\"text_4\\\": \\\" outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"simple text without id\\\",\\n  \\\"span_6\\\": \\\"simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"simple text with id\\\",\\n  \\\"label-2\\\": \\\"simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"second-level-div\\\": [\\n    \\\" {1}\\\\n        {2} \\\",\\n    \\\"great grandchild text within div\\\",\\n    \\\"great grandchild text within div without id\\\"\\n  ],\\n  \\\"div_12:ul:li\\\": \\\"line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"line item without id 3\\\",\\n  \\\"line-items\\\": [\\n    \\\" {1}\\\\n        {2}\\\\n        {3} \\\",\\n    \\\"line item with id 1\\\",\\n    \\\"line item with id 2\\\",\\n    \\\"line item with id 3\\\"\\n  ],\\n  \\\"p_13\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"parameters\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"id\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" outermost text at the end \\\"\\n}\",\n  \"/template-default-lang/locales/null-template-default-lang-element.ja.json\": \"\",\n  \"/template-default-lang/locales/null-template-default-lang-element.zh-Hans-CN.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" zh-Hans-CN outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"zh-Hans-CN outermost header 1\\\",\\n  \\\"text_4\\\": \\\" zh-Hans-CN outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"zh-Hans-CN simple text without id\\\",\\n  \\\"span_6\\\": \\\"zh-Hans-CN simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"zh-Hans-CN simple text with id\\\",\\n  \\\"label-2\\\": \\\"zh-Hans-CN simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"zh-Hans-CN simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"zh-Hans-CN simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"zh-Hans-CN great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" zh-Hans-CN simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"zh-Hans-CN simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" zh-Hans-CN simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"zh-Hans-CN simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"zh-Hans-CN great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" zh-Hans-CN simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"zh-Hans-CN simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"zh-Hans-CN simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"zh-Hans-CN great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"zh-Hans-CN great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"zh-Hans-CN line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"zh-Hans-CN line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"zh-Hans-CN line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"zh-Hans-CN line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"zh-Hans-CN line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"zh-Hans-CN line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"zh-Hans-CN A paragraph with {1} is converted to {2}.\\\",\\n    \\\"zh-Hans-CN parameters\\\",\\n    \\\"zh-Hans-CN <i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"zh-Hans-CN A paragraph with {1} is converted to {2}.\\\",\\n    \\\"zh-Hans-CN id\\\",\\n    \\\"zh-Hans-CN <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" zh-Hans-CN outermost text at the end \\\"\\n}\",\n  \"/template-default-lang/locales/template-default-lang-element.zh-Hans-CN.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" zh-Hans-CN outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"zh-Hans-CN outermost header 1\\\",\\n  \\\"text_4\\\": \\\" zh-Hans-CN outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"zh-Hans-CN simple text without id\\\",\\n  \\\"span_6\\\": \\\"zh-Hans-CN simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"zh-Hans-CN simple text with id\\\",\\n  \\\"label-2\\\": \\\"zh-Hans-CN simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"zh-Hans-CN simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"zh-Hans-CN simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"zh-Hans-CN great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" zh-Hans-CN simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"zh-Hans-CN simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" zh-Hans-CN simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"zh-Hans-CN simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"zh-Hans-CN great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" zh-Hans-CN simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"zh-Hans-CN simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"zh-Hans-CN simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"zh-Hans-CN great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"zh-Hans-CN great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"zh-Hans-CN line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"zh-Hans-CN line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"zh-Hans-CN line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"zh-Hans-CN line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"zh-Hans-CN line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"zh-Hans-CN line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"zh-Hans-CN A paragraph with {1} is converted to {2}.\\\",\\n    \\\"zh-Hans-CN parameters\\\",\\n    \\\"zh-Hans-CN <i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"zh-Hans-CN A paragraph with {1} is converted to {2}.\\\",\\n    \\\"zh-Hans-CN id\\\",\\n    \\\"zh-Hans-CN <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" zh-Hans-CN outermost text at the end \\\"\\n}\",\n  \"/template-default-lang/null-template-default-lang-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"outermost header 1\\\",\\n  \\\"text_4\\\": \\\" outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"simple text without id\\\",\\n  \\\"span_6\\\": \\\"simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"simple text with id\\\",\\n  \\\"label-2\\\": \\\"simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"parameters\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"A paragraph with {1} is converted to {2}.\\\",\\n    \\\"id\\\",\\n    \\\"<i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" outermost text at the end \\\"\\n}\",\n  \"/template-default-lang/template-default-lang-element.json\": \"{\\n  \\\"meta\\\": {},\\n  \\\"model\\\": {},\\n  \\\"text\\\": \\\" fr outermost text at the beginning \\\",\\n  \\\"h1_3\\\": \\\"fr outermost header 1\\\",\\n  \\\"text_4\\\": \\\" fr outermost text in the middle \\\",\\n  \\\"span_5\\\": \\\"fr simple text without id\\\",\\n  \\\"span_6\\\": \\\"fr simple text without id 2\\\",\\n  \\\"label-1\\\": \\\"fr simple text with id\\\",\\n  \\\"label-2\\\": \\\"fr simple text with id 2\\\",\\n  \\\"div_9:span\\\": \\\"fr simple text within div\\\",\\n  \\\"div_9:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"div_9:div_2:div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"div_10:text\\\": \\\" fr simple text as the first element in div \\\",\\n  \\\"div_10:span_1\\\": \\\"fr simple text within div\\\",\\n  \\\"div_10:text_2\\\": \\\" fr simple text in the middle of div \\\",\\n  \\\"div_10:span_3\\\": \\\"fr simple text within div 2\\\",\\n  \\\"div_10:div_4:div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"div_10:text_5\\\": \\\" fr simple text at the last element in div \\\",\\n  \\\"toplevel-div:span\\\": \\\"fr simple text within div\\\",\\n  \\\"toplevel-div:span_1\\\": \\\"fr simple text within div 2\\\",\\n  \\\"third-level-div\\\": \\\"fr great grandchild text within div\\\",\\n  \\\"second-level-div:div_1\\\": \\\"fr great grandchild text within div without id\\\",\\n  \\\"div_12:ul:li\\\": \\\"fr line item without id 1\\\",\\n  \\\"div_12:ul:li_1\\\": \\\"fr line item without id 2\\\",\\n  \\\"div_12:ul:li_2\\\": \\\"fr line item without id 3\\\",\\n  \\\"line-items:li\\\": \\\"fr line item with id 1\\\",\\n  \\\"line-items:li_1\\\": \\\"fr line item with id 2\\\",\\n  \\\"line-items:li_2\\\": \\\"fr line item with id 3\\\",\\n  \\\"p_13\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr parameters\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"paragraph\\\": [\\n    \\\"fr A paragraph with {1} is converted to {2}.\\\",\\n    \\\"fr id\\\",\\n    \\\"fr <i18n-format>\\\"\\n  ],\\n  \\\"text_15\\\": \\\" fr outermost text at the end \\\"\\n}\"\n};\n/*!\n * @license https://github.com/t2ym/i18n-behavior/blob/master/LICENSE.md\n * Copyright (c) 2016, Tetsuya Mori <t2y3141592@gmail.com>. All rights reserved.\n */\n\nif (!Number.isNaN) {\n  // polyfill Number.isNaN for IE11\n  Number.isNaN = function (value) {\n    return typeof value === 'number' && isNaN(value);\n  };\n}\n\n// Inheritance of test parameters\nvar p = Object.setPrototypeOf || function (target, base) { \n  var obj = Object.create(base);\n  for (var p in target) {\n    obj[p] = target[p];\n  }\n  return obj;\n};\nvar g = Object.getPrototypeOf;\nvar _name = 'suite';\nvar suiteMap = { null: {} };\nvar s = function (name, baseName, extension) {\n  if (suiteMap[name]) {\n    throw new Error('duplicate suite name ' + name);\n  }\n  if (!suiteMap[baseName]) {\n    throw new Error('inexistent base suite name ' + baseName);\n  }\n  extension[_name] = name;\n  extension = p(extension, suiteMap[baseName]);\n  suiteMap[name] = extension;\n  return extension;\n};\n\n// Utility functions\n\nfunction updateProperty (element, properties) {\n  for (var name in properties) {\n    var path = name.split(/[.]/);\n    if (path.length === 1) {\n      element[name] = properties[name];\n    }\n    else {\n      var cursor = element;\n      var p = path.shift();\n      while (p) {\n        if (path.length < 1) {\n          cursor[p] = properties[name];\n          element.notifyPath(name, properties[name], true);\n          break;\n        }\n        else if (p === 'PolymerDom') {\n          cursor = Polymer.dom(cursor);\n        }\n        else if (p === 'html') {\n          cursor = document.querySelector('html');\n        }\n        else {\n          cursor = cursor[p];\n        }\n        p = path.shift();\n      }\n    }\n  }\n}\n\nfunction getProperty (target, name) {\n  var path = name.split(/[.]/);\n  if (path.length === 1) {\n    return target[name];\n  }\n  else {\n    var cursor = target;\n    var p = path.shift();\n    while (p) {\n      //console.log(p, cursor);\n      if (path.length < 1) {\n        if (p === 'raw' ||\n            p === 'text') {\n          return cursor;\n        }\n        else if (p === 'trim') {\n          return cursor.trim();\n        }\n        if (p === 'data') {\n          cursor = cursor[p];\n          cursor = cursor.replace(/^[\\s]{1,}/g, ' ').replace(/[\\s]{1,}$/g, ' ');\n          return cursor;\n        }\n        else {\n          return cursor[p];\n        }\n      }\n      else if (p === 'PolymerDom') {\n        cursor = Polymer.dom(cursor);\n      }\n      else if (p === 'previousTextSibling') {\n        do {\n          cursor = cursor.previousSibling;\n        } while (cursor.nodeType === cursor.COMMENT_NODE ||\n                 (cursor.nodeType === cursor.TEXT_NODE && cursor.data.match(/^[\\s]*$/)));\n      }\n      else if (p === 'nextTextSibling') {\n        do {\n          cursor = cursor.nextSibling;\n        } while (cursor.nodeType === cursor.COMMENT_NODE ||\n                 (cursor.nodeType === cursor.TEXT_NODE && cursor.data.match(/^[\\s]*$/)));\n      }\n      else if (p === 'effectiveChildNodes') {\n        cursor = cursor.getEffectiveChildNodes();\n      }\n      else if (p === 'nonWS') {\n        cursor = Array.prototype.filter.call(cursor, function (item) {\n          return (item.nodeType !== item.TEXT_NODE &&\n                  item.nodeType !== item.COMMENT_NODE) ||\n                 (item.nodeType === item.TEXT_NODE &&\n                  !item.data.match(/^[\\s]*$/));\n        });\n      }\n      else {\n        cursor = cursor[p];\n      }\n      p = path.shift();\n    }\n  }\n}\n\nfunction deepMap (target, source, map) {\n  var value;\n  for (var prop in source) {\n    value = source[prop];\n    switch (typeof value) {\n    case 'string':\n    case 'number':\n    case 'boolean':\n      if (typeof target === 'object') {\n        target[prop] = map(value, prop);\n      }\n      break;\n    case 'object':\n      if (typeof target === 'object') {\n        if (Array.isArray(value)) {\n          target[prop] = target[prop] || [];\n          deepMap(target[prop], value, map);\n        }\n        else {\n          target[prop] = target[prop] || {};\n          deepMap(target[prop], value, map);\n        }\n      }\n      break;\n    case 'function':\n    case 'symbol':\n    case 'undefined':\n      if (typeof target === 'object') {\n        target[prop] = value;\n      }\n      break;\n    default:\n      if (typeof target === 'object') {\n        target[prop] = value;\n      }\n      break;\n    }\n  }\n  return target;\n}\n\nfunction translate (lang, path, text) {\n  var result;\n  switch (lang) {\n  case '':\n  case 'en':\n  case null:\n  case undefined:\n    result = text;\n    break;\n  default:\n    if (!path || path.match(/(textContent|[.]data|[.]text|[.]trim)$/)) {\n      result = {};\n      deepMap(result, { text: text }, function (value, prop) {\n        if (typeof value === 'string' &&\n            !value.match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/) &&\n            !value.match(/^[0-9]{1,}$/) &&\n            prop !== 'type') {\n          if (path && path.match(/[.]trim$/)) {\n            return minifyText((lang + ' ' + value).trim());\n          }\n          else {\n            if (value.match(/^ /)) {\n              return minifyText(' ' + lang + ' ' + value);\n            }\n            else {\n              return minifyText(lang + ' ' + value);\n            }\n          }\n        }\n        return minifyText(value);\n      });\n      result = result.text;\n    }\n    else {\n      result = text;\n    }\n  }\n  //console.log('translate (' + lang + ', ' + path + ', ' + JSON.stringify(text, null, 2) + ') = ' + JSON.stringify(result, null, 2));\n  return result;\n}\n\nfunction minifyText (text) {\n  if (text && typeof text === 'string') {\n    text = text.replace(/[\\s]{1,}/g, ' ');\n  }\n  return text;\n}\n\nvar isFakeServer = typeof window === 'object' &&\n  typeof window.location.href === 'string' &&\n  window.location.href.indexOf('xhr=fake') > 0 &&\n  typeof window.fakeServerContents === 'object';\n\nvar isSuppressingSuiteParams = typeof window === 'object' &&\n  typeof window.location.href === 'string' &&\n  window.location.href.indexOf('suppress=true') > 0;\n\nvar syntax = 'mixin';\n(function () {\n  var href = typeof window === 'object' && typeof window.location.href === 'string'\n    ? window.location.href : ''\n  if (href) {\n    [ 'mixin', 'base-element', 'thin', 'legacy', 'modified-legacy' ].forEach(function (_syntax) {\n      if (href.indexOf('syntax=' + _syntax) > 0) {\n        syntax = _syntax;\n      }\n    });\n  }\n})();\n\nfunction setupFakeServer (e) {\n  if (isFakeServer) {\n    e.server = sinon.fakeServer.create();\n    e.server.autoRespond = true;\n    //e.server.autoRespondAfter = 100;\n    e.server.respondImmediately = true;\n    e.server.respondWith(/\\/test\\/[-\\w]+(\\/.*[.]json)$/, function (xhr, urlPath) {\n      if (fakeServerContents.hasOwnProperty(urlPath)) {\n        //console.log('fake-server: 200 ' + urlPath);\n        xhr.respond(200, { 'Content-Type': 'application/json' }, fakeServerContents[urlPath])\n      }\n      else {\n        //console.log('fake-server: 404 ' + urlPath);\n        xhr.respond(404, {}, '');\n      }\n    });\n  }\n}\n\nfunction teardownFakeServer (e) {\n  if (isFakeServer) {\n    e.server.restore();\n  }\n}\n\nfunction setupFixture (params, fixtureModel) {\n  var fixtureName = params.fixture;\n  var e = document.querySelector('#' + fixtureName);\n  var runningTest = document.querySelectorAll('.running-test');\n  var title = document.querySelector('#test-name');\n  var currentPath = window.location.pathname.split('/');\n  if (!e) {\n    throw new Error('Fixture element with id = ' + fixtureName + ' not found');\n  }\n  if (title) {\n    title.textContent =\n      (currentPath.length >= 2 ? currentPath[currentPath.length - 2] : '') +\n      (currentPath.length >= 1 ? '/' + currentPath[currentPath.length - 1].replace(/-test[.]html$/, '') + '/': '') +\n      params.suite;\n  }\n  //console.log('setupFixture: suite = ' + params.suite);\n  if (e.is === 'i18n-dom-bind') {\n    e.parentElement.classList.add('running-test');\n    Array.prototype.forEach.call(runningTest, function (node) {\n      if (node !== e.parentElement) {\n        node.classList.remove('running-test');\n      }\n    });\n    return new Promise(function (resolve, reject) {\n      e.addEventListener('dom-change', function setupFixtureDomChange (ev) {\n        if (Polymer.dom(ev).rootTarget === e) {\n          //console.log('setupFixture dom-change');\n          e.removeEventListener('dom-change', setupFixtureDomChange);\n          try {\n            if (fixtureModel &&\n                typeof fixtureModel.lang === 'string' &&\n                fixtureModel.lang !== 'en') {\n              //console.log('setupFixture: waiting for lang-updated');\n              e.addEventListener('lang-updated', function setupFixtureLangDomChange (event) {\n                //console.log('setupFixtureLangDomChange');\n                if (event.target === e &&\n                    e.effectiveLang === fixtureModel.lang) {\n                  //console.log('setupFixtureLangDomChange lang = ' + event.detail.lang + ' effectiveLang = ' + e.effectiveLang);\n                  e.removeEventListener('lang-updated', setupFixtureLangDomChange);\n                  e.render();\n                  resolve(e);\n                }\n              });\n              for (var p in fixtureModel) {\n                e[p] = fixtureModel[p];\n              }\n              e.params = params;\n            }\n            else {\n              for (var p in fixtureModel) {\n                e[p] = fixtureModel[p];\n              }\n              e.params = params;\n              //console.log('setupFixture: resolving');\n              e.render();\n              resolve(e);\n            }\n          }\n          catch (ex) {\n            reject(ex);\n          }\n        }\n      });\n      if (e._children) {\n        e.render();\n      }\n    });\n  }\n  else {\n    e.classList.add('running-test');\n    Array.prototype.forEach.call(runningTest, function (node) {\n      if (node !== e) {\n        node.classList.remove('running-test');\n      }\n    });\n    setupFakeServer(e);\n    return new Promise(function (resolve, reject) {\n      //console.log('setupFixture: name = ' + fixtureName + ' model = ' + JSON.stringify(fixtureModel, null, 2));\n      if (fixtureModel) {\n        var f = document.querySelector('test-fixture[id=' + fixtureName + ']');\n        var t = f.querySelector('template[is=dom-template]');\n        if (t) {\n          var instanceProps = {};\n          var p;\n          for (p in fixtureModel) {\n            instanceProps[p] = true;\n          }\n          var self = t;\n          t.__templatizeOwner = undefined;\n          t._ctor = Polymer.Templatize.templatize(t, self, {\n            instanceProps: instanceProps,\n            forwardHostProp: function(prop, value) {\n              if (self._instance) {\n                self._instance.forwardHostProp(prop, value);\n              }\n            }\n          });\n          t.stamp = function (model) {\n            var _instance = new this._ctor(model);\n            return _instance.root;\n          }.bind(t);\n        }\n      }\n      var element = fixture(fixtureName, fixtureModel);\n      //console.log('setupFixture: name = ' + fixtureName +\n      //            ' element.lang = ' + element.lang +\n      //            ' getAttribute(\"lang\") = ' + element.getAttribute('lang') +\n      //            ' element._lang = ' + element._lang);\n      if (element) {\n        if (fixtureModel &&\n            typeof fixtureModel.lang === 'string' &&\n            fixtureModel.lang !== 'en' &&\n            fixtureModel.lang !== element.effectiveLang && element.effectiveLang !== 'en') {\n          //console.log('setupFixture: waiting for lang-updated');\n          element.addEventListener('lang-updated', function setupFixtureLangUpdated (event) {\n            //console.log('setupFixtureLangUpdated');\n            if (event.target === element &&\n                element.effectiveLang === fixtureModel.lang) {\n              //console.log('setupFixtureLangUpdated lang = ' + event.detail.lang + ' effectiveLang = ' + element.effectiveLang);\n              element.removeEventListener('lang-updated', setupFixtureLangUpdated);\n              resolve(element);\n            }\n          });\n        }\n        else {\n          //console.log('setupFixture: element ready without lang-updated');\n          setTimeout(function () {\n            if (params.lang === '' || params.lang === 'en') {\n              element.fire('lang-updated');\n            }\n          }, 500);\n          resolve(element);\n        }\n      }\n      else {\n        reject(new Error('setupFixture returns null for ' +\n                          fixtureName + ' ' + JSON.stringify(fixtureModel,null,2)));\n      }\n    });\n  }\n}\n\nfunction restoreFixture (fixtureName) {\n  var e = document.querySelector('#' + fixtureName);\n  if (!e) {\n    throw new Error('Fixture element with id = ' + fixtureName + ' not found');\n  }\n  if (e.is === 'i18n-dom-bind') {\n    if (e._intervalId) {\n      clearInterval(e._intervalId);\n    }\n    Array.prototype.forEach.call(document.querySelectorAll('i18n-dom-bind'),\n      function (node) {\n        node.observeHtmlLang = true;\n      }\n    );\n  }\n  else {\n    teardownFakeServer(e);\n    e.restore();\n  }\n}\n\nfunction getLocalDomRoot (e) {\n  if (e.is === 'i18n-dom-bind') {\n    return e.parentElement;\n  }\n  else if (e) {\n    return e.root;\n  }\n  else {\n    return null;\n  }\n}\n\nfunction suitesRunner (suites) {\n\n  suites.forEach(function (params) {\n\n    suite(params.suite, function () {\n      var el;\n      var p;\n      var n;\n      var i, j;\n      var expected;\n      var results;\n      var node;\n      var rawValue = params.rawValue;\n      var fixtureElement;\n      var noProperties;\n      var lang = params.assign && params.assign.lang ? params.assign.lang : 'en';\n      var event = params.event ? params.event : 'lang-updated';\n      var defTimeout = 300000;\n      var timeout = params.timeout ? (params.timeout < defTimeout ? defTimeout : params.timeout) : defTimeout;\n      this.timeout(timeout);\n\n      (params.setup ? setup : suiteSetup)(function () {\n        return setupFixture(params, params.fixtureModel)\n          .then(function (element) {\n            el = element;\n            //console.log('setup: element.lang = ' + element.lang);\n            return new Promise(function (resolve, reject) {\n              //console.log(params.suite, 'waiting for ' + event);\n              if (params &&\n                  (params.event ||\n                  params.assign && (params.assign.lang || params.assign['html.lang']))) {\n                el.addEventListener(event, function fixtureSetup (e) {\n                  if (el === Polymer.dom(e).rootTarget &&\n                      el.lang === params.lang &&\n                      el.effectiveLang === params.effectiveLang) {\n                    el.removeEventListener(event, fixtureSetup);\n                    //console.log('setup: updateProperty resolving on ' + event);\n                    resolve(el);\n                  }\n                  else {\n                    console.log(params.suite + ' skipping uninteresting event ' + event +\n                      ' \"' + el.lang + '\" \"' + params.lang + '\" \"' + el.effectiveLang + '\" \"' + params.effectiveLang + '\"');\n                  }\n                });\n                //console.log('setup: updateProperty ' + JSON.stringify(params.assign, null, 2));\n                updateProperty(el, params.assign);\n              }\n              else {\n                //console.log('setup: updateProperty ' + JSON.stringify(params.assign, null, 2));\n                //console.log('setup: updateProperty resolving without ' + event);\n                updateProperty(el, params.assign);\n                resolve(el);\n              }\n            });\n          }, function (error) {\n            throw new Error(error);\n          });\n      });\n\n      test('{lang, effectiveLang, templateDefaultLang, observeHtmlLang' +\n            (params.text ? ', text' : '') +\n            (params.model ? ', model' : '') +\n            (params.localDOM ? ', local DOM' : '') +\n            '} properties are set as {' + \n            (isSuppressingSuiteParams ? '' :\n            [ params.lang, params.effectiveLang, params.templateDefaultLang, params.observeHtmlLang].join(', ') +\n            (params.text ? ', ' + JSON.stringify(params.text, null, 2) : '') +\n            (params.model ? ', ' + JSON.stringify(params.model, null, 2) : '') +\n            (!params.setup && params.localDOM ? ', ' + JSON.stringify(params.localDOM, null, 2) : '')) +\n            '}' +\n            (params.assign && params.assign.lang ? ' for ' + params.assign.lang : ''), function () {\n        assert.isString(el.lang, 'lang property is a string');\n        assert.equal(el.lang, params.lang, 'lang property is set');\n        assert.isString(el.effectiveLang, 'effectiveLang property is a string');\n        assert.equal(el.effectiveLang, params.effectiveLang, 'effectiveLang property is set');\n        assert.isString(el.templateDefaultLang, 'templateDefaultLang property is a string');\n        assert.equal(el.templateDefaultLang, params.templateDefaultLang, 'templateDefaultLang property is set');\n        assert.isBoolean(el.observeHtmlLang, 'observeHtmlLang property is a Boolean');\n        assert.equal(el.observeHtmlLang, params.observeHtmlLang, 'observeHtmlLang property is set');\n        if (params.text) {\n          var actual;\n          expected = deepMap(deepcopy(params.text), params.text, minifyText);\n          actual = deepMap(deepcopy(el.text), el.text, minifyText);\n          noProperties = true;\n          assert.isObject(el.text, 'text property is an object');\n          //console.log(JSON.stringify(e.detail, null, 2));\n          //console.log(JSON.stringify(el.text, null, 2));\n          for (p in expected) {\n            if (p === 'meta') {\n              continue;\n            }\n            noProperties = false;\n            assert.deepEqual(actual[p],\n              params.rawText ? expected[p] : translate(params.effectiveLang, null, expected[p]),\n              'text.' + p + ' property is set for ' + params.effectiveLang);\n          }\n          if (noProperties) {\n            assert.deepEqual(deepMap(deepcopy(el.text), el.text, minifyText),\n              expected,\n              'text property is set');\n          }\n        }\n        if (params.model) {\n          noProperties = true;\n          assert.isObject(el.model, 'model property is an object');\n          for (p in expected) {\n            noProperties = false;\n            //console.log('model.' + p + ' = ' + JSON.stringify(el.model[p]));\n            //console.log('expected model.' + p + ' = ' + JSON.stringify(translate(el.effectiveLang, null, params.model[p])));\n            assert.deepEqual(minifyText(el.model[p]),\n              params.rawText ? params.model[p] : translate(params.effectiveLang, null, params.model[p]),\n              'model.' + p + ' property is set for ' + params.effectiveLang);\n          }\n          if (noProperties) {\n            assert.deepEqual(el.model, params.model, 'model property is set');\n          }\n        }\n        if (!params.setup && params.localDOM) {\n          params.localDOM.forEach(function (childPath) {\n            var completeStatus;\n            var nodes = Polymer.dom(getLocalDomRoot(el)).querySelectorAll(childPath.select);\n            assert.ok(nodes.length > 0, childPath.select + ' is defined');\n            for (var p in childPath) {\n              if (p === 'select') {\n                continue;\n              }\n              //console.log(p + ' is set as ' + childPath[p]);\n              if (Array.isArray(childPath[p])) {\n                //console.log(nodes);\n                Array.prototype.forEach.call(childPath[p], function (path, i, a) {\n                  assert.equal(minifyText(getProperty(nodes[i], p)),\n                    minifyText(params.rawText ? path : translate(params.effectiveLang, p, path)),\n                    p + ' is set as ' + minifyText(params.rawText ? path : translate(params.effectiveLang, p, path)));\n                });\n              }\n              else {\n                //console.log(nodes[0]);\n                assert.equal(minifyText(getProperty(nodes[0], p)),\n                  minifyText(params.rawText ? childPath[p] : translate(params.effectiveLang, p, childPath[p])),\n                  p + ' is set as ' + translate(params.rawText ? childPath[p] : params.effectiveLang, p, childPath[p]));\n              }\n            }\n            //console.log(childPath);\n          });\n        }\n      });\n\n/*\n      if (params.text) {\n        test('text' + ' property is set as ' + JSON.stringify(params.text,null,2) + \n          (params.assign && params.assign.lang ? ' for ' + params.assign.lang : ''), function () {\n          expected = deepMap(deepcopy(params.text), params.text, minifyText);\n          noProperties = true;\n          assert.isObject(el.text, 'text property is an object');\n          //console.log(JSON.stringify(e.detail, null, 2));\n          //console.log(JSON.stringify(el.text, null, 2));\n          for (p in expected) {\n            noProperties = false;\n            assert.deepEqual(deepMap(deepcopy(el.text[p]), el.text[p], minifyText),\n              params.rawText ? expected[p] : translate(params.effectiveLang, null, expected[p]),\n              'text.' + p + ' property is set for ' + params.effectiveLang);\n          }\n          if (noProperties) {\n            assert.deepEqual(deepMap(deepcopy(el.text), el.text, minifyText),\n              expected,\n              'text property is set');\n          }\n        });\n      }\n\n      if (params.model) {\n        test('model' + ' property is set as ' + JSON.stringify(params.model,null,2) + \n          (params.assign && params.assign.lang ? ' for ' + params.assign.lang : ''), function () {\n          noProperties = true;\n          assert.isObject(el.model, 'model property is an object');\n          for (p in params.model) {\n            noProperties = false;\n            //console.log('model.' + p + ' = ' + JSON.stringify(el.model[p]));\n            //console.log('expected model.' + p + ' = ' + JSON.stringify(translate(el.effectiveLang, null, params.model[p])));\n            assert.deepEqual(el.model[p],\n              params.rawText ? params.model[p] : translate(params.effectiveLang, null, params.model[p]),\n              'model.' + p + ' property is set for ' + params.effectiveLang);\n          }\n          if (noProperties) {\n            assert.deepEqual(el.model, params.model, 'model property is set');\n          }\n        });\n      }\n*/\n\n      if (params.setup && params.localDOM) {\n        test('local DOM ' + (isSuppressingSuiteParams ? '{}' : JSON.stringify(params.localDOM, null, 2)) + ' is set' + \n              (params.assign && params.assign.lang ? ' for ' + params.assign.lang : ''), function () {\n          params.localDOM.forEach(function (childPath) {\n            var completeStatus;\n            var nodes = Polymer.dom(getLocalDomRoot(el)).querySelectorAll(childPath.select);\n            assert.ok(nodes.length > 0, childPath.select + ' is defined');\n            for (var p in childPath) {\n              if (p === 'select') {\n                continue;\n              }\n              //console.log(p + ' is set as ' + childPath[p]);\n              if (Array.isArray(childPath[p])) {\n                //console.log(nodes);\n                Array.prototype.forEach.call(childPath[p], function (path, i, a) {\n                  assert.equal(minifyText(getProperty(nodes[i], p)),\n                    minifyText(params.rawText ? path : translate(params.effectiveLang, p, path)),\n                    p + ' is set as ' + minifyText(params.rawText ? path : translate(params.effectiveLang, p, path)));\n                });\n              }\n              else {\n                //console.log(nodes[0]);\n                assert.equal(minifyText(getProperty(nodes[0], p)),\n                  minifyText(params.rawText ? childPath[p] : translate(params.effectiveLang, p, childPath[p])),\n                  p + ' is set as ' + translate(params.rawText ? childPath[p] : params.effectiveLang, p, childPath[p]));\n              }\n            }\n            //console.log(childPath);\n          });\n        });\n      }\n\n      if (params.lightDOM) {\n        test('light DOM ' + (isSuppressingSuiteParams ? '{}' : JSON.stringify(params.lightDOM, null, 2)) + ' is set' + \n              (params.assign && params.assign.lang ? ' for ' + params.assign.lang : ''), function () {\n          params.lightDOM.forEach(function (childPath) {\n            var completeStatus;\n            var nodes = Polymer.dom(el).querySelectorAll(childPath.select);\n            assert.ok(nodes.length > 0, childPath.select + ' is defined');\n            for (var p in childPath) {\n              if (p === 'select') {\n                continue;\n              }\n              //console.log(p + ' is set as ' + childPath[p]);\n              if (Array.isArray(childPath[p])) {\n                //console.log(nodes);\n                Array.prototype.forEach.call(childPath[p], function (path, i, a) {\n                  assert.equal(getProperty(nodes[i], p), translate(params.effectiveLang, p, path), p + ' is set as ' + translate(params.effectiveLang, p, path));\n                });\n              }\n              else {\n                //console.log(nodes[0]);\n                assert.equal(getProperty(nodes[0], p), translate(params.effectiveLang, p, childPath[p]), p + ' is set as ' + translate(params.effectiveLang, p, childPath[p]));\n              }\n            }\n            //console.log(childPath);\n          });\n        });\n      }\n\n      (params.setup ? teardown : suiteTeardown)(function () {\n        restoreFixture(params.fixture);\n      });\n    });\n  });\n};\n(function(){\n/*\n\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n'use strict';var l={};function m(){this.end=this.start=0;this.rules=this.parent=this.previous=null;this.cssText=this.parsedCssText=\"\";this.atRule=!1;this.type=0;this.parsedSelector=this.selector=this.keyframesName=\"\"}\nfunction p(a){a=a.replace(aa,\"\").replace(ba,\"\");var c=q,b=a,d=new m;d.start=0;d.end=b.length;for(var e=d,f=0,h=b.length;f<h;f++)if(\"{\"===b[f]){e.rules||(e.rules=[]);var g=e,k=g.rules[g.rules.length-1]||null,e=new m;e.start=f+1;e.parent=g;e.previous=k;g.rules.push(e)}else\"}\"===b[f]&&(e.end=f+1,e=e.parent||d);return c(d,a)}\nfunction q(a,c){var b=c.substring(a.start,a.end-1);a.parsedCssText=a.cssText=b.trim();a.parent&&((b=c.substring(a.previous?a.previous.end:a.parent.start,a.start-1),b=ca(b),b=b.replace(r,\" \"),b=b.substring(b.lastIndexOf(\";\")+1),b=a.parsedSelector=a.selector=b.trim(),a.atRule=!b.indexOf(\"@\"),a.atRule)?b.indexOf(\"@media\")?b.match(da)&&(a.type=u,a.keyframesName=a.selector.split(r).pop()):a.type=t:a.type=b.indexOf(\"--\")?v:y);if(b=a.rules)for(var d=0,e=b.length,f;d<e&&(f=b[d]);d++)q(f,c);return a}\nfunction ca(a){return a.replace(/\\\\([0-9a-f]{1,6})\\s/gi,function(a,b){a=b;for(b=6-a.length;b--;)a=\"0\"+a;return\"\\\\\"+a})}\nfunction z(a,c,b){b=void 0===b?\"\":b;var d=\"\";if(a.cssText||a.rules){var e=a.rules,f;if(f=e)f=e[0],f=!(f&&f.selector&&0===f.selector.indexOf(\"--\"));if(f){f=0;for(var h=e.length,g;f<h&&(g=e[f]);f++)d=z(g,c,d)}else c?c=a.cssText:(c=a.cssText,c=c.replace(ea,\"\").replace(fa,\"\"),c=c.replace(ga,\"\").replace(ha,\"\")),(d=c.trim())&&(d=\"  \"+d+\"\\n\")}d&&(a.selector&&(b+=a.selector+\" {\\n\"),b+=d,a.selector&&(b+=\"}\\n\\n\"));return b}\nvar v=1,u=7,t=4,y=1E3,aa=/\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//gim,ba=/@import[^;]*;/gim,ea=/(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\\n]|$)/gim,fa=/(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\\n]|$)?/gim,ga=/@apply\\s*\\(?[^);]*\\)?\\s*(?:[;\\n]|$)?/gim,ha=/[^;:]*?:[^;]*?var\\([^;]*\\)(?:[;\\n]|$)?/gim,da=/^@[^\\s]*keyframes/,r=/\\s+/g;var ia=Promise.resolve();function ja(a){(a=l[a])&&(a._applyShimInvalid=!0)}function ka(a){a.a||(a.a=!0,ia.then(function(){a._applyShimInvalid=!1;a.a=!1}))};var A=/(?:^|[;\\s{]\\s*)(--[\\w-]*?)\\s*:\\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\\s}])|$)/gi,B=/(?:^|\\W+)@apply\\s*\\(?([^);\\n]*)\\)?/gi,la=/@media[^(]*(\\([^)]*\\))/;var C=!(window.ShadyDOM&&window.ShadyDOM.inUse),D=!navigator.userAgent.match(\"AppleWebKit/601\")&&window.CSS&&CSS.supports&&CSS.supports(\"box-shadow\",\"0 0 0 var(--foo)\");function E(a){a&&(D=D&&!a.nativeCss&&!a.shimcssproperties,C=C&&!a.nativeShadow&&!a.shimshadow)}window.ShadyCSS?E(window.ShadyCSS):window.WebComponents&&E(window.WebComponents.flags);var ma=C,F=D;function G(a){if(!a)return\"\";\"string\"===typeof a&&(a=p(a));return z(a,F)}function H(a){!a.__cssRules&&a.textContent&&(a.__cssRules=p(a.textContent));return a.__cssRules||null}function I(a,c,b,d){if(a){var e=!1,f=a.type;if(d&&f===t){var h=a.selector.match(la);h&&(window.matchMedia(h[1]).matches||(e=!0))}f===v?c(a):b&&f===u?b(a):f===y&&(e=!0);if((a=a.rules)&&!e)for(var e=0,f=a.length,g;e<f&&(g=a[e]);e++)I(g,c,b,d)}}\nfunction J(a,c){var b=a.indexOf(\"var(\");if(-1===b)return c(a,\"\",\"\",\"\");var d;a:{var e=0;d=b+3;for(var f=a.length;d<f;d++)if(\"(\"===a[d])e++;else if(\")\"===a[d]&&!--e)break a;d=-1}e=a.substring(b+4,d);b=a.substring(0,b);a=J(a.substring(d+1),c);d=e.indexOf(\",\");return-1===d?c(b,e.trim(),\"\",a):c(b,e.substring(0,d).trim(),e.substring(d+1).trim(),a)};var na=/;\\s*/m,oa=/^\\s*(initial)|(inherit)\\s*$/;function K(){this.a={}}K.prototype.set=function(a,c){a=a.trim();this.a[a]={h:c,i:{}}};K.prototype.get=function(a){a=a.trim();return this.a[a]||null};var L=null;function M(){this.b=this.c=null;this.a=new K}M.prototype.o=function(a){a=B.test(a)||A.test(a);B.lastIndex=0;A.lastIndex=0;return a};M.prototype.m=function(a,c){a=a.content.querySelector(\"style\");var b=null;a&&(b=this.j(a,c));return b};\nM.prototype.j=function(a,c){c=void 0===c?\"\":c;var b=H(a);this.l(b,c);a.textContent=G(b);return b};M.prototype.f=function(a){var c=this,b=H(a);I(b,function(a){\":root\"===a.selector&&(a.selector=\"html\");c.g(a)});a.textContent=G(b);return b};M.prototype.l=function(a,c){var b=this;this.c=c;I(a,function(a){b.g(a)});this.c=null};M.prototype.g=function(a){a.cssText=pa(this,a.parsedCssText);\":root\"===a.selector&&(a.selector=\":host > *\")};\nfunction pa(a,c){c=c.replace(A,function(c,d,e,f){return qa(a,c,d,e,f)});return N(a,c)}function N(a,c){for(var b;b=B.exec(c);){var d=b[0],e=b[1];b=b.index;var f=c.slice(0,b+d.indexOf(\"@apply\"));c=c.slice(b+d.length);var h=O(a,f),g,k,d=void 0;g=a;var e=e.replace(na,\"\"),n=[];k=g.a.get(e);k||(g.a.set(e,{}),k=g.a.get(e));if(k)for(d in g.c&&(k.i[g.c]=!0),k.h)g=h&&h[d],k=[d,\": var(\",e,\"_-_\",d],g&&k.push(\",\",g),k.push(\")\"),n.push(k.join(\"\"));d=n.join(\"; \");c=\"\"+f+d+c;B.lastIndex=b+d.length}return c}\nfunction O(a,c){c=c.split(\";\");for(var b,d,e={},f=0,h;f<c.length;f++)if(b=c[f])if(h=b.split(\":\"),1<h.length){b=h[0].trim();var g=a;d=b;h=h.slice(1).join(\":\");var k=oa.exec(h);k&&(k[1]?(g.b||(g.b=document.createElement(\"meta\"),g.b.setAttribute(\"apply-shim-measure\",\"\"),g.b.style.all=\"initial\",document.head.appendChild(g.b)),d=window.getComputedStyle(g.b).getPropertyValue(d)):d=\"apply-shim-inherit\",h=d);d=h;e[b]=d}return e}function ra(a,c){if(L)for(var b in c.i)b!==a.c&&L(b)}\nfunction qa(a,c,b,d,e){d&&J(d,function(c,b){b&&a.a.get(b)&&(e=\"@apply \"+b+\";\")});if(!e)return c;var f=N(a,e),h=c.slice(0,c.indexOf(\"--\")),g=f=O(a,f),k=a.a.get(b),n=k&&k.h;n?g=Object.assign(Object.create(n),f):a.a.set(b,g);var W=[],w,x,X=!1;for(w in g)x=f[w],void 0===x&&(x=\"initial\"),!n||w in n||(X=!0),W.push(\"\"+b+\"_-_\"+w+\": \"+x);X&&ra(a,k);k&&(k.h=g);d&&(h=c+\";\"+h);return\"\"+h+W.join(\"; \")+\";\"}M.prototype.detectMixin=M.prototype.o;M.prototype.transformStyle=M.prototype.j;\nM.prototype.transformCustomStyle=M.prototype.f;M.prototype.transformRules=M.prototype.l;M.prototype.transformRule=M.prototype.g;M.prototype.transformTemplate=M.prototype.m;M.prototype._separator=\"_-_\";Object.defineProperty(M.prototype,\"invalidCallback\",{get:function(){return L},set:function(a){L=a}});var P=null,Q=window.HTMLImports&&window.HTMLImports.whenReady||null,R;function sa(a){Q?Q(a):(P||(P=new Promise(function(a){R=a}),\"complete\"===document.readyState?R():document.addEventListener(\"readystatechange\",function(){\"complete\"===document.readyState&&R()})),P.then(function(){a&&a()}))};var S=new M;function T(){var a=this;this.a=null;this.b=!1;sa(function(){U(a)});S.invalidCallback=ja}function U(a){a.b||(a.a=window.ShadyCSS.CustomStyleInterface,a.a&&(a.a.transformCallback=function(a){S.f(a)},a.a.validateCallback=function(){requestAnimationFrame(function(){a.a.enqueued&&V(a)})}),a.b=!0)}T.prototype.prepareTemplate=function(a,c){U(this);l[c]=a;c=S.m(a,c);a._styleAst=c};\nfunction V(a){U(a);if(a.a){for(var c=a.a.processStyles(),b=0;b<c.length;b++){var d=a.a.getStyleForCustomStyle(c[b]);d&&S.f(d)}a.a.enqueued=!1}}T.prototype.styleSubtree=function(a,c){U(this);if(c)for(var b in c)null===b?a.style.removeProperty(b):a.style.setProperty(b,c[b]);if(a.shadowRoot)for(this.styleElement(a),a=a.shadowRoot.children||a.shadowRoot.childNodes,c=0;c<a.length;c++)this.styleSubtree(a[c]);else for(a=a.children||a.childNodes,c=0;c<a.length;c++)this.styleSubtree(a[c])};\nT.prototype.styleElement=function(a){U(this);var c=a.localName,b;c?-1<c.indexOf(\"-\")?b=c:b=a.getAttribute&&a.getAttribute(\"is\")||\"\":b=a.is;(c=l[b])&&c._applyShimInvalid&&(c.a||(this.prepareTemplate(c,b),ka(c)),a=a.shadowRoot)&&(a=a.querySelector(\"style\"))&&(a.__cssRules=c._styleAst,a.textContent=G(c._styleAst))};T.prototype.styleDocument=function(a){U(this);this.styleSubtree(document.body,a)};\nif(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){var Y=new T,Z=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate:function(a,c){V(Y);Y.prepareTemplate(a,c)},styleSubtree:function(a,c){V(Y);Y.styleSubtree(a,c)},styleElement:function(a){V(Y);Y.styleElement(a)},styleDocument:function(a){V(Y);Y.styleDocument(a)},getComputedStyleValue:function(a,c){return(a=window.getComputedStyle(a).getPropertyValue(c))?a.trim():\"\"},nativeCss:F,nativeShadow:ma};Z&&(window.ShadyCSS.CustomStyleInterface=\nZ)}window.ShadyCSS.ApplyShim=S;\n}).call(self)\n\n//# sourceMappingURL=apply-shim.min.js.map\nwindow.Polymer = function(info) {\n    return window.Polymer._polymerFn(info);\n  }\n  // To be plugged by legacy implementation if loaded\n  window.Polymer._polymerFn = function() {\n    throw new Error('Load polymer.html to use the Polymer() function.');\n  }\n  window.Polymer.version = '2.0-preview';\n\n  /* eslint-disable no-unused-vars */\n  /*\n  When using Closure Compiler, goog.reflect.objectProperty(property, object) is replaced by the munged name for object[property]\n  We cannot alias this function, so we have to use a small shim that has the same behavior when not compiling.\n  */\n  var goog = {\n    reflect: {\n      objectProperty(s, o) {\n        return s;\n      }\n    }\n  }\n  /* eslint-enable */\n(function() {\n\n  'use strict';\n\n  // unique global id for deduping mixins.\n  let dedupeId = 0;\n\n  /**\n   * Given a mixin producing function, memoize applications of mixin to base\n   * @private\n   */\n  function cachingMixin(mixin) {\n    return function(base) {\n      if (!mixin.__mixinApplications) {\n        mixin.__mixinApplications = new WeakMap();\n      }\n      let map = mixin.__mixinApplications;\n      let application = map.get(base);\n      if (!application) {\n        application = mixin(base);\n        map.set(base, application);\n      }\n      return application;\n    };\n  }\n\n  /**\n   * Copies props from a source object to a target object.\n   *\n   * Note, this method uses a simple `for...in` strategy for enumerating\n   * properties.  To ensure only `ownProperties` are copied from source\n   * to target and that accessor implementations are copied, use `extend`.\n   *\n   * @method mixin\n   * @param {Object} target Target object to copy properties to.\n   * @param {Object} source Source object to copy properties from.\n   * @return {Object} Target object that was passed as first argument.\n   */\n  Polymer.mixin = function(target, source) {\n    for (let i in source) {\n      target[i] = source[i];\n    }\n    return target;\n  };\n\n  /**\n   * Given a mixin producing function, only apply mixin if has not already been applied to base\n   * Also memoize mixin applications\n   */\n  Polymer.dedupingMixin = function(mixin) {\n    mixin = cachingMixin(mixin);\n    // maintain a unique id for each mixin\n    if (!mixin.__id) {\n      mixin.__dedupeId = ++dedupeId;\n    }\n    return function(base) {\n      let baseSet = base.__mixinSet;\n      if (baseSet && baseSet[mixin.__dedupeId]) {\n        return base;\n      }\n      let extended = mixin(base);\n      // copy inherited mixin set from the extended class, or the base class\n      // NOTE: we avoid use of Set here because some browser (IE11)\n      // cannot extend a base Set via the constructor.\n      extended.__mixinSet =\n        Object.create(extended.__mixinSet || baseSet || null);\n      extended.__mixinSet[mixin.__dedupeId] = true;\n      return extended;\n    }\n  };\n\n})();\n(function() {\n\n  const CaseMap = {\n\n    _caseMap: {},\n    _rx: {\n      dashToCamel: /-[a-z]/g,\n      camelToDash: /([A-Z])/g\n    },\n\n    dashToCamelCase: function(dash) {\n      return this._caseMap[dash] || (\n        this._caseMap[dash] = dash.indexOf('-') < 0 ? dash : dash.replace(this._rx.dashToCamel,\n          function(m) {\n            return m[1].toUpperCase();\n          }\n        )\n      );\n    },\n\n    camelToDashCase: function(camel) {\n      return this._caseMap[camel] || (\n        this._caseMap[camel] = camel.replace(this._rx.camelToDash, '-$1').toLowerCase()\n      );\n    }\n\n  };\n\n  Polymer.CaseMap = CaseMap;\n})();\n(function() {\n\n    // path fixup for urls in cssText that's expected to\n    // come from a given ownerDocument\n    function resolveCss(cssText, ownerDocument) {\n      return cssText.replace(CSS_URL_RX, function(m, pre, url, post) {\n        return pre + '\\'' +\n          resolve(url.replace(/[\"']/g, ''), ownerDocument) +\n          '\\'' + post;\n      });\n    }\n\n    // url fixup for urls in an element's attributes made relative to\n    // ownerDoc's base url\n    function resolveAttrs(element, ownerDocument) {\n      for (var name in URL_ATTRS) {\n        var a$ = URL_ATTRS[name];\n        for (var i=0, l=a$.length, a, at, v; (i<l) && (a=a$[i]); i++) {\n          if (name === '*' || element.localName === name) {\n            at = element.attributes[a];\n            v = at && at.value;\n            if (v && (v.search(BINDING_RX) < 0)) {\n              at.value = (a === 'style') ?\n                resolveCss(v, ownerDocument) :\n                resolve(v, ownerDocument);\n            }\n          }\n        }\n      }\n    }\n\n    function resolve(url, ownerDocument) {\n      // do not resolve '#' links, they are used for routing\n      if (url && ABS_URL.test(url)) {\n        return url;\n      }\n      var resolver = getUrlResolver(ownerDocument);\n      resolver.href = url;\n      return resolver.href || url;\n    }\n\n    var tempDoc;\n    var tempDocBase;\n    function resolveUrl(url, baseUri) {\n      if (!tempDoc) {\n        tempDoc = document.implementation.createHTMLDocument('temp');\n        tempDocBase = tempDoc.createElement('base');\n        tempDoc.head.appendChild(tempDocBase);\n      }\n      tempDocBase.href = baseUri;\n      return resolve(url, tempDoc);\n    }\n\n    function getUrlResolver(ownerDocument) {\n      return ownerDocument.__urlResolver ||\n        (ownerDocument.__urlResolver = ownerDocument.createElement('a'));\n    }\n\n    var CSS_URL_RX = /(url\\()([^)]*)(\\))/g;\n    var URL_ATTRS = {\n      '*': ['href', 'src', 'style', 'url'],\n      form: ['action']\n    };\n    var ABS_URL = /(^\\/)|(^#)|(^[\\w-\\d]*:)/;\n    var BINDING_RX = /\\{\\{|\\[\\[/;\n\n    // exports\n    Polymer.ResolveUrl = {\n      resolveCss: resolveCss,\n      resolveAttrs: resolveAttrs,\n      resolveUrl: resolveUrl\n    };\n\n  })();\n(function() {\n  'use strict';\n\n  let MODULE_STYLES_SELECTOR = 'style, link[rel=import][type~=css], template';\n  let INCLUDE_ATTR = 'include';\n\n  function importModule(moduleId) {\n    if (!Polymer.DomModule) {\n      return null;\n    }\n    return Polymer.DomModule.import(moduleId);\n  }\n\n  let StyleGather = {\n\n    /**\n     * @param {string} moduleIds\n     * @param {boolean=} warnIfNotFound\n     * @return {string}\n     */\n    cssFromModules(moduleIds, warnIfNotFound) {\n      let modules = moduleIds.trim().split(' ');\n      let cssText = '';\n      for (let i=0; i < modules.length; i++) {\n        cssText += this.cssFromModule(modules[i], warnIfNotFound);\n      }\n      return cssText;\n    },\n\n    // returns cssText of styles in a given module; also un-applies any\n    // styles that apply to the document.\n    cssFromModule(moduleId, warnIfNotFound) {\n      let m = importModule(moduleId);\n      if (m && !m._cssText) {\n        m._cssText = this.cssFromElement(m);\n      }\n      if (!m && warnIfNotFound) {\n        console.warn('Could not find style data in module named', moduleId);\n      }\n      return m && m._cssText || '';\n    },\n\n    // support lots of ways to discover css...\n    cssFromElement(element) {\n      let cssText = '';\n      // if element is a template, get content from its .content\n      let content = element.content || element;\n      let e$ = content.querySelectorAll(MODULE_STYLES_SELECTOR);\n      for (let i=0, e; i < e$.length; i++) {\n        e = e$[i];\n        // look inside templates for elements\n        if (e.localName === 'template') {\n          cssText += this.cssFromElement(e);\n        } else {\n          // style elements inside dom-modules will apply to the main document\n          // we don't want this, so we remove them here.\n          if (e.localName === 'style') {\n            let include = e.getAttribute(INCLUDE_ATTR);\n            // now support module refs on 'styling' elements\n            if (include) {\n              cssText += this.cssFromModules(include, true);\n            }\n            // get style element applied to main doc via HTMLImports polyfill\n            e = e.__appliedElement || e;\n            e.parentNode.removeChild(e);\n            cssText += Polymer.ResolveUrl.resolveCss(e.textContent, element.ownerDocument);\n            // it's an import, assume this is a text file of css content.\n            // TODO(sorvell): plan is to deprecate this way to get styles;\n            // remember to add deprecation warning when this is done.\n          } else if (e.import && e.import.body) {\n            cssText += Polymer.ResolveUrl.resolveCss(e.import.body.textContent, e.import);\n          }\n        }\n      }\n      return cssText;\n    }\n  };\n\n  Polymer.StyleGather = StyleGather;\n})();\n(function() {\n\n  let modules = {};\n  let lcModules = {};\n  function findModule(id) {\n    return modules[id] || lcModules[id.toLowerCase()];\n  }\n\n  function styleOutsideTemplateCheck(inst) {\n    if (inst.querySelector('style')) {\n      console.warn('dom-module %s has style outside template', inst.id);\n    }\n  }\n\n  /**\n   * The `dom-module` element registers the dom it contains to the name given\n   * by the module's id attribute. It provides a unified database of dom\n   * accessible via any dom-module element. Use the `import(id, selector)`\n   * method to locate dom within this database. For example,\n   *\n   * <dom-module id=\"foo\">\n   *   <img src=\"stuff.png\">\n   * </dom-module>\n   *\n   * Then in code in some other location that cannot access the dom-module above\n   *\n   * let img = document.createElement('dom-module').import('foo', 'img');\n   *\n   */\n  class DomModule extends HTMLElement {\n\n    static get observedAttributes() { return ['id'] }\n\n    attributeChangedCallback(name, old, value) {\n      if (old !== value) {\n        this.register();\n      }\n    }\n\n    get assetpath() {\n      // Don't override existing assetpath.\n      if (!this.__assetpath) {\n        // note: assetpath set via an attribute must be relative to this\n        // element's location; accomodate polyfilled HTMLImports\n        const owner = window.HTMLImports && HTMLImports.importForElement ?\n          HTMLImports.importForElement(this) || document : this.ownerDocument;\n        this.__assetpath = Polymer.ResolveUrl.resolveUrl(\n          this.getAttribute('assetpath') || '', owner.baseURI);\n      }\n      return this.__assetpath;\n    }\n\n    /**\n     * Registers the dom-module at a given id. This method should only be called\n     * when a dom-module is imperatively created. For\n     * example, `document.createElement('dom-module').register('foo')`.\n     * @method register\n     * @param {string=} id The id at which to register the dom-module.\n     */\n    register(id) {\n      id = id || this.id;\n      if (id) {\n        this.id = id;\n        // store id separate from lowercased id so that\n        // in all cases mixedCase id will stored distinctly\n        // and lowercase version is a fallback\n        modules[id] = this;\n        lcModules[id.toLowerCase()] = this;\n        styleOutsideTemplateCheck(this);\n      }\n    }\n\n    /**\n     * Retrieves the dom specified by `selector` in the module specified by\n     * `id`. For example, this.import('foo', 'img');\n     * @method register\n     * @param {string} id\n     * @param {string=} selector\n     * @return {Element} Returns the dom which matches `selector` in the module\n     * at the specified `id`.\n     */\n    import(id, selector) {\n      if (id) {\n        let m = findModule(id);\n        if (m && selector) {\n          return m.querySelector(selector);\n        }\n        return m;\n      }\n      return null;\n    }\n\n  }\n\n  DomModule.prototype['modules'] = modules;\n\n  customElements.define('dom-module', DomModule);\n\n  // export\n  Polymer.DomModule = new DomModule();\n\n})();\n(function() {\n\n  const Path = {\n\n    isPath: function(path) {\n      return path.indexOf('.') >= 0;\n    },\n\n    root: function(path) {\n      var dotIndex = path.indexOf('.');\n      if (dotIndex === -1) {\n        return path;\n      }\n      return path.slice(0, dotIndex);\n    },\n\n    // Given `base` is `foo.bar`, `foo` is an ancestor, `foo.bar` is not\n    isAncestor: function(base, path) {\n      //     base.startsWith(path + '.');\n      return base.indexOf(path + '.') === 0;\n    },\n\n    // Given `base` is `foo.bar`, `foo.bar.baz` is an descendant\n    isDescendant: function(base, path) {\n      //     path.startsWith(base + '.');\n      return path.indexOf(base + '.') === 0;\n    },\n\n    // can be read as:  from  to       path\n    translate: function(base, newBase, path) {\n      // Defense?\n      return newBase + path.slice(base.length);\n    },\n\n    matches: function(base, path) {\n      return (base === path) ||\n             this.isAncestor(base, path) ||\n             this.isDescendant(base, path);\n    },\n\n    /**\n     * Converts array-based paths to flattened path\n     * @param {string | !Array<string|number>} path\n     * @return {string}\n     */\n    normalize: function(path) {\n      if (Array.isArray(path)) {\n        var parts = [];\n        for (var i=0; i<path.length; i++) {\n          var args = path[i].toString().split('.');\n          for (var j=0; j<args.length; j++) {\n            parts.push(args[j]);\n          }\n        }\n        return parts.join('.');\n      } else {\n        return path;\n      }\n    },\n\n    /**\n     * Split a path into an array\n     * @param {string | !Array<string|number>} path\n     * @return {!Array<string>}\n     */\n    split: function(path) {\n      if (Array.isArray(path)) {\n        return this.normalize(path).split('.');\n      }\n      return path.toString().split('.');\n    },\n\n    /**\n     * @param {Object} root\n     * @param {string | !Array<string|number>} path\n     * @param {Object=} info\n     * @return {*}\n     */\n    get: function(root, path, info) {\n      var prop = root;\n      var parts = this.split(path);\n      // Loop over path parts[0..n-1] and dereference\n      for (var i=0; i<parts.length; i++) {\n        if (!prop) {\n          return;\n        }\n        var part = parts[i];\n        prop = prop[part];\n      }\n      if (info) {\n        info.path = parts.join('.');\n      }\n      return prop;\n    },\n\n    /**\n     * @param {Object} root\n     * @param {string | !Array<string|number>} path\n     * @param {*} value\n     * @return {string | undefined}\n     */\n    set: function(root, path, value) {\n      var prop = root;\n      var parts = this.split(path);\n      var last = parts[parts.length-1];\n      if (parts.length > 1) {\n        // Loop over path parts[0..n-2] and dereference\n        for (var i=0; i<parts.length-1; i++) {\n          var part = parts[i];\n          prop = prop[part];\n          if (!prop) {\n            return;\n          }\n        }\n        // Set value to object at end of path\n        prop[last] = value;\n      } else {\n        // Simple property set\n        prop[path] = value;\n      }\n      return parts.join('.');\n    }\n\n  };\n\n  // BC API\n  Path.isDeep = Path.isPath;\n\n  Polymer.Path = Path;\n  \n})();\n(function(global) {\n\n  'use strict';\n\n  Polymer.Async = {};\n\n  /**\n   * A timer with the async interface.\n   */\n  Polymer.Async.timeOut = {\n    after: function(delay) {\n      return delay === 0 ? Polymer.Async.timeOut :\n      {\n        run: function(fn) {\n          return global.setTimeout(fn, delay);\n        },\n        cancel: global.clearTimeout.bind(global)\n      }\n    },\n    run: global.setTimeout.bind(global),\n    cancel: global.clearTimeout.bind(global)\n  };\n\n  /**\n   * requestAnimationFrame with the async interface.\n   */\n  Polymer.Async.animationFrame = {\n    run:  global.requestAnimationFrame.bind(global),\n    cancel: global.cancelAnimationFrame.bind(global)\n  };\n\n  /**\n   * requestIdleCallback with the async interface.\n   */\n  Polymer.Async.idlePeriod = {\n    run(fn) {\n      return global.requestIdleCallback ? global.requestIdleCallback(fn) : global.setTimeout(fn, 16);\n    },\n    cancel(timer) {\n      return global.cancelIdleCallback ? global.cancelIdleCallback(timer) : global.clearTimeout(timer);\n    }\n  };\n\n  /**\n   * Micro task with the async interface.\n   */\n  Polymer.Async.microTask = {\n    _currVal: 0,\n    _lastVal: 0,\n    _callbacks: [],\n    _twiddleContent: 0,\n    _twiddle: document.createTextNode(''),\n\n    run(callback) {\n      this._twiddle.textContent = this._twiddleContent++;\n      this._callbacks.push(callback);\n      return this._currVal++;\n    },\n\n    cancel(handle) {\n      const idx = handle - this._lastVal;\n      if (idx >= 0) {\n        if (!this._callbacks[idx]) {\n          throw 'invalid async handle: ' + handle;\n        }\n        this._callbacks[idx] = null;\n      }\n    },\n\n    _atEndOfMicrotask() {\n      const len = this._callbacks.length;\n      for (let i=0; i<len; i++) {\n        let cb = this._callbacks[i];\n        if (cb) {\n          try {\n            cb();\n          } catch(e) {\n            // Clear queue up to this point & start over after throwing\n            i++;\n            this._callbacks.splice(0, i);\n            this._lastVal += i;\n            this._twiddle.textContent = this._twiddleContent++;\n            throw e;\n          }\n        }\n      }\n      this._callbacks.splice(0, len);\n      this._lastVal += len;\n    },\n\n    flush() {\n      this._observer.takeRecords();\n      this._atEndOfMicrotask();\n    }\n  };\n\n  Polymer.Async.microTask._observer = new window.MutationObserver(function microTaskObserver() {\n    Polymer.Async.microTask._atEndOfMicrotask();\n  });\n  Polymer.Async.microTask._observer.observe(Polymer.Async.microTask._twiddle, {characterData: true});\n\n})(this);\n(function() {\n\n  'use strict';\n\n  var caseMap = Polymer.CaseMap;\n\n  var microtask = Polymer.Async.microTask;\n\n  // Save map of native properties; this forms a blacklist or properties\n  // that won't have their values \"saved\" by `saveAccessorValue`, since\n  // reading from an HTMLElement accessor from the context of a prototype throws\n  const nativeProperties = {};\n  let proto = HTMLElement.prototype;\n  while (proto) {\n    let props = Object.getOwnPropertyNames(proto);\n    for (let i=0; i<props.length; i++) {\n      nativeProperties[props[i]] = true;\n    }\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  /**\n   * Used to save the value of a property that will be overridden with\n   * an accessor. If the `model` is a prototype, the values will be saved\n   * in `__dataProto`, and it's up to the user (or downstream mixin) to\n   * decide how/when to set these values back into the accessors.\n   * If `model` is already an instance (it has a `__data` property), then\n   * the value will be set as a pending property, meaning the user should\n   * call `_invalidateProperties` or `_flushProperties` to take effect\n   *\n   * @param {Object} model Prototype or instance\n   * @param {string} property Name of property\n   * @private\n   */\n  function saveAccessorValue(model, property) {\n    // Don't read/store value for any native properties since they could throw\n    if (!nativeProperties[property]) {\n      let value = model[property];\n      if (value !== undefined) {\n        if (model.__data) {\n          // Adding accessor to instance; update the property\n          // It is the user's responsibility to call _flushProperties\n          model._setPendingProperty(property, value);\n        } else {\n          // Adding accessor to proto; save proto's value for instance-time use\n          if (!model.__dataProto) {\n            model.__dataProto = {};\n          } else if (!model.hasOwnProperty(goog.reflect.objectProperty('__dataProto', model))) {\n            model.__dataProto = Object.create(model.__dataProto);\n          }\n          model.__dataProto[property] = value;\n        }\n      }\n    }\n  }\n\n  Polymer.PropertyAccessors = Polymer.dedupingMixin(function(superClass) {\n\n    return class PropertyAccessors extends superClass {\n\n      static createPropertiesForAttributes() {\n        let a$ = this.observedAttributes;\n        for (let i=0; i < a$.length; i++) {\n          this.prototype._createPropertyAccessor(caseMap.dashToCamelCase(a$[i]));\n        }\n      }\n\n      constructor() {\n        super();\n        this._initializeProperties();\n      }\n\n      attributeChangedCallback(name, old, value) {\n        if (old !== value) {\n          this._attributeToProperty(name, value);\n        }\n      }\n\n      /**\n       * Initializes the local storage for property accessors.\n       *\n       * Default initialization via initializing\n       * local property & pending data storage with any accessor values saved\n       * in `__dataProto`.  If instance properties had been set before the\n       * element upgraded and gained accessors on its prototype, these values\n       * are set into the prototype's accessors after being deleted from the\n       * instance.\n       *\n       * @protected\n       */\n      _initializeProperties() {\n        this.__serializing = false;\n        this.__dataCounter = 0;\n        this.__dataInvalid = false;\n        // initialize data with prototype values saved when creating accessors\n        this.__data = {};\n        this.__dataPending = null;\n        this.__dataOld = null;\n        if (this.__dataProto) {\n          this._initializeProtoProperties(this.__dataProto);\n        }\n      }\n\n      _initializeProtoProperties(props) {\n        for (let p in props) {\n          this._setProperty(p, props[p]);\n        }\n      }\n\n      /**\n       * Ensures the element has the given attribute. If it does not,\n       * assigns the given value to the attribute.\n       *\n       *\n       * @method _ensureAttribute\n       * @param {string} attribute Name of attribute to ensure is set.\n       * @param {string} value of the attribute.\n       */\n      _ensureAttribute(attribute, value) {\n        if (!this.hasAttribute(attribute)) {\n          this._valueToNodeAttribute(this, value, attribute);\n        }\n      }\n\n      /**\n       * Deserializes an attribute to its associated property.\n       *\n       * This method calls the `_deserializeValue` method to convert the string to\n       * a typed value.\n       *\n       * @method _attributeToProperty\n       * @param {string} attribute Name of attribute to deserialize.\n       * @param {string} value of the attribute.\n       * @param {*} type type to deserialize to.\n       */\n      _attributeToProperty(attribute, value, type) {\n        // Don't deserialize back to property if currently reflecting\n        if (!this.__serializing) {\n          var property = caseMap.dashToCamelCase(attribute);\n          this[property] = this._deserializeValue(value, type);\n        }\n      }\n\n      /**\n       * Serializes a property to its associated attribute.\n       *\n       * @method _propertyToAttribute\n       * @param {string} property Property name to reflect.\n       * @param {string=} attribute Attribute name to reflect.\n       * @param {*=} value Property value to refect.\n       */\n      _propertyToAttribute(property, attribute, value) {\n        this.__serializing = true;\n        value = (arguments.length < 3) ? this[property] : value;\n        this._valueToNodeAttribute(this, value,\n          attribute || caseMap.camelToDashCase(property));\n        this.__serializing = false;\n      }\n\n      /**\n       * Sets a typed value to an HTML attribute on a node.\n       *\n       * This method calls the `_serializeValue` method to convert the typed\n       * value to a string.  If the `_serializeValue` method returns `undefined`,\n       * the attribute will be removed (this is the default for boolean\n       * type `false`).\n       *\n       * @method _valueToNodeAttribute\n       * @param {Element} node Element to set attribute to.\n       * @param {*} value Value to serialize.\n       * @param {string} attribute Attribute name to serialize to.\n       */\n      _valueToNodeAttribute(node, value, attribute) {\n        var str = this._serializeValue(value);\n        if (str === undefined) {\n          node.removeAttribute(attribute);\n        } else {\n          node.setAttribute(attribute, str);\n        }\n      }\n\n      /**\n       * Converts a typed value to a string.\n       *\n       * This method is called by Polymer when setting JS property values to\n       * HTML attributes.  Users may override this method on Polymer element\n       * prototypes to provide serialization for custom types.\n       *\n       * @method _serializeValue\n       * @param {*} value Property value to serialize.\n       * @return {string | undefined} String serialized from the provided property value.\n       */\n      _serializeValue(value) {\n        /* eslint-disable no-fallthrough */\n        switch (typeof value) {\n          case 'boolean':\n            return value ? '' : undefined;\n\n          case 'object':\n            if (value instanceof Date) {\n              return value.toString();\n            } else if (value) {\n              try {\n                return JSON.stringify(value);\n              } catch(x) {\n                return '';\n              }\n            }\n\n          default:\n            return value != null ? value.toString() : undefined;\n        }\n      }\n\n      /**\n       * Converts a string to a typed value.\n       *\n       * This method is called by Polymer when reading HTML attribute values to\n       * JS properties.  Users may override this method on Polymer element\n       * prototypes to provide deserialization for custom `type`s.  Note,\n       * the `type` argument is the value of the `type` field provided in the\n       * `properties` configuration object for a given property, and is\n       * by convention the constructor for the type to deserialize.\n       *\n       * Note: The return value of `undefined` is used as a sentinel value to\n       * indicate the attribute should be removed.\n       *\n       * @method _deserializeValue\n       * @param {string} value Attribute value to deserialize.\n       * @param {*} type Type to deserialize the string to.\n       * @return {*} Typed value deserialized from the provided string.\n       */\n      _deserializeValue(value, type) {\n        /**\n         * @type {*}\n         */\n        let outValue;\n        switch (type) {\n          case Number:\n            outValue = Number(value);\n            break;\n\n          case Boolean:\n            outValue = (value !== null);\n            break;\n\n          case Object:\n            try {\n              outValue = JSON.parse(value);\n            } catch(x) {\n              // allow non-JSON literals like Strings and Numbers\n            }\n            break;\n\n          case Array:\n            try {\n              outValue = JSON.parse(value);\n            } catch(x) {\n              outValue = null;\n              console.warn('Polymer::Attributes: couldn`t decode Array as JSON');\n            }\n            break;\n\n          case Date:\n            outValue = new Date(value);\n            break;\n\n          case String:\n          default:\n            outValue = value;\n            break;\n        }\n\n        return outValue;\n      }\n      /* eslint-enable no-fallthrough */\n\n      /**\n       * Creates a setter/getter pair for the named property with its own\n       * local storage.  The getter returns the value in the local storage,\n       * and the setter calls `_setProperty`, which updates the local storage\n       * for the property and enqueues a `_propertiesChanged` callback.\n       *\n       * This method may be called on a prototype or an instance.  Calling\n       * this method may overwrite a property value that already exists on\n       * the prototype/instance by creating the accessor.  When calling on\n       * a prototype, any overwritten values are saved in `__dataProto`,\n       * and it is up to the subclasser to decide how/when to set those\n       * properties back into the accessor.  When calling on an instance,\n       * the overwritten value is set via `_setPendingProperty`, and the\n       * user should call `_invalidateProperties` or `_flushProperties`\n       * for the values to take effect.\n       *\n       * @param {string} property Name of the property\n       * @param {boolean=} readOnly When true, no setter is created; the\n       *   protected `_setProperty` function must be used to set the property\n       * @protected\n       */\n      _createPropertyAccessor(property, readOnly) {\n        saveAccessorValue(this, property);\n        Object.defineProperty(this, property, {\n          get: function() {\n            return this.__data && this.__data[property];\n          },\n          set: readOnly ? function() { } : function(value) {\n            this._setProperty(property, value);\n          }\n        });\n      }\n\n      /**\n       * Updates the local storage for a property (via `_setPendingProperty`)\n       * and enqueues a `_proeprtiesChanged` callback.\n       *\n       * @param {string} property Name of the property\n       * @param {*} value Value to set\n       * @protected\n       */\n      _setProperty(property, value) {\n        if (this._setPendingProperty(property, value)) {\n          this._invalidateProperties();\n        }\n      }\n\n      /**\n       * Updates the local storage for a property, records the previous value,\n       * and adds it to the set of \"pending changes\" that will be passed to the\n       * `_propertiesChanged` callback.  This method does not enqueue the\n       * `_propertiesChanged` callback.\n       *\n       * @param {string} property Name of the property\n       * @param {*} value Value to set\n       * @protected\n       */\n      _setPendingProperty(property, value) {\n        let old = this.__data[property];\n        if (this._shouldPropertyChange(property, value, old)) {\n          if (!this.__dataPending) {\n            this.__dataPending = {};\n            this.__dataOld = {};\n          }\n          // Ensure old is captured from the last turn\n          if (!(property in this.__dataOld)) {\n            this.__dataOld[property] = old;\n          }\n          this.__data[property] = value;\n          this.__dataPending[property] = value;\n          return true;\n        }\n      }\n\n      /**\n       * Returns true if the specified property has a pending change.\n       *\n       * @param {string} prop Property name\n       * @return {boolean} True if property has a pending change\n       * @protected\n       */\n      _isPropertyPending(prop) {\n        return this.__dataPending && (prop in this.__dataPending);\n      }\n\n      /**\n       * Marks the properties as invalid, and enqueues an async\n       * `_propertiesChanged` callback.\n       *\n       * @protected\n       */\n      _invalidateProperties() {\n        if (!this.__dataInvalid) {\n          this.__dataInvalid = true;\n          microtask.run(() => {\n            if (this.__dataInvalid) {\n              this.__dataInvalid = false;\n              this._flushProperties();\n            }\n          });\n        }\n      }\n\n      /**\n       * Calls the `_propertiesChanged` callback with the current set of\n       * pending changes (and old values recorded when pending changes were\n       * set), and resets the pending set of changes.\n       *\n       * @protected\n       */\n      _flushProperties() {\n        let oldProps = this.__dataOld;\n        let changedProps = this.__dataPending;\n        this.__dataPending = null;\n        this.__dataCounter++;\n        this._propertiesChanged(this.__data, changedProps, oldProps);\n        this.__dataCounter--;\n      }\n\n      /**\n       * Callback called when any properties with accessors created via\n       * `_createPropertyAccessor` have been set.\n       *\n       * @param {Object} currentProps Bag of all current accessor values\n       * @param {Object} changedProps Bag of properties changed since the last\n       *   call to `_propertiesChanged`\n       * @param {Object} oldProps Bag of previous values for each property\n       *   in `changedProps`\n       * @protected\n       */\n      _propertiesChanged(currentProps, changedProps, oldProps) { // eslint-disable-line no-unused-vars\n      }\n\n      /**\n       * Method called to determine whether a property value should be\n       * considered as a change and cause the `_propertiesChanged` callback\n       * to be enqueued.\n       *\n       * The default implementation returns `true` for primitive types if a\n       * strict equality check fails, and returns `true` for all Object/Arrays.\n       * The method always returns false for `NaN`.\n       *\n       * Override this method to e.g. provide stricter checking for\n       * Objects/Arrays when using immutable patterns.\n       *\n       * @param {string} property\n       * @param {*} value\n       * @param {*} old\n       * @return {boolean} Whether the property should be considered a change\n       *   and enqueue a `_proeprtiesChanged` callback\n       * @protected\n       */\n      _shouldPropertyChange(property, value, old) {\n        return (\n          // Strict equality check for primitives\n          (old !== value &&\n           // This ensures (old==NaN, value==NaN) always returns false\n           (old === old || value === value))\n        );\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  /**\n   * Scans a template to produce an annotation object that stores expression\n   * metadata along with information to associate the metadata with nodes in an\n   * instance.\n   *\n   * Elements with `id` in the template are noted and marshaled into an\n   * the `$` hash in an instance.\n   *\n   * Example\n   *\n   *     &lt;template>\n   *       &lt;div id=\"foo\">&lt;/div>\n   *     &lt;/template>\n   *     &lt;script>\n   *      Polymer({\n   *        task: function() {\n   *          this.$.foo.style.color = 'red';\n   *        }\n   *      });\n   *     &lt;/script>\n   *\n   * Other expressions that are noted include:\n   *\n   * Double-mustache annotations in text content. The annotation must be the only\n   * content in the tag, compound expressions are not (currently) supported.\n   *\n   *     <[tag]>{{path.to.host.property}}<[tag]>\n   *\n   * Double-mustache annotations in an attribute.\n   *\n   *     <[tag] someAttribute=\"{{path.to.host.property}}\"><[tag]>\n   *\n   * Only immediate host properties can automatically trigger side-effects.\n   * Setting `host.path` in the example above triggers the binding, setting\n   * `host.path.to.host.property` does not.\n   *\n   * `on-` style event declarations.\n   *\n   *     <[tag] on-<event-name>=\"{{hostMethodName}}\"><[tag]>\n   *\n   * Note: **the `annotations` feature does not actually implement the behaviors\n   * associated with these expressions, it only captures the data**.\n   *\n   * Other optional features contain actual data implementations.\n   *\n   * @class standard feature: annotations\n   */\n\n  /*\n\n  Scans a template to produce an annotation map that stores expression metadata\n  and information that associates the metadata to nodes in a template instance.\n\n  Supported annotations are:\n\n    * id attributes\n    * binding annotations in text nodes\n      * double-mustache expressions: {{expression}}\n      * double-bracket expressions: [[expression]]\n    * binding annotations in attributes\n      * attribute-bind expressions: name=\"{{expression}} || [[expression]]\"\n      * property-bind expressions: name*=\"{{expression}} || [[expression]]\"\n      * property-bind expressions: name:=\"expression\"\n    * event annotations\n      * event delegation directives: on-<eventName>=\"expression\"\n\n  Generated data-structure:\n\n    [\n      {\n        id: '<id>',\n        events: [\n          {\n            mode: ['auto'|''],\n            name: '<name>'\n            value: '<expression>'\n          }, ...\n        ],\n        bindings: [\n          {\n            kind: ['text'|'attribute'|'property'],\n            mode: ['auto'|''],\n            name: '<name>'\n            value: '<expression>'\n          }, ...\n        ],\n        parent: <reference to parent annotation>,\n        index: <integer index in parent's childNodes collection>\n      },\n      ...\n    ]\n  */\n\n  // null-array (shared empty array to avoid null-checks)\n  const emptyArray = [];\n\n  let bindingRegex = (function() {\n    let IDENT  = '(?:' + '[a-zA-Z_$][\\\\w.:$\\\\-*]*' + ')';\n    let NUMBER = '(?:' + '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';\n    let SQUOTE_STRING = '(?:' + '\\'(?:[^\\'\\\\\\\\]|\\\\\\\\.)*\\'' + ')';\n    let DQUOTE_STRING = '(?:' + '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"' + ')';\n    let STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';\n    let ARGUMENT = '(?:' + IDENT + '|' + NUMBER + '|' +  STRING + '\\\\s*' + ')';\n    let ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\\\s*' + ARGUMENT + ')*' + ')';\n    let ARGUMENT_LIST = '(?:' + '\\\\(\\\\s*' +\n                                  '(?:' + ARGUMENTS + '?' + ')' +\n                                '\\\\)\\\\s*' + ')';\n    let BINDING = '(' + IDENT + '\\\\s*' + ARGUMENT_LIST + '?' + ')'; // Group 3\n    let OPEN_BRACKET = '(\\\\[\\\\[|{{)' + '\\\\s*';\n    let CLOSE_BRACKET = '(?:]]|}})';\n    let NEGATE = '(?:(!)\\\\s*)?'; // Group 2\n    let EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;\n    return new RegExp(EXPRESSION, \"g\");\n  })();\n\n  let insertionPointTag = 'slot';\n\n  /**\n   * @param {HTMLTemplateElement} template\n   * @param {boolean=} stripWhiteSpace\n   * @return {Array<Object>}\n   */\n  function parseTemplateAnnotations(template, stripWhiteSpace, ownerDocument) {\n    // TODO(kschaaf): File issue and/or remove when fixed\n    // hold a reference to content as _content to prevent odd Chrome gc issue\n    // nested templates also may receive their content as _content\n    let content = (template._content = template._content || template.content);\n    // since a template may be re-used, memo-ize notes.\n    if (!content._notes) {\n      content._notes = [];\n      // TODO(sorvell): whitespace and processAnnotations need to be factored\n      // into plugins\n      ownerDocument = ownerDocument || template.ownerDocument;\n      parseNodeAnnotations(content, content._notes,\n        stripWhiteSpace || template.hasAttribute('strip-whitespace'), ownerDocument);\n    }\n    return content._notes;\n  }\n\n  // add annotations gleaned from subtree at `node` to `list`\n  function parseNodeAnnotations(node, list, stripWhiteSpace, ownerDocument) {\n    return node.nodeType === Node.TEXT_NODE ?\n      parseTextNodeAnnotation(node, list) :\n        parseElementAnnotations(node, list, stripWhiteSpace, ownerDocument);\n  }\n\n  function parseBindings(text) {\n    let parts = [];\n    let lastIndex = 0;\n    let m;\n    // Example: \"literal1{{prop}}literal2[[!compute(foo,bar)]]final\"\n    // Regex matches:\n    //        Iteration 1:  Iteration 2:\n    // m[1]: '{{'          '[['\n    // m[2]: ''            '!'\n    // m[3]: 'prop'        'compute(foo,bar)'\n    while ((m = bindingRegex.exec(text)) !== null) {\n      // Add literal part\n      if (m.index > lastIndex) {\n        parts.push({literal: text.slice(lastIndex, m.index)});\n      }\n      // Add binding part\n      // Mode (one-way or two)\n      let mode = m[1][0];\n      let negate = Boolean(m[2]);\n      let value = m[3].trim();\n      let customEvent, notifyEvent, colon;\n      if (mode == '{' && (colon = value.indexOf('::')) > 0) {\n        notifyEvent = value.substring(colon + 2);\n        value = value.substring(0, colon);\n        customEvent = true;\n      }\n      parts.push({\n        compoundIndex: parts.length,\n        value: value,\n        mode: mode,\n        negate: negate,\n        event: notifyEvent,\n        customEvent: customEvent\n      });\n      lastIndex = bindingRegex.lastIndex;\n    }\n    // Add a final literal part\n    if (lastIndex && lastIndex < text.length) {\n      let literal = text.substring(lastIndex);\n      if (literal) {\n        parts.push({\n          literal: literal\n        });\n      }\n    }\n    if (parts.length) {\n      return parts;\n    }\n  }\n\n  function literalFromParts(parts) {\n    let s = '';\n    for (let i=0; i<parts.length; i++) {\n      let literal = parts[i].literal;\n      s += literal || '';\n    }\n    return s;\n  }\n\n  // add annotations gleaned from TextNode `node` to `list`\n  function parseTextNodeAnnotation(node, list) {\n    let parts = parseBindings(node.textContent);\n    if (parts) {\n      // Initialize the textContent with any literal parts\n      // NOTE: default to a space here so the textNode remains; some browsers\n      // (IE) evacipate an empty textNode following cloneNode/importNode.\n      node.textContent = literalFromParts(parts) || ' ';\n      let note = {\n        bindings: [{\n          kind: 'text',\n          name: 'textContent',\n          parts: parts,\n          isCompound: parts.length !== 1\n        }]\n      };\n      list.push(note);\n      return note;\n    }\n  }\n\n  // add annotations gleaned from Element `node` to `list`\n  function parseElementAnnotations(element, list, stripWhiteSpace, ownerDocument) {\n    let note = {\n      bindings: [],\n      events: []\n    };\n    if (element.localName === insertionPointTag) {\n      list._hasInsertionPoint = true;\n    }\n    parseChildNodesAnnotations(element, note, list, stripWhiteSpace, ownerDocument);\n    if (element.attributes) {\n      parseNodeAttributeAnnotations(element, note);\n      Polymer.ResolveUrl.resolveAttrs(element, ownerDocument);\n    }\n    if (note.bindings.length || note.events.length || note.id) {\n      list.push(note);\n    }\n    return note;\n  }\n\n  // 1.x backwards-compatible auto-wrapper for template type extensions\n  // This is a clear layering violation and gives favored-nation status to\n  // dom-if and dom-repeat templates.  This is a conceit we're choosing to keep\n  // a.) to ease 1.x backwards-compatibility due to loss of `is`, and\n  // b.) to maintain if/repeat capability in parser-constrained elements\n  //     (e.g. table, select) in lieu of native CE type extensions without\n  //     massive new invention in this space (e.g. directive system)\n  const templateExtensions = {\n    'dom-if': true,\n    'dom-repeat': true\n  };\n  function wrapTemplateExtension(node) {\n    let is = node.getAttribute('is');\n    if (is && templateExtensions[is]) {\n      let t = node;\n      t.removeAttribute('is');\n      node = t.ownerDocument.createElement(is);\n      t.parentNode.replaceChild(node, t);\n      node.appendChild(t);\n      while(t.attributes.length) {\n        node.setAttribute(t.attributes[0].name, t.attributes[0].value);\n        t.removeAttribute(t.attributes[0].name);\n      }\n    }\n    return node;\n  }\n\n  // add annotations gleaned from children of `root` to `list`, `root`'s\n  // `note` is supplied as it is the note.parent of added annotations\n  function parseChildNodesAnnotations(root, note, list, stripWhiteSpace, ownerDocument) {\n    if (root.firstChild) {\n      let node = root.firstChild;\n      let i = 0;\n      while (node) {\n        // Wrap templates\n        if (node.localName == 'template') {\n          node = wrapTemplateExtension(node);\n        }\n        // Recurse\n        if (node.localName == 'template' &&\n          !node.hasAttribute('preserve-content')) {\n          parseTemplate(node, i, list, note, stripWhiteSpace, ownerDocument);\n        }\n        // collapse adjacent textNodes: fixes an IE issue that can cause\n        // text nodes to be inexplicably split =(\n        // note that root.normalize() should work but does not so we do this\n        // manually.\n        let next = node.nextSibling;\n        if (node.nodeType === Node.TEXT_NODE) {\n          let n = next;\n          while (n && (n.nodeType === Node.TEXT_NODE)) {\n            node.textContent += n.textContent;\n            next = n.nextSibling;\n            root.removeChild(n);\n            n = next;\n          }\n          // optionally strip whitespace\n          if (stripWhiteSpace && !node.textContent.trim()) {\n            root.removeChild(node);\n            // decrement index since node is removed\n            i--;\n          }\n        }\n        // if this node didn't get evacipated, parse it.\n        if (node.parentNode) {\n          let childAnnotation = parseNodeAnnotations(node, list,\n            stripWhiteSpace, ownerDocument);\n          if (childAnnotation) {\n            childAnnotation.parent = note;\n            childAnnotation.index = i;\n          }\n        }\n        node = next;\n        i++;\n      }\n    }\n  }\n\n  // 1. Parse annotations from the template and memoize them on\n  //    content._notes (recurses into nested templates)\n  // 2. Remove template.content and store it in annotation list, where it\n  //    will be the responsibility of the host to set it back to the template\n  //    (this is both an optimization to avoid re-stamping nested template\n  //    children and avoids a bug in Chrome where nested template children\n  //    upgrade)\n  function parseTemplate(node, index, list, parent, stripWhiteSpace, ownerDocument) {\n    let content = node.content.ownerDocument.createDocumentFragment();\n    content._notes = parseTemplateAnnotations(node, stripWhiteSpace, ownerDocument);\n    content.appendChild(node.content);\n    list.push({\n      bindings: emptyArray,\n      events: emptyArray,\n      templateContent: content,\n      parent: parent,\n      index: index\n    });\n  }\n\n  // add annotation data from attributes to the `annotation` for node `node`\n  function parseNodeAttributeAnnotations(node, annotation) {\n    // Make copy of original attribute list, since the order may change\n    // as attributes are added and removed\n    let attrs = Array.prototype.slice.call(node.attributes);\n    for (let i=attrs.length-1, a; (a=attrs[i]); i--) {\n      let n = a.name;\n      let v = a.value;\n      let b;\n      // events (on-*)\n      if (n.slice(0, 3) === 'on-') {\n        node.removeAttribute(n);\n        annotation.events.push({\n          name: n.slice(3),\n          value: v\n        });\n      }\n      // bindings (other attributes)\n      else if ((b = parseNodeAttributeAnnotation(node, n, v))) {\n        annotation.bindings.push(b);\n      }\n      // static id\n      else if (n === 'id') {\n        annotation.id = v;\n      }\n    }\n  }\n\n  // construct annotation data from a generic attribute, or undefined\n  function parseNodeAttributeAnnotation(node, name, value) {\n    let parts = parseBindings(value);\n    if (parts) {\n      // Attribute or property\n      let origName = name;\n      let kind = 'property';\n      if (name[name.length-1] == '$') {\n        name = name.slice(0, -1);\n        kind = 'attribute';\n      }\n      // Initialize attribute bindings with any literal parts\n      let literal = literalFromParts(parts);\n      if (literal && kind == 'attribute') {\n        node.setAttribute(name, literal);\n      }\n      // Clear attribute before removing, since IE won't allow removing\n      // `value` attribute if it previously had a value (can't\n      // unconditionally set '' before removing since attributes with `$`\n      // can't be set using setAttribute)\n      if (node.localName === 'input' && origName === 'value') {\n        node.setAttribute(origName, '');\n      }\n      // Remove annotation\n      node.removeAttribute(origName);\n      // Case hackery: attributes are lower-case, but bind targets\n      // (properties) are case sensitive. Gambit is to map dash-case to\n      // camel-case: `foo-bar` becomes `fooBar`.\n      // Attribute bindings are excepted.\n      let propertyName = Polymer.CaseMap.dashToCamelCase(name);\n      if (kind === 'property') {\n        name = propertyName;\n      }\n      return {\n        kind: kind,\n        name: name,\n        propertyName: propertyName,\n        parts: parts,\n        literal: literal,\n        isCompound: parts.length !== 1\n      };\n    }\n  }\n\n  function findTemplateAnnotatedNode(root, note) {\n    // recursively ascend tree until we hit root\n    let parent = note.parent && findTemplateAnnotatedNode(root,\n      note.parent);\n    // unwind the stack, returning the indexed node at each level\n    if (parent) {\n      // note: marginally faster than indexing via childNodes\n      // (http://jsperf.com/childnodes-lookup)\n      for (let n=parent.firstChild, i=0; n; n=n.nextSibling) {\n        if (note.index === i++) {\n          return n;\n        }\n      }\n    } else {\n      return root;\n    }\n  }\n\n  // construct `$` map (from id annotations)\n  function applyIdToMap(inst, map, node, note) {\n    if (note.id) {\n      map[note.id] = node;\n    }\n  }\n\n  // install event listeners (from event annotations)\n  function applyEventListener(inst, node, note, host) {\n    if (note.events && note.events.length) {\n      for (let j=0, e$=note.events, e; (j<e$.length) && (e=e$[j]); j++) {\n        inst._addMethodEventListenerToNode(node, e.name, e.value, host);\n      }\n    }\n  }\n\n  // push configuration references at configure time\n  function applyTemplateContent(inst, node, note) {\n    if (note.templateContent) {\n      node._content = note.templateContent;\n    }\n  }\n\n  function createNodeEventHandler(context, eventName, methodName) {\n    // Instances can optionally have a _methodHost which allows redirecting where\n    // to find methods. Currently used by `templatize`.\n    context = context._methodHost || context;\n    let handler = function(e) {\n      if (context[methodName]) {\n        context[methodName](e, e.detail);\n      } else {\n        console.warn('listener method `' + methodName + '` not defined');\n      }\n    };\n    return handler;\n  }\n\n  Polymer.TemplateStamp = Polymer.dedupingMixin(function(superClass) {\n\n    return class TemplateStamp extends superClass {\n\n      constructor() {\n        super();\n        this.$ = null;\n        this._templateNodes = null;\n        this._templateNotes = null;\n      }\n\n      /**\n       * Clones the provided template content and returns a document fragment\n       * containing the cloned dom.\n       *\n       * The template is parsed (once and memoized) using this library's\n       * template parsing features, which identify nodes with declarative\n       * event listeners (`on-...``), `id`'s, `<template>`s, and bindings\n       * (`{{...}}` and `[[...]]`).  This template metadata (\"notes\")\n       * are stored as `this._templateNotes`, and any nodes identified in\n       * with notes are collected for this instance into `_templateNodes` in\n       * the same order as the notes array.\n       *\n       * Finally, this method generates an \"id map\" for all nodes with id's\n       * under `this.$`, passes template content back to templates as `_content`\n       * (a performance optimization to avoid deep template cloning), and\n       * installs declarative event listeners.\n       *\n       * Note that the memoized template parsing process is destructive to the\n       * template: attributes for bindings and declarative event listeners are\n       * removed after being noted in notes, and any nested <template>.content\n       * is removed and stored in notes as well.\n       *\n       * Note that this method may only be called once per instance (it does\n       * not support stamping multiple templates per element instance).\n       *\n       * @param {HTMLTemplateElement} template Template to stamp\n       */\n      _stampTemplate(template) {\n        // Polyfill support: bootstrap the template if it has not already been\n        if (template && !template.content &&\n            window.HTMLTemplateElement && HTMLTemplateElement.decorate) {\n          HTMLTemplateElement.decorate(template);\n        }\n        let notes = this._templateNotes = this._parseTemplateAnnotations(template);\n        let dom = document.importNode(template._content || template.content, true);\n        // NOTE: ShadyDom optimization indicating there is an insertion point\n        dom.__noInsertionPoint = !notes._hasInsertionPoint;\n        this.$ = {};\n        this._templateNodes = new Array(notes.length);\n        for (let i=0, l=notes.length, note, node; (i<l) && (note=notes[i]); i++) {\n          node = this._templateNodes[i] = findTemplateAnnotatedNode(dom, note);\n          applyIdToMap(this, this.$, node, note);\n          applyTemplateContent(this, node, note);\n          applyEventListener(this, node, note, this);\n        }\n        return dom;\n      }\n\n      // preprocess-time\n\n      // construct and return a list of annotation records\n      // by scanning `template`'s content\n      //\n      // TODO(sorvell): This should just crawl over a template and call\n      // a supplied list of callbacks.\n      _parseTemplateAnnotations(template) {\n        return parseTemplateAnnotations(template);\n      }\n\n      _addMethodEventListenerToNode(node, eventName, methodName, context) {\n        context = context || node;\n        let handler = createNodeEventHandler(context, eventName, methodName);\n        this._addEventListenerToNode(node, eventName, handler);\n        return handler;\n      }\n\n      _addEventListenerToNode(node, eventName, handler) {\n        node.addEventListener(eventName, handler);\n      }\n\n      _removeEventListenerFromNode(node, eventName, handler) {\n        node.removeEventListener(eventName, handler);\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  const CaseMap = Polymer.CaseMap;\n  const mixin = Polymer.mixin;\n\n  // Monotonically increasing unique ID used for de-duping effects triggered\n  // from multiple properties in the same turn\n  let dedupeId = 0;\n\n  // Property effect types; effects are stored on the prototype using these keys\n  const TYPES = {\n    ANY: '__propertyEffects',\n    COMPUTE: '__computeEffects',\n    REFLECT: '__reflectEffects',\n    NOTIFY: '__notifyEffects',\n    PROPAGATE: '__propagateEffects',\n    OBSERVE: '__observeEffects',\n    READ_ONLY: '__readOnly'\n  }\n\n  /**\n   * Ensures that the model has an own-property map of effects for the given type.\n   * The model may be a prototype or an instance.\n   *\n   * Property effects are stored as arrays of effects by property in a map,\n   * by named type on the model. e.g.\n   *\n   *   __computeEffects: {\n   *     foo: [ ... ],\n   *     bar: [ ... ]\n   *   }\n   *\n   * If the model does not yet have an effect map for the type, one is created\n   * and returned.  If it does, but it is not an own property (i.e. the\n   * prototype had effects), the the map is deeply cloned and the copy is\n   * set on the model and returned, ready for new effects to be added.\n   *\n   * @param {Object} model Prototype or instance\n   * @param {string} type Property effect type\n   * @return {Object} The own-property map of effects for the given type\n   * @private\n   */\n  function ensureOwnEffectMap(model, type) {\n    let effects = model[type];\n    if (!effects) {\n      effects = model[type] = {};\n    } else if (!model.hasOwnProperty(type)) {\n      effects = model[type] = Object.create(model[type]);\n      for (let p in effects) {\n        let protoFx = effects[p];\n        let instFx = effects[p] = Array(protoFx.length);\n        for (let i=0; i<protoFx.length; i++) {\n          instFx[i] = protoFx[i];\n        }\n      }\n    }\n    return effects;\n  }\n\n  // -- effects ----------------------------------------------\n\n  /**\n   * Runs all effects of a given type for the given set of property changes\n   * on an instance.\n   *\n   * @param {Object} inst The instance with effects to run\n   * @param {string} type Type of effect to run\n   * @param {Object} props Bag of current property changes\n   * @param {Object=} oldProps Bag of previous values for changed properties\n   * @private\n   */\n  function runEffects(inst, effects, props, oldProps, fromAbove, hasPaths) {\n    if (effects) {\n      let ran;\n      let id = dedupeId++;\n      for (let prop in props) {\n        if (runEffectsForProperty(inst, effects, id, prop, props, oldProps, fromAbove, hasPaths)) {\n          ran = true;\n        }\n      }\n      return ran;\n    }\n  }\n\n  /**\n   * Runs a list of effects for a given property.\n   *\n   * @param {Object} inst The instance with effects to run\n   * @param {Array} effects Array of effects\n   * @param {number} id Effect run id used for de-duping effects\n   * @param {string} prop Name of changed property\n   * @param {*} value Value of changed property\n   * @param {*} old Previous value of changed property\n   * @private\n   */\n  function runEffectsForProperty(inst, effects, dedupeId, prop, props, oldProps, fromAbove, hasPaths) {\n    let ran;\n    let rootProperty = hasPaths ? Polymer.Path.root(prop) : prop;\n    let fxs = effects[rootProperty];\n    if (fxs) {\n      for (let i=0, l=fxs.length, fx; (i<l) && (fx=fxs[i]); i++) {\n        if ((!fx.info || fx.info.lastRun !== dedupeId) &&\n            (!hasPaths || pathMatchesTrigger(prop, fx.trigger))) {\n          fx.fn(inst, prop, props, oldProps, fx.info, fromAbove, hasPaths);\n          if (fx.info) {\n            fx.info.lastRun = dedupeId;\n          }\n          ran = true;\n        }\n      }\n    }\n    return ran;\n  }\n\n  /**\n   * Determines whether a property/path that has changed matches the trigger\n   * criteria for an effect.  A trigger is a descriptor with the following\n   * structure, which matches the descriptors returned from `parseArg`.\n   * e.g. for `foo.bar.*`:\n   * ```\n   * trigger: {\n   *   name: 'a.b',\n   *   structured: true,\n   *   wildcard: true\n   * }\n   * ```\n   * If no trigger is given, the path is deemed to match.\n   *\n   * @param {string} path Path or property that changed\n   * @param {Object} trigger Descriptor\n   * @return {boolean} Whether the path matched the trigger\n   */\n  function pathMatchesTrigger(path, trigger) {\n    if (trigger) {\n      let triggerPath = trigger.name;\n      return (triggerPath == path) ||\n        (trigger.structured && Polymer.Path.isAncestor(triggerPath, path)) ||\n        (trigger.wildcard && Polymer.Path.isDescendant(triggerPath, path));\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * Implements the \"observer\" effect.\n   *\n   * Calls the method with `info.methodName` on the instance, passing the\n   * new and old values.\n   *\n   * @param {Object} inst The instance the effect will be run on\n   * @param {string} property Name of property\n   * @param {*} value Current value of property\n   * @param {*} old Previous value of property\n   * @param {Object} info Effect metadata\n   * @private\n   */\n  function runObserverEffect(inst, property, props, oldProps, info) {\n    let fn = inst[info.methodName];\n    let changedProp = info.property;\n    if (fn) {\n      fn.call(inst, inst.__data[changedProp], oldProps[changedProp]);\n    } else {\n      console.warn('observer method `' + info.methodName + '` not defined');\n    }\n  }\n\n  /**\n   * Runs \"notify\" effects for a set of changed properties.\n   *\n   * This method differs from the generic `runEffects` method in that it\n   * will dispatch path notification events in the case that the property\n   * changed was a path and the root property for that path didn't have a\n   * \"notify\" effect.  This is to maintain 1.0 behavior that did not require\n   * `notify: true` to ensure object sub-property notifications were\n   * sent.\n   *\n   * @param {Element} inst The instance with effects to run\n   * @param {Object} props Bag of current property changes\n   * @param {Object} oldProps Bag of previous values for changed properties\n   * @private\n   */\n  function runNotifyEffects(inst, props, oldProps, fromAbove, hasPaths) {\n    // Notify\n    let fxs = inst.__notifyEffects;\n    if (fxs || hasPaths) {\n      let notified;\n      let id = dedupeId++;\n      // Try normal notify effects; if none, fall back to try path notification\n      for (let prop in props) {\n        if (fxs && runEffectsForProperty(inst, fxs, id, prop, props, oldProps, fromAbove, hasPaths)) {\n          notified = true;\n        } else if (hasPaths && notifyPath(inst, prop, props)) {\n          notified = true;\n        }\n      }\n      // Flush host if we actually notified and host was batching\n      let host;\n      if (notified && (host = inst.__dataHost) && host._flushProperties) {\n        host._flushProperties();\n      }\n    }\n  }\n\n  /**\n   * Dispatches {property}-changed events with path information in the detail\n   * object to indicate a sub-path of the property was changed.\n   *\n   * @param {Element} inst The element from which to fire the event\n   * @param {string} path The path that was changed\n   * @param {*} value\n   * @private\n   */\n  function notifyPath(inst, path, props) {\n    let rootProperty = Polymer.Path.root(path);\n    if (rootProperty !== path) {\n      let eventName = Polymer.CaseMap.camelToDashCase(rootProperty) + '-changed';\n      dispatchNotifyEvent(inst, eventName, props[path], path);\n      return true;\n    }\n  }\n\n  /**\n   * Dispatches {property}-changed events to indicate a property (or path)\n   * changed.\n   *\n   * @param {Element} inst The element from which to fire the event\n   * @param {string} eventName The name of the event to send ('{property}-changed')\n   * @param {*} value The value of the changed property\n   * @param {string | null | undefined} path If a sub-path of this property changed, the path\n   *   that changed (optional).\n   * @private\n   */\n  function dispatchNotifyEvent(inst, eventName, value, path) {\n    let detail = {\n      value: value,\n      queueProperty: true\n    };\n    if (path) {\n      detail.path = path;\n    }\n    inst.dispatchEvent(new CustomEvent(eventName, { detail }));\n  }\n\n  /**\n   * Implements the \"notify\" effect.\n   *\n   * Dispatches a non-bubbling event named `info.eventName` on the instance\n   * with a detail object containing the new `value`.\n   *\n   * @param {Element} inst The instance the effect will be run on\n   * @param {string} property Name of property\n   * @param {*} value Current value of property\n   * @param {*} old Previous value of property\n   * @param {Object} info Effect metadata\n   * @private\n   */\n  function runNotifyEffect(inst, property, props, oldProps, info, fromAbove, hasPaths) {\n    let rootProperty = hasPaths ? Polymer.Path.root(property) : property;\n    let path = rootProperty != property ? property : null;\n    let value = path ? Polymer.Path.get(inst, path) : inst.__data[property];\n    if (path && value === undefined) {\n      value = props[property];  // specifically for .splices\n    }\n    dispatchNotifyEvent(inst, info.eventName, value, path);\n  }\n\n  /**\n   * Adds a 2-way binding notification event listener to the node specified\n   *\n   * @param {Object} node Child element to add listener to\n   * @param {Object} inst Host element instance to handle notification event\n   * @param {Object} info Listener metadata stored via addAnnotatedListener\n   * @private\n   */\n  function addNotifyListener(node, inst, info) {\n    node.addEventListener(info.event, function(e) {\n      handleNotification(e, inst, info.property, info.path, info.negate);\n    });\n  }\n\n  /**\n   * Handler function for 2-way notification events. Receives context\n   * information captured in the `addNotifyListener` closure from the\n   * `_bindListeners` metadata.\n   *\n   * Sets the value of the notified property to the host property or path.  If\n   * the event contained path information, translate that path to the host\n   * scope's name for that path first.\n   *\n   * @param {Event} e Notification event (e.g. '<property>-changed')\n   * @param {Object} inst Host element instance handling the notification event\n   * @param {string} property Child element property that was bound\n   * @param {string} path Host property/path that was bound\n   * @param {boolean} negate Whether the binding was negated\n   * @private\n   */\n  function handleNotification(e, inst, property, path, negate) {\n    let value;\n    let targetPath = e.detail && e.detail.path;\n    if (targetPath) {\n      path = Polymer.Path.translate(property, path, targetPath);\n      value = e.detail && e.detail.value;\n    } else {\n      value = e.target[property];\n    }\n    value = negate ? !value : value;\n    setPropertyFromNotification(inst, path, value, e);\n  }\n\n  /**\n   * Called by 2-way binding notification event listeners to set a property\n   * or path to the host based on a notification from a bound child.\n   *\n   * @param {string} path Path on this instance to set\n   * @param {*} value Value to set to given path\n   * @protected\n   */\n  function setPropertyFromNotification(inst, path, value, event) {\n    let detail = event.detail;\n    if (detail && detail.queueProperty) {\n      if (!inst.__readOnly || !inst.__readOnly[path]) {\n        inst._setPendingPropertyOrPath(path, value, Boolean(detail.path));\n      }\n    } else {\n      inst.set(path, value);\n    }\n  }\n\n  /**\n   * Implements the \"reflect\" effect.\n   *\n   * Sets the attribute named `info.attrName` to the given property value.\n   *\n   * @param {Object} inst The instance the effect will be run on\n   * @param {string} property Name of property\n   * @param {*} value Current value of property\n   * @param {*} old Previous value of property\n   * @param {Object} info Effect metadata\n   * @private\n   */\n  function runReflectEffect(inst, property, props, oldProps, info) {\n    let value = inst.__data[property];\n    if (Polymer.sanitizeDOMValue) {\n      value = Polymer.sanitizeDOMValue(value, info.attrName, 'attribute', inst);\n    }\n    inst._propertyToAttribute(property, info.attrName, value);\n  }\n\n  /**\n   * Runs \"computed\" effects for a set of changed properties.\n   *\n   * This method differs from the generic `runEffects` method in that it\n   * continues to run computed effects based on the output of each pass until\n   * there are no more newly computed properties.  This ensures that all\n   * properties that will be computed by the initial set of changes are\n   * computed before other effects (binding propagation, observers, and notify)\n   * run.\n   *\n   * @param {Element} inst The instance the effect will be run on\n   * @param {Object} changedProps Bag of changed properties\n   * @param {Object} oldProps Bag of previous values for changed properties\n   * @return {Object | null | undefined} Bag of newly computed properties from \"computed\" effects\n   */\n  function runComputedEffects(inst, changedProps, oldProps, fromAbove, hasPaths) {\n    let computeEffects = inst.__computeEffects;\n    if (computeEffects) {\n      let inputProps = changedProps;\n      let computedProps;\n      while (runEffects(inst, computeEffects, inputProps, fromAbove, hasPaths)) {\n        mixin(oldProps, inst.__dataOld);\n        mixin(changedProps, inst.__dataPending);\n        computedProps = mixin(computedProps || {}, inst.__dataPending);\n        inputProps = inst.__dataPending;\n        inst.__dataPending = null;\n      }\n      return computedProps;\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * Implements the \"computed property\" effect by running the method with the\n   * values of the arguments specified in the `info` object and setting the\n   * return value to the computed property specified.\n   *\n   * @param {Object} inst The instance the effect will be run on\n   * @param {string} property Name of property\n   * @param {*} value Current value of property\n   * @param {*} old Previous value of property\n   * @param {Object} info Effect metadata\n   * @private\n   */\n  function runComputedEffect(inst, property, props, oldProps, info) {\n    var result = runMethodEffect(inst, property, props, oldProps, info);\n    var computedProp = info.methodInfo;\n    if (inst.__propertyEffects && inst.__propertyEffects[computedProp]) {\n      inst._setPendingProperty(computedProp, result);\n    } else {\n      inst[computedProp] = result;\n    }\n  }\n\n  /**\n   * Computes path changes based on path links set up using the `linkPaths`\n   * API.\n   *\n   * @param {Element} inst The instance whose props are changing\n   * @param {Object} changedProps Bag of changed properties\n   * @param {Object | undefined} computedProps Bag of properties newly computed this turn\n   *   via \"computed\" effects; any linked paths generated via this method\n   *   will be added both to the set of `changedProps` as well as to the\n   *   set of `computedProps`; this is because the `fromAbove: true` case will\n   *   notify only from the `computedProps` bag.\n   * @return {Object | undefined}\n   * @private\n   */\n  function computeLinkedPaths(inst, changedProps, computedProps, hasPaths) {\n    let links;\n    if (hasPaths && (links = inst.__dataLinkedPaths)) {\n      const cache = inst.__dataTemp;\n      computedProps = computedProps || {};\n      let link;\n      for (let a in links) {\n        let b = links[a];\n        for (let path in changedProps) {\n          if (Polymer.Path.isDescendant(a, path)) {\n            link = Polymer.Path.translate(a, b, path);\n            cache[link] = changedProps[link] = computedProps[link] = changedProps[path];\n          } else if (Polymer.Path.isDescendant(b, path)) {\n            link = Polymer.Path.translate(b, a, path);\n            cache[link] = changedProps[link] = computedProps[link] = changedProps[path];\n          }\n        }\n      }\n    }\n    return computedProps;\n  }\n\n  // -- bindings ----------------------------------------------\n\n  /**\n   * Adds \"binding\" property effects for the template annotation\n   * (\"note\" for short) and node index specified.  These may either be normal\n   * \"binding\" effects (property/path bindings) or \"method binding\"\n   * effects, aka inline computing functions, depending on the type of binding\n   * detailed in the note.\n   *\n   * @param {Object} model Prototype or instance\n   * @param {Object} note Annotation note returned from Annotator\n   * @param {number} index Index into `_templateNodes` list of annotated nodes that the\n   *   note applies to\n   * @param {Object=} dynamicFns Map indicating whether method names should\n   *   be included as a dependency to the effect.\n   * @private\n   */\n  function addBindingEffect(model, note, index, dynamicFns) {\n    for (let i=0; i<note.parts.length; i++) {\n      let part = note.parts[i];\n      if (part.signature) {\n        addMethodBindingEffect(model, note, part, index, dynamicFns);\n      } else if (!part.literal) {\n        if (note.kind === 'attribute' && note.name[0] === '-') {\n          console.warn('Cannot set attribute ' + note.name +\n            ' because \"-\" is not a valid attribute starting character');\n        } else {\n          model._addPropertyEffect(Polymer.Path.root(part.value), TYPES.PROPAGATE, {\n            fn: runBindingEffect,\n            info:  {\n              kind: note.kind,\n              index: index,\n              name: note.name,\n              propertyName: note.propertyName,\n              value: part.value,\n              isCompound: note.isCompound,\n              compoundIndex: part.compoundIndex,\n              event: part.event,\n              customEvent: part.customEvent,\n              negate: part.negate\n            }\n          });\n        }\n      }\n    }\n  }\n\n  /**\n   * Implements the \"binding\" (property/path binding) effect.\n   *\n   * @param {Element} inst The instance the effect will be run on\n   * @param {string} path Name of property\n   * @param {*} value Current value of property\n   * @param {*} old Previous value of property\n   * @param {Object} info Effect metadata\n   * @private\n   */\n  function runBindingEffect(inst, path, props, oldProps, info, fromAbove, hasPaths) {\n    let value;\n    let node = inst._templateNodes[info.index];\n    // Subpath notification: transform path and set to client\n    // e.g.: foo=\"{{obj.sub}}\", path: 'obj.sub.prop', set 'foo.prop'=obj.sub.prop\n    if (hasPaths && (path.length > info.value.length) &&\n        (info.kind == 'property') && !info.isCompound &&\n        node.__propertyEffects && node.__propertyEffects[info.name]) {\n      let value = props[path];\n      path = Polymer.Path.translate(info.value, info.name, path);\n      if (node._setPendingPropertyOrPath(path, value, true)) {\n        inst._enqueueClient(node);\n      }\n    } else {\n      // Root or deeper path was set; extract bound path value\n      // e.g.: foo=\"{{obj.sub}}\", path: 'obj', set 'foo'=obj.sub\n      //   or: foo=\"{{obj.sub}}\", path: 'obj.sub.prop', set 'foo'=obj.sub\n      if (path != info.value) {\n        value = Polymer.Path.get(inst, info.value);\n      } else {\n        if (hasPaths && Polymer.Path.isPath(path)) {\n          value = Polymer.Path.get(inst, path);\n        } else {\n          value = inst.__data[path];\n        }\n      }\n      // Propagate value to child\n      applyBindingValue(inst, info, value);\n    }\n  }\n\n  /**\n   * Sets the value for an \"binding\" (binding) effect to a node,\n   * either as a property or attribute.\n   *\n   * @param {Object} inst The instance owning the binding effect\n   * @param {Object} info Effect metadata\n   * @param {*} value Value to set\n   * @private\n   */\n  function applyBindingValue(inst, info, value) {\n    let node = inst._templateNodes[info.index];\n    value = computeBindingValue(node, value, info);\n    if (Polymer.sanitizeDOMValue) {\n      value = Polymer.sanitizeDOMValue(value, info.name, info.kind, node);\n    }\n    if (info.kind == 'attribute') {\n      // Attribute binding\n      inst._valueToNodeAttribute(node, value, info.name);\n    } else {\n      // Property binding\n      let prop = info.name;\n      if (node.__propertyEffects && node.__propertyEffects[prop]) {\n        if (!node.__readOnly || !node.__readOnly[prop]) {\n          if (node._setPendingProperty(prop, value)) {\n            inst._enqueueClient(node);\n          }\n        }\n      } else  {\n        inst._setUnmanagedPropertyToNode(node, prop, value);\n      }\n    }\n  }\n\n  /**\n   * Transforms an \"binding\" effect value based on compound & negation\n   * effect metadata, as well as handling for special-case properties\n   *\n   * @param {Node} node Node the value will be set to\n   * @param {*} value Value to set\n   * @param {Object} info Effect metadata\n   * @return {*} Transformed value to set\n   * @private\n   */\n  function computeBindingValue(node, value, info) {\n    if (info.negate) {\n      value = !value;\n    }\n    if (info.isCompound) {\n      let storage = node.__dataCompoundStorage[info.name];\n      storage[info.compoundIndex] = value;\n      value = storage.join('');\n    }\n    if (info.kind !== 'attribute') {\n      // Some browsers serialize `undefined` to `\"undefined\"`\n      if (info.name === 'textContent' ||\n          (node.localName == 'input' && info.name == 'value')) {\n        value = value == undefined ? '' : value;\n      }\n    }\n    return value;\n  }\n\n  /**\n   * Adds \"binding method\" property effects for the template binding\n   * (\"note\" for short), part metadata, and node index specified.\n   *\n   * @param {Object} model Prototype or instance\n   * @param {Object} note Binding note returned from Annotator\n   * @param {Object} part The compound part metadata\n   * @param {number} index Index into `_templateNodes` list of annotated nodes that the\n   *   note applies to\n   * @param {Object=} dynamicFns Map indicating whether method names should\n   *   be included as a dependency to the effect.\n   * @private\n   */\n  function addMethodBindingEffect(model, note, part, index, dynamicFns) {\n    createMethodEffect(model, part.signature, TYPES.PROPAGATE,\n      runMethodBindingEffect, {\n        index: index,\n        isCompound: note.isCompound,\n        compoundIndex: part.compoundIndex,\n        kind: note.kind,\n        name: note.name,\n        negate: part.negate,\n        part: part\n      }, dynamicFns\n    );\n  }\n\n  /**\n   * Implements the \"binding method\" (inline computed function) effect.\n   *\n   * Runs the method with the values of the arguments specified in the `info`\n   * object and setting the return value to the node property/attribute.\n   *\n   * @param {Object} inst The instance the effect will be run on\n   * @param {string} property Name of property\n   * @param {*} value Current value of property\n   * @param {*} old Previous value of property\n   * @param {Object} info Effect metadata\n   * @private\n   */\n  function runMethodBindingEffect(inst, property, props, oldProps, info) {\n    let val = runMethodEffect(inst, property, props, oldProps, info);\n    applyBindingValue(inst, info.methodInfo, val);\n  }\n\n  /**\n   * Post-processes template bindings (notes for short) provided by the\n   * Bindings library for use by the effects system:\n   * - Parses bindings for methods into method `signature` objects\n   * - Memoizes the root property for path bindings\n   * - Recurses into nested templates and processes those templates and\n   *   extracts any host properties, which are set to the template's\n   *   `_content._hostProps`\n   * - Adds bindings from the host to <template> elements for any nested\n   *   template's lexically bound \"host properties\"; template handling\n   *   elements can then add accessors to the template for these properties\n   *   to forward host properties into template instances accordingly.\n   *\n   * @param {Array<Object>} notes List of notes to process; the notes are\n   *   modified in place.\n   * @private\n   */\n  function processAnnotations(notes) {\n    if (!notes._processed) {\n      for (let i=0; i<notes.length; i++) {\n        let note = notes[i];\n        // Parse bindings for methods & path roots (models)\n        for (let j=0; j<note.bindings.length; j++) {\n          let b = note.bindings[j];\n          for (let k=0; k<b.parts.length; k++) {\n            let p = b.parts[k];\n            if (!p.literal) {\n              p.signature = parseMethod(p.value);\n              if (!p.signature) {\n                p.rootProperty = Polymer.Path.root(p.value);\n              }\n            }\n          }\n        }\n        // Recurse into nested templates & bind host props\n        if (note.templateContent) {\n          processAnnotations(note.templateContent._notes);\n          let hostProps = note.templateContent._hostProps =\n            discoverTemplateHostProps(note.templateContent._notes);\n          let bindings = [];\n          for (let prop in hostProps) {\n            bindings.push({\n              index: note.index,\n              kind: 'property',\n              name: '_host_' + prop,\n              parts: [{\n                mode: '{',\n                value: prop\n              }]\n            });\n          }\n          note.bindings = note.bindings.concat(bindings);\n        }\n      }\n      notes._processed = true;\n    }\n  }\n\n  /**\n   * Finds all property usage in templates (property/path bindings and function\n   * arguments) and returns the path roots as keys in a map. Each outer template\n   * merges inner _hostProps to propagate inner host property needs to outer\n   * templates.\n   *\n   * @param {Array<Object>} notes List of notes to process for a given template\n   * @return {Object<string,boolean>} Map of host properties that the template\n   *   (or any nested templates) uses\n   * @private\n   */\n  function discoverTemplateHostProps(notes) {\n    let hostProps = {};\n    for (let i=0, n; (i<notes.length) && (n=notes[i]); i++) {\n      // Find all bindings to parent.* and spread them into _parentPropChain\n      for (let j=0, b$=n.bindings, b; (j<b$.length) && (b=b$[j]); j++) {\n        for (let k=0, p$=b.parts, p; (k<p$.length) && (p=p$[k]); k++) {\n          if (p.signature) {\n            let args = p.signature.args;\n            for (let kk=0; kk<args.length; kk++) {\n              let rootProperty = args[kk].rootProperty;\n              if (rootProperty) {\n                hostProps[rootProperty] = true;\n              }\n            }\n            hostProps[p.signature.methodName] = true;\n          } else {\n            if (p.rootProperty) {\n              hostProps[p.rootProperty] = true;\n            }\n          }\n        }\n      }\n      // Merge child _hostProps into this _hostProps\n      if (n.templateContent) {\n        let templateHostProps = n.templateContent._hostProps;\n        Polymer.Base.mixin(hostProps, templateHostProps);\n      }\n    }\n    return hostProps;\n  }\n\n  /**\n   * Returns true if a binding's metadata meets all the requirements to allow\n   * 2-way binding, and therefore a <property>-changed event listener should be\n   * added:\n   * - used curly braces\n   * - is a property (not attribute) binding\n   * - is not a textContent binding\n   * - is not compound\n   *\n   * @param {Object} binding Binding metadata\n   * @return {boolean} True if 2-way listener should be added\n   * @private\n   */\n  function shouldAddListener(binding) {\n    return binding.name &&\n           binding.kind != 'attribute' &&\n           binding.kind != 'text' &&\n           !binding.isCompound &&\n           binding.parts[0].mode === '{';\n  }\n\n  /**\n   * Sets up a prototypical `_bindListeners` metadata array to be used at\n   * instance time to add event listeners for 2-way bindings.\n   *\n   * @param {Object} model Prototype (instances not currently supported)\n   * @param {number} index Index into `_templateNodes` list of annotated nodes that the\n   *   event should be added to\n   * @param {string} property Property of target node to listen for changes\n   * @param {string} path Host path that the change should be propagated to\n   * @param {string=} event A custom event name to listen for (e.g. via the\n   *   `{{prop::eventName}}` syntax)\n   * @param {boolean=} negate Whether the notified value should be negated before\n   *   setting to host path\n   * @private\n   */\n  function addAnnotatedListener(model, index, property, path, event, negate) {\n    if (!model._bindListeners) {\n      model._bindListeners = [];\n    }\n    let eventName = event ||\n      (CaseMap.camelToDashCase(property) + '-changed');\n    model._bindListeners.push({\n      index: index,\n      property: property,\n      path: path,\n      event: eventName,\n      negate: negate\n    });\n  }\n\n  /**\n   * Adds all 2-way binding notification listeners to a host based on\n   * `_bindListeners` metadata recorded by prior calls to`addAnnotatedListener`\n   *\n   * @param {Object} inst Host element instance\n   * @private\n   */\n  function setupBindListeners(inst) {\n    let b$ = inst._bindListeners;\n    for (let i=0, l=b$.length, info; (i<l) && (info=b$[i]); i++) {\n      let node = inst._templateNodes[info.index];\n      addNotifyListener(node, inst, info);\n    }\n  }\n\n  /**\n   * On the `inst` element that was previously bound, uses `inst._templateNotes`\n   * to setup compound binding storage structures onto the bound\n   * nodes (`inst._templateNodes`).\n   * (`inst._, and 2-way binding event listeners are also added.)\n   *\n   * @param {Object} inst Instance that bas been previously bound\n   * @private\n   */\n  function setupBindings(inst) {\n    let notes = inst._templateNotes;\n    if (notes.length) {\n      for (let i=0; i < notes.length; i++) {\n        let note = notes[i];\n        let node = inst._templateNodes[i];\n        node.__dataHost = inst;\n        if (note.bindings) {\n          setupCompoundBinding(note, node);\n        }\n      }\n    }\n    if (inst._bindListeners) {\n      setupBindListeners(inst);\n    }\n  }\n\n  // -- for method-based effects (complexObserver & computed) --------------\n\n  /**\n   * Adds property effects for each argument in the method signature (and\n   * optionally, for the method name if `dynamic` is true) that calls the\n   * provided effect function.\n   *\n   * @param {Element | Object} model Prototype or instance\n   * @param {Object} sig Method signature metadata\n   * @param {string} type\n   * @param {Function} effectFn Function to run when arguments change\n   * @param {*=} methodInfo\n   * @param {Object=} dynamicFns Map indicating whether method names should\n   *   be included as a dependency to the effect.\n   * @private\n   */\n  function createMethodEffect(model, sig, type, effectFn, methodInfo, dynamicFns) {\n    let dynamicFn = sig.static || dynamicFns && dynamicFns[sig.methodName];\n    let info = {\n      methodName: sig.methodName,\n      args: sig.args,\n      methodInfo,\n      dynamicFn\n    };\n    for (let i=0, arg; (i<sig.args.length) && (arg=sig.args[i]); i++) {\n      if (!arg.literal) {\n        model._addPropertyEffect(arg.rootProperty, type, {\n          fn: effectFn, info: info, trigger: arg\n        });\n      }\n    }\n    if (dynamicFn) {\n      model._addPropertyEffect(sig.methodName, type, {\n        fn: effectFn, info: info\n      });\n    }\n  }\n\n  /**\n   * Calls a method with arguments marshaled from properties on the instance\n   * based on the method signature contained in the effect metadata.\n   *\n   * Multi-property observers, computed properties, and inline computing\n   * functions call this function to invoke the method, then use the return\n   * value accordingly.\n   *\n   * @param {Object} inst The instance the effect will be run on\n   * @param {string} property Name of property\n   * @param {*} value Current value of property\n   * @param {*} old Previous value of property\n   * @param {Object} info Effect metadata\n   * @private\n   */\n  function runMethodEffect(inst, property, props, oldProps, info) {\n    // Instances can optionally have a _methodHost which allows redirecting where\n    // to find methods. Currently used by `templatize`.\n    let context = inst._methodHost || inst;\n    let fn = context[info.methodName];\n    if (fn) {\n      let args = marshalArgs(inst.__data, info.args, property, props);\n      return fn.apply(context, args);\n    } else if (!info.dynamicFn) {\n      console.warn('method `' + info.methodName + '` not defined');\n    }\n  }\n\n  const emptyArray = [];\n\n  /**\n   * Parses an expression string for a method signature, and returns a metadata\n   * describing the method in terms of `methodName`, `static` (whether all the\n   * arguments are literals), and an array of `args`\n   *\n   * @param {string} expression The expression to parse\n   * @return {?Object} The method metadata object if a method expression was\n   *   found, otherwise `undefined`\n   * @private\n   */\n  function parseMethod(expression) {\n    // tries to match valid javascript property names\n    let m = expression.match(/([^\\s]+?)\\(([\\s\\S]*)\\)/);\n    if (m) {\n      let sig = { methodName: m[1], static: true };\n      if (m[2].trim()) {\n        // replace escaped commas with comma entity, split on un-escaped commas\n        let args = m[2].replace(/\\\\,/g, '&comma;').split(',');\n        return parseArgs(args, sig);\n      } else {\n        sig.args = emptyArray;\n        return sig;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Parses an array of arguments and sets the `args` property of the supplied\n   * signature metadata object. Sets the `static` property to false if any\n   * argument is a non-literal.\n   *\n   * @param {Array<string>} argList Array of argument names\n   * @param {Object} sig Method signature metadata object\n   * @return {Object} The updated signature metadata object\n   * @private\n   */\n  function parseArgs(argList, sig) {\n    sig.args = argList.map(function(rawArg) {\n      let arg = parseArg(rawArg);\n      if (!arg.literal) {\n        sig.static = false;\n      }\n      return arg;\n    }, this);\n    return sig;\n  }\n\n  /**\n   * Parses an individual argument, and returns an argument metadata object\n   * with the following fields:\n   *\n   *   {\n   *     value: 'prop',        // property/path or literal value\n   *     literal: false,       // whether argument is a literal\n   *     structured: false,    // whether the property is a path\n   *     rootProperty: 'prop', // the root property of the path\n   *     wildcard: false       // whether the argument was a wildcard '.*' path\n   *   }\n   *\n   * @param {string} rawArg The string value of the argument\n   * @return {Object} Argument metadata object\n   * @private\n   */\n  function parseArg(rawArg) {\n    // clean up whitespace\n    let arg = rawArg.trim()\n      // replace comma entity with comma\n      .replace(/&comma;/g, ',')\n      // repair extra escape sequences; note only commas strictly need\n      // escaping, but we allow any other char to be escaped since its\n      // likely users will do this\n      .replace(/\\\\(.)/g, '\\$1')\n      ;\n    // basic argument descriptor\n    let a = {\n      name: arg\n    };\n    // detect literal value (must be String or Number)\n    let fc = arg[0];\n    if (fc === '-') {\n      fc = arg[1];\n    }\n    if (fc >= '0' && fc <= '9') {\n      fc = '#';\n    }\n    switch(fc) {\n      case \"'\":\n      case '\"':\n        a.value = arg.slice(1, -1);\n        a.literal = true;\n        break;\n      case '#':\n        a.value = Number(arg);\n        a.literal = true;\n        break;\n    }\n    // if not literal, look for structured path\n    if (!a.literal) {\n      a.rootProperty = Polymer.Path.root(arg);\n      // detect structured path (has dots)\n      a.structured = Polymer.Path.isDeep(arg);\n      if (a.structured) {\n        a.wildcard = (arg.slice(-2) == '.*');\n        if (a.wildcard) {\n          a.name = arg.slice(0, -2);\n        }\n      }\n    }\n    return a;\n  }\n\n  /**\n   * Gather the argument values for a method specified in the provided array\n   * of argument metadata.\n   *\n   * The `path` and `value` arguments are used to fill in wildcard descriptor\n   * when the method is being called as a result of a path notification.\n   *\n   * @param {Object} data Instance data storage object to read properties from\n   * @param {Array<Object>} args Array of argument metadata\n   * @return {Array<*>} Array of argument values\n   * @private\n   */\n  function marshalArgs(data, args, path, props) {\n    let values = [];\n    for (let i=0, l=args.length; i<l; i++) {\n      let arg = args[i];\n      let name = arg.name;\n      let v;\n      if (arg.literal) {\n        v = arg.value;\n      } else {\n        if (arg.structured) {\n          v = Polymer.Path.get(data, name);\n          // when data is not stored e.g. `splices`\n          if (v === undefined) {\n            v = props[name];\n          }\n        } else {\n          v = data[name];\n        }\n      }\n      if (arg.wildcard) {\n        // Only send the actual path changed info if the change that\n        // caused the observer to run matched the wildcard\n        let baseChanged = (name.indexOf(path + '.') === 0);\n        let matches = (path.indexOf(name) === 0 && !baseChanged);\n        values[i] = {\n          path: matches ? path : name,\n          value: matches ? props[path] : v,\n          base: v\n        };\n      } else {\n        values[i] = v;\n      }\n    }\n    return values;\n  }\n\n  /**\n   * Initializes `__dataCompoundStorage` local storage on a bound node with\n   * initial literal data for compound bindings, and sets the joined\n   * literal parts to the bound property.\n   *\n   * When changes to compound parts occur, they are first set into the compound\n   * storage array for that property, and then the array is joined to result in\n   * the final value set to the property/attribute.\n   *\n   * @param {Object} note Annotation metadata\n   * @param {Node} node Bound node to initialize\n   * @private\n   */\n  function setupCompoundBinding(note, node) {\n    let bindings = note.bindings;\n    for (let i=0; i<bindings.length; i++) {\n      let binding = bindings[i];\n      if (binding.isCompound) {\n        // Create compound storage map\n        let storage = node.__dataCompoundStorage ||\n          (node.__dataCompoundStorage = {});\n        let parts = binding.parts;\n        // Copy literals from parts into storage for this binding\n        let literals = new Array(parts.length);\n        for (let j=0; j<parts.length; j++) {\n          literals[j] = parts[j].literal;\n        }\n        let name = binding.name;\n        storage[name] = literals;\n        // Configure properties with their literal parts\n        if (binding.literal && binding.kind == 'property') {\n          node[name] = binding.literal;\n        }\n      }\n    }\n  }\n\n  // data api\n\n  /**\n   * Sends array splice notifications (`.splices` and `.length`)\n   *\n   * Note: this implementation only accepts normalized paths\n   *\n   * @param {Element} inst Instance to send notifications to\n   * @param {Array} array The array the mutations occurred on\n   * @param {string} path The path to the array that was mutated\n   * @param {Array} splices Array of splice records\n   * @private\n   */\n  function notifySplices(inst, array, path, splices) {\n    let splicesPath = path + '.splices';\n    inst.notifyPath(splicesPath, { indexSplices: splices });\n    inst.notifyPath(path + '.length', array.length);\n    // Null here to allow potentially large splice records to be GC'ed.\n    inst.__data[splicesPath] = {indexSplices: null};\n  }\n\n  /**\n   * Creates a splice record and sends an array splice notification for\n   * the described mutation\n   *\n   * Note: this implementation only accepts normalized paths\n   *\n   * @param {Element} inst Instance to send notifications to\n   * @param {Array} array The array the mutations occurred on\n   * @param {string} path The path to the array that was mutated\n   * @param {number} index Index at which the array mutation occurred\n   * @param {number} addedCount Number of added items\n   * @param {Array} removed Array of removed items\n   * @private\n   */\n  function notifySplice(inst, array, path, index, addedCount, removed) {\n    notifySplices(inst, array, path, [{\n      index: index,\n      addedCount: addedCount,\n      removed: removed,\n      object: array,\n      type: 'splice'\n    }]);\n  }\n\n  /**\n   * Returns an upper-cased version of the string.\n   *\n   * @param {string} name String to uppercase\n   * @return {string} Uppercased string\n   * @private\n   */\n  function upper(name) {\n    return name[0].toUpperCase() + name.substring(1);\n  }\n\n  Polymer.PropertyEffects = Polymer.dedupingMixin(function(superClass) {\n\n    const mixin = Polymer.TemplateStamp(Polymer.PropertyAccessors(superClass));\n\n    /**\n     * @unrestricted\n     */\n    class PropertyEffects extends mixin {\n\n      get PROPERTY_EFFECT_TYPES() {\n        return TYPES;\n      }\n\n      _initializeProperties() {\n        super._initializeProperties();\n        this.__dataInitialized = false;\n        this.__dataPendingClients = null;\n        this.__dataFromAbove = false;\n        this.__dataLinkedPaths = null;\n        this.__dataHasPaths = false;\n        // May be set on instance prior to upgrade\n        this.__dataCompoundStorage = this.__dataCompoundStorage || null;\n        this.__dataHost = this.__dataHost || null;\n        this.__dataTemp = {};\n        // update instance properties\n        for (let p in this.__propertyEffects) {\n          if (this.hasOwnProperty(p)) {\n            let value = this[p];\n            delete this[p];\n            this[p] = value;\n          }\n        }\n      }\n\n      _initializeProtoProperties(props) {\n        this.__data = Object.create(props);\n        this.__dataPending = Object.create(props);\n        this.__dataOld = {};\n      }\n\n      // Prototype setup ----------------------------------------\n\n      /**\n       * Ensures an accessor exists for the specified property, and adds\n       * to a list of \"property effects\" that will run when the accessor for\n       * the specified property is set.  Effects are grouped by \"type\", which\n       * roughly corresponds to a phase in effect processing.  The effect\n       * metadata should be in the following form:\n       *\n       *   {\n       *     fn: effectFunction, // Reference to function to call to perform effect\n       *     info: { ... }       // Effect metadata passed to function\n       *     // path: '...'      // Will be set by this method based on path arg\n       *   }\n       *\n       * Effect functions are called with the following signature:\n       *\n       *   effectFunction(inst, property, currentValue, oldValue, info)\n       *\n       * This method may be called either on the prototype of a class\n       * using the PropertyEffects mixin (for best performance), or on\n       * an instance to add dynamic effects.  When called on an instance or\n       * subclass of a class that has already had property effects added to\n       * its prototype, the property effect lists will be cloned and added as\n       * own properties of the caller.\n       *\n       * @param {string} path Property (or path) that should trigger the effect\n       * @param {string} type Effect type, from this.PROPERTY_EFFECT_TYPES\n       * @param {Object=} effect Effect metadata object\n       * @protected\n       */\n      _addPropertyEffect(property, type, effect) {\n        let effects = ensureOwnEffectMap(this, TYPES.ANY)[property];\n        if (!effects) {\n          effects = this.__propertyEffects[property] = [];\n          this._createPropertyAccessor(property,\n            type == TYPES.READ_ONLY);\n        }\n        // effects are accumulated into arrays per property based on type\n        if (effect) {\n          effects.push(effect);\n        }\n        effects = ensureOwnEffectMap(this, type)[property];\n        if (!effects) {\n          effects = this[type][property] = [];\n        }\n        effects.push(effect);\n      }\n\n      /**\n       * Returns whether the current prototype/instance has a property effect\n       * of a certain type.\n       *\n       * @param {string} property Property name\n       * @param {string=} type Effect type, from this.PROPERTY_EFFECT_TYPES\n       * @return {boolean} True if the prototype/instance has an effect of this type\n       * @protected\n       */\n      _hasPropertyEffect(property, type) {\n        let effects = this[type || TYPES.ANY];\n        return Boolean(effects && effects[property]);\n      }\n\n      /**\n       * Returns whether the current prototype/instance has a \"read only\"\n       * accessor for the given property.\n       *\n       * @param {string} property Property name\n       * @return {boolean} True if the prototype/instance has an effect of this type\n       * @protected\n       */\n      _hasReadOnlyEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.READ_ONLY);\n      }\n\n      /**\n       * Returns whether the current prototype/instance has a \"notify\"\n       * property effect for the given property.\n       *\n       * @param {string} property Property name\n       * @return {boolean} True if the prototype/instance has an effect of this type\n       * @protected\n       */\n      _hasNotifyEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.NOTIFY);\n      }\n\n      /**\n       * Returns whether the current prototype/instance has a \"reflect to attribute\"\n       * property effect for the given property.\n       *\n       * @param {string} property Property name\n       * @return {boolean} True if the prototype/instance has an effect of this type\n       * @protected\n       */\n      _hasReflectEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.REFLECT);\n      }\n\n      /**\n       * Returns whether the current prototype/instance has a \"computed\"\n       * property effect for the given property.\n       *\n       * @param {string} property Property name\n       * @return {boolean} True if the prototype/instance has an effect of this type\n       * @protected\n       */\n      _hasComputedEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.COMPUTE);\n      }\n\n      // Runtime ----------------------------------------\n\n      /**\n       * Sets a pending property or path.  If the root property of the path in\n       * question had no accessor, the path is set, otherwise it is enqueued\n       * via `_setPendingProperty`.\n       *\n       * This function isolates relatively expensive functionality necessary\n       * for the public API (`set`, `setProperties`, `notifyPath`, and property\n       * change listeners via {{...}} bindings), such that it is only done\n       * when paths enter the system, and not at every propagation step.  It\n       * also sets a `__dataHasPaths` flag on the instance which is used to\n       * fast-path slower path-matching code in the property effects host paths.\n       *\n       * `path` can be a path string or array of path parts as accepted by the\n       * public API.\n       *\n       * @param {string | !Array<number|string>} path Path to set\n       * @param {*} value Value to set\n       * @param {boolean=} isPathNotification If the path being set is a path\n       *   notification of an already changed value, as opposed to a request\n       *   to set and notify the change.  In the latter `false` case, a dirty\n       *   check is performed and then the value is set to the path before\n       *   enqueuing the pending property change.\n       * @return {boolean} Returns true if the property/path was enqueued in\n       *   the pending changes bag.\n       * @protected\n       */\n      _setPendingPropertyOrPath(path, value, isPathNotification) {\n        let rootProperty = Polymer.Path.root(Array.isArray(path) ? path[0] : path);\n        let hasEffect = this.__propertyEffects && this.__propertyEffects[rootProperty];\n        let isPath = (rootProperty !== path);\n        if (hasEffect) {\n          if (isPath) {\n            if (!isPathNotification) {\n              // Dirty check changes being set to a path against the actual object,\n              // since this is the entry point for paths into the system; from here\n              // the only dirty checks are against the `__dataTemp` cache to prevent\n              // duplicate work in the same turn only. Note, if this was a notification\n              // of a change already set to a path (isPathNotification: true),\n              // we always let the change through and skip the `set` since it was\n              // already dirty checked at the point of entry and the underlying\n              // object has already been updated\n              let old = Polymer.Path.get(this, path);\n              path = /** @type {string} */ Polymer.Path.set(this, path, value);\n              // Use property-accessor's simpler dirty check\n              if (!path || !super._shouldPropertyChange(path, value, old)) {\n                return false;\n              }\n            }\n            this.__dataHasPaths = true;\n          }\n          return this._setPendingProperty(path, value);\n        } else {\n          if (isPath) {\n            Polymer.Path.set(this, path, value);\n          } else {\n            this[path] = value;\n          }\n        }\n        return false;\n      }\n\n      /**\n       * Applies a value to a non-Polymer element/node's property.\n       *\n       * The implementation makes a best-effort at binding interop:\n       * Some native element properties have side-effects when\n       * re-setting the same value (e.g. setting <input>.value resets the\n       * cursor position), so we do a dirty-check before setting the value.\n       * However, for better interop with non-Polymer custom elements that\n       * accept objects, we explicitly re-set object changes coming from the\n       * Polymer world (which may include deep object changes without the\n       * top reference changing), erring on the side of providing more\n       * information.\n       *\n       * Users may override this method to provide alternate approaches.\n       *\n       * @param {Node} node The node to set a property on\n       * @param {string} prop The property to set\n       * @param {*} value The value to set\n       */\n      _setUnmanagedPropertyToNode(node, prop, value) {\n        // It is a judgment call that resetting primitives is\n        // \"bad\" and resettings objects is also \"good\"; alternatively we could\n        // implement a whitelist of tag & property values that should never\n        // be reset (e.g. <input>.value && <select>.value)\n        if (value !== node[prop] || typeof value == 'object') {\n          node[prop] = value;\n        }\n      }\n\n      /**\n       * Overrides the `PropertyAccessors` implementation to introduce special\n       * dirty check logic depending on the property & value being set:\n       *\n       * 1. Any value set to a path (e.g. 'obj.prop': 42 or 'obj.prop': {...})\n       *    Stored in `__dataTemp`, dirty checked against `__dataTemp`\n       * 2. Object set to simple property (e.g. 'prop': {...})\n       *    Stored in `__dataTemp` and `__data`, dirty checked against\n       *    `__dataTemp` by default implementation of `_shouldPropertyChange`\n       * 3. Primitive value set to simple property (e.g. 'prop': 42)\n       *    Stored in `__data`, dirty checked against `__data`\n       *\n       * The dirty-check is important to prevent cycles due to two-way\n       * notification, but paths and objects are only dirty checked against any\n       * previous value set during this turn via a \"temporary cache\" that is\n       * cleared when the last `_propertiesChaged` exits. This is so:\n       * a. any cached array paths (e.g. 'array.3.prop') may be invalidated\n       *    due to array mutations like shift/unshift/splice; this is fine\n       *    since path changes are dirty-checked at user entry points like `set`\n       * b. dirty-checking for objects only lasts one turn to allow the user\n       *    to mutate the object in-place and re-set it with the same identity\n       *    and have all sub-properties re-propagated in a subsequent turn.\n       *\n       * The temp cache is not necessarily sufficient to prevent invalid array\n       * paths, since a splice can happen during the same turn (with pathological\n       * user code); we could introduce a \"fixup\" for temporarily cached array\n       * paths if needed: https://github.com/Polymer/polymer/issues/4227\n       *\n       * @override\n       */\n      _setPendingProperty(property, value) {\n        let isPath = this.__dataHasPaths && Polymer.Path.isPath(property);\n        let prevProps = isPath ? this.__dataTemp : this.__data;\n        if (this._shouldPropertyChange(property, value, prevProps[property])) {\n          if (!this.__dataPending) {\n            this.__dataPending = {};\n            this.__dataOld = {};\n          }\n          // Ensure old is captured from the last turn\n          if (!(property in this.__dataOld)) {\n            this.__dataOld[property] = this.__data[property];\n          }\n          // Paths and objects are stored in temporary cache (cleared at end of\n          // turn), which is used for dirty-checking\n          if (isPath || typeof value == 'object') {\n            this.__dataTemp[property] = value;\n          }\n          // Properties (but not sub-paths) get stored __data cache, used to\n          // return accessor values from getters\n          if (!isPath) {\n            this.__data[property] = value;\n          }\n          // All changes go into pending property bag, passed to _propertiesChanged\n          this.__dataPending[property] = value;\n          return true;\n        }\n      }\n\n      /**\n       * Overrides default PropertyAccessors implementation to pull the value\n       * to dirty check against from the `__dataTemp` cache (rather than the\n       * normal `__data` cache) for Objects.  Since the temp cache is cleared\n       * at the end of a turn, this implementation allows side-effects of deep\n       * object changes to be processed by re-setting the same object (using\n       * the temp cache as a backstop to prevent cycles due to 2-way\n       * notification).\n       *\n       * Override this to provide more strict dirty checking, i.e. immutable\n       * (`value === old`) or based on type.\n       *\n       * @override\n       * @param {string} property\n       * @param {*} value\n       * @param {*} old\n       * @return {boolean}\n       */\n      _shouldPropertyChange(property, value, old) {\n        if (typeof value == 'object') {\n          old = this.__dataTemp[property];\n        }\n        return super._shouldPropertyChange(property, value, old);\n      }\n\n      /**\n       * Overrides PropertyAccessor's default async queuing of\n       * `_propertiesChanged`: if `__dataInitialized` is false (has not yet been\n       * manually flushed), the function no-ops; otherwise flushes\n       * `_propertiesChanged` synchronously.\n       *\n       * @override\n       */\n      _invalidateProperties() {\n        if (this.__dataInitialized) {\n          this._flushProperties();\n        }\n      }\n\n      /**\n       * Enqueues the given client on a list of pending clients, whose\n       * pending property changes can later be flushed via a call to\n       * `_flushClients`.\n       *\n       * @param {Object} client PropertyEffects client to enqueue\n       * @protected\n       */\n      _enqueueClient(client) {\n        this.__dataPendingClients = this.__dataPendingClients || [];\n        if (client !== this) {\n          this.__dataPendingClients.push(client);\n        }\n      }\n\n      /**\n       * Flushes any clients previously enqueued via `_enqueueClient`, causing\n       * their `_flushProperties` method to run.\n       *\n       * @protected\n       */\n      _flushClients() {\n        // Flush all clients\n        let clients = this.__dataPendingClients;\n        if (clients) {\n          this.__dataPendingClients = null;\n          for (let i=0; i < clients.length; i++) {\n            let client = clients[i];\n            if (!client.__dataInitialized || client.__dataPending) {\n              client._flushProperties(true);\n            }\n          }\n        }\n      }\n\n      /**\n       * Sets a bag of property changes to this instance, and\n       * synchronously processes all effects of the properties as a batch.\n       *\n       * Property names must be simple properties, not paths.  Batched\n       * path propagation is not supported.\n       *\n       * @param {Object} props Bag of one or more key-value pairs whose key is\n       *   a property and value is the new value to set for that property.\n       */\n      setProperties(props) {\n        for (let path in props) {\n          if (!this.__readOnly || !this.__readOnly[path]) {\n            //TODO(kschaaf): explicitly disallow paths in setProperty?\n            // wildcard observers currently only pass the first changed path\n            // in the `info` object, and you could do some odd things batching\n            // paths, e.g. {'foo.bar': {...}, 'foo': null}\n            this._setPendingPropertyOrPath(path, props[path]);\n          }\n        }\n        this._invalidateProperties();\n      }\n      /**\n       * Overrides PropertyAccessor's default async queuing of\n       * `_propertiesChanged`, to instead synchronously flush\n       * `_propertiesChanged` unless the `this._asyncEffects` property is true.\n       *\n       * If this is the first time properties are being flushed, the `ready`\n       * callback will be called.\n       *\n       * Also adds an optional `fromAbove` argument to indicate when properties\n       * are being flushed by a host during data propagation. This information\n       * is used to avoid sending upwards notification events in response to\n       * downward data flow.  This is a performance optimization, but also\n       * critical to avoid infinite looping when an object is notified, since\n       * the default implementation of `_shouldPropertyChange` always returns\n       * true for Objects, and without would result in a notify-propagate-notify\n       * loop.\n       *\n       * @param {boolean=} fromAbove When true, sets `this.__dataFromAbove` to\n       *   `true` for the duration of the call to `_propertiesChanged`.\n       * @override\n       */\n      _flushProperties(fromAbove) {\n        if (!this.__dataInitialized) {\n          this.ready();\n        }\n        if (this.__dataPending || this.__dataPendingClients) {\n          this.__dataFromAbove = fromAbove;\n          super._flushProperties();\n          if (!this.__dataCounter) {\n            // Clear temporary cache at end of turn\n            this.__dataTemp = {};\n          }\n        }\n      }\n\n      /**\n       * Polymer-specific lifecycle callback called the first time properties\n       * are being flushed.  Prior to `ready`, all property sets through\n       * accessors are queued and their effects are flushed after this method\n       * returns.\n       *\n       * Users may override this function to implement behavior that is\n       * dependent on the element having its properties initialized, e.g.\n       * from defaults (initialized from `constructor`, `_initializeProperties`),\n       * `attributeChangedCallback`, or binding values propagated from host\n       * \"binding effects\".  `super.ready()` must be called to ensure the\n       * data system becomes enabled.\n       *\n       * @public\n       */\n      ready() {\n        this.__dataInitialized = true;\n      }\n\n      /**\n       * Stamps the provided template and performs instance-time setup for\n       * Polymer template features, including data bindings, declarative event\n       * listeners, and the `this.$` map of `id`'s to nodes.  A document fragment\n       * is returned containing the stamped DOM, ready for insertion into the\n       * DOM.\n       *\n       * Note that for host data to be bound into the stamped DOM, the template\n       * must have been previously bound to the prototype via a call to\n       * `_bindTemplate`, which performs one-time template binding work.\n       *\n       * Note that this method currently only supports being called once per\n       * instance.\n       *\n       * @param {HTMLTemplateElement} template Template to stamp\n       * @return {DocumentFragment} Cloned template content\n       * @protected\n       */\n      _stampTemplate(template) {\n        let dom = super._stampTemplate(template);\n        setupBindings(this);\n        return dom;\n      }\n\n      /**\n       * Implements `PropertyAccessors`'s properties changed callback.\n       *\n       * Runs each class of effects for the batch of changed properties in\n       * a specific order (compute, propagate, reflect, observe, notify).\n       *\n       * @override\n       */\n      _propertiesChanged(currentProps, changedProps, oldProps) {\n        let hasPaths = this.__dataHasPaths;\n        let fromAbove = this.__dataFromAbove;\n        this.__dataHasPaths = this.__dataFromAbove = false;\n        // ----------------------------\n        // let c = Object.getOwnPropertyNames(changedProps || {});\n        // window.debug && console.group(this.localName + '#' + this.id + ': ' + c);\n        // if (window.debug) { debugger; }\n        // ----------------------------\n        // Compute properties\n        let computedProps = runComputedEffects(this, changedProps, oldProps, fromAbove, hasPaths);\n        // Compute linked paths\n        computedProps = computeLinkedPaths(this, changedProps, computedProps, hasPaths);\n        // Propagate properties to clients\n        runEffects(this, this.__propagateEffects, changedProps, oldProps, fromAbove, hasPaths);\n        // Flush clients\n        this._flushClients();\n        // Reflect properties\n        runEffects(this, this.__reflectEffects, changedProps, oldProps, fromAbove, hasPaths);\n        // Observe properties\n        runEffects(this, this.__observeEffects, changedProps, oldProps, fromAbove, hasPaths);\n        // Notify properties to host\n        runNotifyEffects(this, fromAbove ? computedProps : changedProps, oldProps, fromAbove, hasPaths);\n        // ----------------------------\n        // window.debug && console.groupEnd(this.localName + '#' + this.id + ': ' + c);\n        // ----------------------------\n      }\n\n      /**\n       * Aliases one data path as another, such that path notifications from one\n       * are routed to the other.\n       *\n       * @method linkPaths\n       * @param {string | !Array<string|number>} to Target path to link.\n       * @param {string | !Array<string|number>} from Source path to link.\n       * @public\n       */\n      linkPaths(to, from) {\n        to = Polymer.Path.normalize(to);\n        from = Polymer.Path.normalize(from);\n        this.__dataLinkedPaths = this.__dataLinkedPaths || {};\n        this.__dataLinkedPaths[to] = from;\n      }\n\n      /**\n       * Removes a data path alias previously established with `_linkPaths`.\n       *\n       * Note, the path to unlink should be the target (`to`) used when\n       * linking the paths.\n       *\n       * @method unlinkPaths\n       * @param {string | !Array<string|number>} path Target path to unlink.\n       * @public\n       */\n      unlinkPaths(path) {\n        path = Polymer.Path.normalize(path);\n        if (this.__dataLinkedPaths) {\n          delete this.__dataLinkedPaths[path];\n        }\n      }\n\n      /**\n       * Notify that an array has changed.\n       *\n       * Example:\n       *\n       *     this.items = [ {name: 'Jim'}, {name: 'Todd'}, {name: 'Bill'} ];\n       *     ...\n       *     this.items.splice(1, 1, {name: 'Sam'});\n       *     this.items.push({name: 'Bob'});\n       *     this.notifySplices('items', [\n       *       { index: 1, removed: [{name: 'Todd'}], addedCount: 1, obect: this.items, type: 'splice' },\n       *       { index: 3, removed: [], addedCount: 1, object: this.items, type: 'splice'}\n       *     ]);\n       *\n       * @param {string} path Path that should be notified.\n       * @param {Array} splices Array of splice records indicating ordered\n       *   changes that occurred to the array. Each record should have the\n       *   following fields:\n       *    * index: index at which the change occurred\n       *    * removed: array of items that were removed from this index\n       *    * addedCount: number of new items added at this index\n       *    * object: a reference to the array in question\n       *    * type: the string literal 'splice'\n       *\n       *   Note that splice records _must_ be normalized such that they are\n       *   reported in index order (raw results from `Object.observe` are not\n       *   ordered and must be normalized/merged before notifying).\n       * @public\n      */\n      notifySplices(path, splices) {\n        let info = {};\n        let array = /** @type {Array} */(Polymer.Path.get(this, path, info));\n        notifySplices(this, array, info.path, splices);\n      }\n\n      /**\n       * Convenience method for reading a value from a path.\n       *\n       * Note, if any part in the path is undefined, this method returns\n       * `undefined` (this method does not throw when dereferencing undefined\n       * paths).\n       *\n       * @method get\n       * @param {(string|!Array<(string|number)>)} path Path to the value\n       *   to read.  The path may be specified as a string (e.g. `foo.bar.baz`)\n       *   or an array of path parts (e.g. `['foo.bar', 'baz']`).  Note that\n       *   bracketed expressions are not supported; string-based path parts\n       *   *must* be separated by dots.  Note that when dereferencing array\n       *   indices, the index may be used as a dotted part directly\n       *   (e.g. `users.12.name` or `['users', 12, 'name']`).\n       * @param {Object=} root Root object from which the path is evaluated.\n       * @return {*} Value at the path, or `undefined` if any part of the path\n       *   is undefined.\n       * @public\n       */\n      get(path, root) {\n        return Polymer.Path.get(root || this, path);\n      }\n\n      /**\n       * Convenience method for setting a value to a path and notifying any\n       * elements bound to the same path.\n       *\n       * Note, if any part in the path except for the last is undefined,\n       * this method does nothing (this method does not throw when\n       * dereferencing undefined paths).\n       *\n       * @method set\n       * @param {(string|!Array<(string|number)>)} path Path to the value\n       *   to write.  The path may be specified as a string (e.g. `'foo.bar.baz'`)\n       *   or an array of path parts (e.g. `['foo.bar', 'baz']`).  Note that\n       *   bracketed expressions are not supported; string-based path parts\n       *   *must* be separated by dots.  Note that when dereferencing array\n       *   indices, the index may be used as a dotted part directly\n       *   (e.g. `'users.12.name'` or `['users', 12, 'name']`).\n       * @param {*} value Value to set at the specified path.\n       * @param {Object=} root Root object from which the path is evaluated.\n       *   When specified, no notification will occur.\n       * @public\n      */\n      set(path, value, root) {\n        if (root) {\n          Polymer.Path.set(root, path, value);\n        } else {\n          if (!this.__readOnly || !this.__readOnly[/** @type {string} */(path)]) {\n            if (this._setPendingPropertyOrPath(path, value)) {\n              this._invalidateProperties();\n            }\n          }\n        }\n      }\n\n      /**\n       * Adds items onto the end of the array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.push`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method push\n       * @param {string} path Path to array.\n       * @param {...*} items Items to push onto array\n       * @return {number} New length of the array.\n       * @public\n       */\n      push(path, ...items) {\n        let info = {};\n        let array = /** @type {Array}*/(Polymer.Path.get(this, path, info));\n        let len = array.length;\n        let ret = array.push(...items);\n        if (items.length) {\n          notifySplice(this, array, info.path, len, items.length, []);\n        }\n        return ret;\n      }\n\n      /**\n       * Removes an item from the end of array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.pop`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method pop\n       * @param {string} path Path to array.\n       * @return {*} Item that was removed.\n       * @public\n       */\n      pop(path) {\n        let info = {};\n        let array = /** @type {Array} */(Polymer.Path.get(this, path, info));\n        let hadLength = Boolean(array.length);\n        let ret = array.pop();\n        if (hadLength) {\n          notifySplice(this, array, info.path, array.length, 0, [ret]);\n        }\n        return ret;\n      }\n\n      /**\n       * Starting from the start index specified, removes 0 or more items\n       * from the array and inserts 0 or more new items in their place.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.splice`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method splice\n       * @param {string} path Path to array.\n       * @param {number} start Index from which to start removing/inserting.\n       * @param {number} deleteCount Number of items to remove.\n       * @param {...*} items Items to insert into array.\n       * @return {Array} Array of removed items.\n       * @public\n       */\n      splice(path, start, deleteCount, ...items) {\n        let info = {};\n        let array = /** @type {Array} */(Polymer.Path.get(this, path, info));\n        // Normalize fancy native splice handling of crazy start values\n        if (start < 0) {\n          start = array.length - Math.floor(-start);\n        } else {\n          start = Math.floor(start);\n        }\n        if (!start) {\n          start = 0;\n        }\n        let ret = array.splice(start, deleteCount, ...items);\n        if (items.length || ret.length) {\n          notifySplice(this, array, info.path, start, items.length, ret);\n        }\n        return ret;\n      }\n\n      /**\n       * Removes an item from the beginning of array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.pop`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method shift\n       * @param {string} path Path to array.\n       * @return {*} Item that was removed.\n       * @public\n       */\n      shift(path) {\n        let info = {};\n        let array = /** @type {Array} */(Polymer.Path.get(this, path, info));\n        let hadLength = Boolean(array.length);\n        let ret = array.shift();\n        if (hadLength) {\n          notifySplice(this, array, info.path, 0, 0, [ret]);\n        }\n        return ret;\n      }\n\n      /**\n       * Adds items onto the beginning of the array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.push`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method unshift\n       * @param {string} path Path to array.\n       * @param {...*} items Items to insert info array\n       * @return {number} New length of the array.\n       * @public\n       */\n      unshift(path, ...items) {\n        let info = {};\n        let array = /** @type {Array} */(Polymer.Path.get(this, path, info));\n        let ret = array.unshift(...items);\n        if (items.length) {\n          notifySplice(this, array, info.path, 0, items.length, []);\n        }\n        return ret;\n      }\n\n      /**\n       * Notify that a path has changed.\n       *\n       * Example:\n       *\n       *     this.item.user.name = 'Bob';\n       *     this.notifyPath('item.user.name');\n       *\n       * @param {string} path Path that should be notified.\n       * @param {*=} value Value at the path (optional).\n       * @public\n      */\n      notifyPath(path, value) {\n        /** @type {string} */\n        let propPath;\n        if (arguments.length == 1) {\n          // Get value if not supplied\n          let info = {};\n          value = Polymer.Path.get(this, path, info);\n          propPath = info.path;\n        } else if (Array.isArray(path)) {\n          // Normalize path if needed\n          propPath = Polymer.Path.normalize(path);\n        } else {\n          propPath = /** @type{string} */(path);\n        }\n        if (this._setPendingPropertyOrPath(propPath, value, true)) {\n          this._invalidateProperties();\n        }\n      }\n\n      /**\n       * Creates a read-only accessor for the given property.\n       *\n       * To set the property, use the protected `_setProperty` API.\n       * To create a custom protected setter (e.g. `_setMyProp()` for\n       * property `myProp`), pass `true` for `protectedSetter`.\n       *\n       * Note, if the property will have other property effects, this method\n       * should be called first, before adding other effects.\n       *\n       * @param {string} property Property name\n       * @param {boolean=} protectedSetter Creates a custom protected setter\n       *   when `true`.\n       * @protected\n       */\n      _createReadOnlyProperty(property, protectedSetter) {\n        this._addPropertyEffect(property, TYPES.READ_ONLY);\n        if (protectedSetter) {\n          this['_set' + upper(property)] = function(value) {\n            this._setProperty(property, value);\n          }\n        }\n      }\n\n      /**\n       * Creates a single-property observer for the given property.\n       *\n       * @param {string} property Property name\n       * @param {string} methodName Name of observer method to call\n       * @param {boolean=} dynamicFn Whether the method name should be included as\n       *   a dependency to the effect.\n       * @protected\n       */\n      _createPropertyObserver(property, methodName, dynamicFn) {\n        let info = { property, methodName };\n        this._addPropertyEffect(property, TYPES.OBSERVE, {\n          fn: runObserverEffect, info, trigger: {name: property}\n        });\n        if (dynamicFn) {\n          this._addPropertyEffect(methodName, TYPES.OBSERVE, {\n            fn: runObserverEffect, info, trigger: {name: methodName}\n          });\n        }\n      }\n\n      /**\n       * Creates a multi-property \"method observer\" based on the provided\n       * expression, which should be a string in the form of a normal Javascript\n       * function signature: `'methodName(arg1, [..., argn])'`.  Each argument\n       * should correspond to a property or path in the context of this\n       * prototype (or instance), or may be a literal string or number.\n       *\n       * @param {string} expression Method expression\n       * @param {Object=} dynamicFns Map indicating whether method names should\n       *   be included as a dependency to the effect.\n       * @protected\n       */\n      _createMethodObserver(expression, dynamicFns) {\n        let sig = parseMethod(expression);\n        if (!sig) {\n          throw new Error(\"Malformed observer expression '\" + expression + \"'\");\n        }\n        createMethodEffect(this, sig, TYPES.OBSERVE, runMethodEffect, null, dynamicFns);\n      }\n\n      /**\n       * Causes the setter for the given property to dispatch `<property>-changed`\n       * events to notify of changes to the property.\n       *\n       * @param {string} property Property name\n       * @protected\n       */\n      _createNotifyingProperty(property) {\n        this._addPropertyEffect(property, TYPES.NOTIFY, {\n          fn: runNotifyEffect,\n          info: {\n            eventName: CaseMap.camelToDashCase(property) + '-changed',\n            property: property\n          }\n        });\n      }\n\n      /**\n       * Causes the setter for the given property to reflect the property value\n       * to a (dash-cased) attribute of the same name.\n       *\n       * @param {string} property Property name\n       * @protected\n       */\n      _createReflectedProperty(property) {\n        let attr = CaseMap.camelToDashCase(property);\n        if (attr[0] === '-') {\n          console.warn('Property ' + property + ' cannot be reflected to attribute ' +\n            attr + ' because \"-\" is not a valid starting attribute name. Use a lowercase first letter for the property thisead.');\n        } else {\n          this._addPropertyEffect(property, TYPES.REFLECT, {\n            fn: runReflectEffect,\n            info: {\n              attrName: attr\n            }\n          });\n        }\n      }\n\n      /**\n       * Creates a computed property whose value is set to the result of the\n       * method described by the given `expression` each time one or more\n       * arguments to the method changes.  The expression should be a string\n       * in the form of a normal Javascript function signature:\n       * `'methodName(arg1, [..., argn])'`\n       *\n       * @param {string} property Name of computed property to set\n       * @param {string} expression Method expression\n       * @param {Object=} dynamicFns Map indicating whether method names should\n       *   be included as a dependency to the effect.\n       * @protected\n       */\n      _createComputedProperty(property, expression, dynamicFns) {\n        let sig = parseMethod(expression);\n        if (!sig) {\n          throw new Error(\"Malformed computed expression '\" + expression + \"'\");\n        }\n        createMethodEffect(this, sig, TYPES.COMPUTE, runComputedEffect, property, dynamicFns);\n      }\n\n      // -- binding ----------------------------------------------\n\n      /**\n       * Creates \"binding\" property effects for all binding bindings\n       * in the provided template that forward host properties into DOM stamped\n       * from the template via `_stampTemplate`.\n       *\n       * @param {HTMLTemplateElement} template Template containing binding\n       *   bindings\n       * @param {Object=} dynamicFns Map indicating whether method names should\n       *   be included as a dependency to the effect.\n       * @protected\n       */\n      _bindTemplate(template, dynamicFns) {\n        // Clear any existing propagation effects inherited from superClass\n        this.__propagateEffects = {};\n        let notes = this._parseTemplateAnnotations(template);\n        processAnnotations(notes);\n        for (let i=0, note; (i<notes.length) && (note=notes[i]); i++)  {\n          // where to find the node in the concretized list\n          let b$ = note.bindings;\n          for (let j=0, binding; (j<b$.length) && (binding=b$[j]); j++) {\n            if (shouldAddListener(binding)) {\n              addAnnotatedListener(this, i, binding.name,\n                binding.parts[0].value,\n                binding.parts[0].event,\n                binding.parts[0].negate);\n            }\n            addBindingEffect(this, binding, i, dynamicFns);\n          }\n        }\n      }\n\n    }\n\n    return PropertyEffects;\n  });\n\n})();\nPolymer.ElementMixin = Polymer.dedupingMixin(function(base) {\n\n  const mixin = Polymer.PropertyEffects(base);\n\n  let caseMap = Polymer.CaseMap;\n\n  /**\n   * Returns the config object specifically on `klass`. Use for:\n   * (1) super chain mixes togther to make `propertiesForClass` which is\n   * then used to make `observedAttributes`.\n   * (2) properties effects and observers are created from it at `finalize` time.\n   * @param {HTMLElement} klass\n   * @private\n   */\n  function ownConfigForClass(klass) {\n    if (!klass.hasOwnProperty(\n      goog.reflect.objectProperty('__ownConfig', klass))) {\n      klass.__ownConfig =\n        klass.hasOwnProperty(goog.reflect.objectProperty('config', klass)) ?\n        klass.config : {};\n    }\n    return klass.__ownConfig;\n  }\n\n  /**\n   * Mixes `props` into `flattenedProps` but upgrades shorthand type\n   * syntax to { type: Type}.\n   * @param {Object} flattenedProps\n   * @param {Object} props\n   * @private\n   */\n  function flattenProperties(flattenedProps, props) {\n    for (let p in props) {\n      let o = props[p];\n      if (typeof o == 'function') {\n        o = { type: o };\n      }\n      flattenedProps[p] = o;\n    }\n    return flattenedProps;\n  }\n\n  /**\n   * Returns a flattened list of properties mixed together from the chain of all\n   * constructor's `config.properties`. This list is used to create\n   * (1) observedAttributes,\n   * (2) class property default values\n   * @param {HTMLElement} klass\n   * @private\n   */\n  function propertiesForClass(klass) {\n    if (!klass.hasOwnProperty(\n      goog.reflect.objectProperty('__classProperties', klass))) {\n      klass.__classProperties =\n      flattenProperties({}, ownConfigForClass(klass).properties);\n      let superCtor = Object.getPrototypeOf(klass.prototype).constructor;\n      if (superCtor.prototype instanceof PolymerElement) {\n        klass.__classProperties = Polymer.mixin(\n          Object.create(propertiesForClass(superCtor)),\n          klass.__classProperties);\n      }\n    }\n    return klass.__classProperties;\n  }\n\n  /**\n   * Returns a list of properties with default values.\n   * This list is created as an optimization since it is a subset of\n   * the list returned from `propertiesForClass`.\n   * This list is used in `_initializeProperties` to set property defaults.\n   * @param {HTMLElement} klass\n   * @private\n   */\n  function propertyDefaultsForClass(klass) {\n    if (!klass.hasOwnProperty(\n      goog.reflect.objectProperty('__classPropertyDefaults', klass))) {\n      this.__classPropertyDefaults = null;\n      let props = propertiesForClass(klass);\n      for (let p in props) {\n        let info = props[p];\n        if ('value' in info) {\n          klass.__classPropertyDefaults = klass.__classPropertyDefaults || {};\n          klass.__classPropertyDefaults[p] = info;\n        }\n      }\n    }\n    return klass.__classPropertyDefaults;\n  }\n\n  /**\n   * Returns true if a `klass` has finalized. Called in `ElementClass.finalize()`\n   * @param {HTMLElement} klass\n   * @private\n   */\n  function hasClassFinalized(klass) {\n    return klass.hasOwnProperty(goog.reflect.objectProperty('__finalized', klass));\n  }\n\n  /**\n   * Called by `ElementClass.finalize()`. Ensures this `klass` and\n   * *all superclasses* are finalized by traversing the prototype chain\n   * and calling `klass.finalize()`.\n   * @param {HTMLElement} klass\n   * @private\n   */\n  function finalizeClassAndSuper(klass) {\n    let proto = klass.prototype;\n    let superCtor = Object.getPrototypeOf(proto).constructor;\n    if (superCtor.prototype instanceof PolymerElement) {\n      superCtor.finalize();\n    }\n    finalizeClass(klass);\n  }\n\n  /**\n   * Configures a `klass` based on a staic `klass.config` object and\n   * a `template`. This includes creating accessors and effects\n   * for properties in `config` and the `template` as well as preparing the\n   * `template` for stamping.\n   */\n  function finalizeClass(klass) {\n    klass.__finalized = true;\n    let proto = klass.prototype;\n    if (klass.hasOwnProperty(\n      goog.reflect.objectProperty('is', klass)) && klass.is) {\n      Polymer.telemetry.register(proto);\n    }\n    let config = ownConfigForClass(klass);\n    if (config) {\n      finalizeConfig(proto, config);\n    }\n    let template = klass.template;\n    if (template) {\n      finalizeTemplate(proto, template.cloneNode(true),\n        klass.is, klass.extends);\n    }\n  }\n\n  /**\n   * Configures a `proto` based on a `config` object.\n   * Leverages `PropertyEffects` to create property accessors and effects\n   * supporting, observers, reflecting to attributes, change notification,\n   * computed properties, and read only properties.\n   * @param {HTMLElement} proto\n   * @param {Object} config\n   * @private\n   */\n  function finalizeConfig(proto, config) {\n    let {properties, observers} = config;\n    if (properties) {\n      // process properties\n      for (let p in properties) {\n        createPropertyFromConfig(proto, p, properties[p], properties);\n      }\n    }\n    if (observers) {\n      for (let i=0; i < observers.length; i++) {\n        proto._createMethodObserver(observers[i], properties);\n      }\n    }\n  }\n\n  /**\n   * Creates effects for a property.\n   *\n   * Note, once a property has been set to\n   * `readOnly`, `computed`, `reflectToAttribute`, or `notify`\n   * these values may not be changed. For example, a subclass cannot\n   * alter these settings. However, additional `observers` may be added\n   * by subclasses.\n   *\n   * @param {string} name Name of the property.\n   * @param {*=} info Info object from which to create property effects.\n   * Supported keys:\n   *\n   * * type: {function} type to which an attribute matching the property\n   * is deserialized. Note the property is camel-cased from a dash-cased\n   * attribute. For example, 'foo-bar' attribute is dersialized to a\n   * property named 'fooBar'.\n   *\n   * * readOnly: {boolean} creates a readOnly property and\n   * makes a private setter for the private of the form '_setFoo' for a\n   * property 'foo',\n   *\n   * * computed: {string} creates a computed property. A computed property\n   * also automatically is set to `readOnly: true`. The value is calculated\n   * by running a method and arguments parsed from the given string. For\n   * example 'compute(foo)' will compute a given property when the\n   * 'foo' property changes by executing the 'compute' method. This method\n   * must return the computed value.\n   *\n   * * reflectToAttriute: {boolean} If true, the property value is reflected\n   * to an attribute of the same name. Note, the attribute is dash-cased\n   * so a property named 'fooBar' is reflected as 'foo-bar'.\n   *\n   * * notify: {boolean} sends a non-bubbling notification event when\n   * the property changes. For example, a property named 'foo' sends an\n   * event named 'foo-changed' with `event.detail` set to the value of\n   * the property.\n   *\n   * * observer: {string} name of a method that runs when the property\n   * changes. The arguments of the method are (value, previousValue).\n   *\n   * @param {HTMLElement} proto\n   * @param {string} name\n   * @param {object} info\n   * @param {object} props\n   * @private\n   */\n  /* Note: Users may want control over modifying property\n   effects via subclassing. For example, a user might want to make a\n   reflectToAttribute property not do so in a subclass. We've chosen to\n   disable this because it leads to additional complication.\n   For example, a readOnly effect generates a special setter. If a subclass\n   disables the effect, the setter would fail unexpectedly.\n   Based on feedback, we may want to try to make effects more malleable\n   and/or provide an advanced api for manipulating them.\n   Also consider adding warnings when an effect cannot be changed.\n  */\n  function createPropertyFromConfig(proto, name, info, allProps) {\n    // computed forces readOnly...\n    if (info.computed) {\n      info.readOnly = true;\n    }\n    // Note, since all computed properties are readOnly, this prevents\n    // adding additional computed property effects (which leads to a confusing\n    // setup where multiple triggers for setting a property)\n    // While we do have `hasComputedEffect` this is set on the property's\n    // dependencies rather than itself.\n    if (info.computed  && !proto._hasReadOnlyEffect(name)) {\n      proto._createComputedProperty(name, info.computed, allProps);\n    }\n    if (info.readOnly && !proto._hasReadOnlyEffect(name)) {\n      proto._createReadOnlyProperty(name, !info.computed);\n    }\n    if (info.reflectToAttribute && !proto._hasReflectEffect(name)) {\n      proto._createReflectedProperty(name);\n    }\n    if (info.notify && !proto._hasNotifyEffect(name)) {\n      proto._createNotifyingProperty(name);\n    }\n    // always add observer\n    if (info.observer) {\n      proto._createPropertyObserver(name, info.observer, allProps[info.observer]);\n    }\n  }\n\n  /**\n   * Configures an element `proto` to function with a given `template`.\n   * The element name `is` and extends `ext` must be specified for ShadyCSS\n   * style scoping.\n   * @param {HTMLElement} proto\n   * @param {HTMLTemplateElement} template\n   * @param {string} is\n   * @param {string} ext\n   * @private\n   */\n  function finalizeTemplate(proto, template, is, ext) {\n    // support `include=\"module-name\"`\n    let cssText = Polymer.StyleGather.cssFromElement(template);\n    if (cssText) {\n      let style = document.createElement('style');\n      style.textContent = cssText;\n      template.content.insertBefore(style, template.content.firstChild);\n    }\n    if (window.ShadyCSS) {\n      window.ShadyCSS.prepareTemplate(template, is, ext);\n    }\n    proto._bindTemplate(template, propertiesForClass(proto.constructor));\n    proto._template = template;\n  }\n\n  /**\n   * @unrestricted\n   */\n  class PolymerElement extends mixin {\n\n    static get observedAttributes() {\n      if (!this.hasOwnProperty(goog.reflect.objectProperty('__observedAttributes', this))) {\n        let list = [];\n        let properties = propertiesForClass(this);\n        for (let prop in properties) {\n          list.push(Polymer.CaseMap.camelToDashCase(prop));\n        }\n        this.__observedAttributes = list;\n      }\n      return this.__observedAttributes;\n    }\n\n    /**\n     * Called automatically when the first element instance is created to\n     * ensure that class finalization work has been completed.\n     * May be called by users to eagerly perform class finalization work\n     * prior to the creation of the first element instance.\n     * @public\n     */\n    static finalize() {\n      if (!hasClassFinalized(this)) {\n        finalizeClassAndSuper(this);\n      }\n    }\n\n    static get template() {\n      if (!this.hasOwnProperty(goog.reflect.objectProperty('_template', this))) {\n        this._template = Polymer.DomModule.import(this.is, 'template') ||\n          // note: implemented so a subclass can retrieve the super\n          // template; call the super impl this way so that `this` points\n          // to the superclass.\n          Object.getPrototypeOf(this.prototype).constructor.template;\n      }\n      return this._template;\n    }\n\n    constructor() {\n      super();\n      // note: `this.constructor.prototype` is wrong in Safari so make sure to\n      // use `__proto__`\n      Polymer.telemetry.instanceCount++;\n      // add self to host's pending client list\n      hostStack.registerHost(this);\n    }\n\n    _initializeProperties() {\n      this.constructor.finalize();\n      super._initializeProperties();\n      // apply property defaults...\n      let p$ = propertyDefaultsForClass(this.constructor);\n      if (!p$) {\n        return;\n      }\n      for (let p in p$) {\n        let info = p$[p];\n        if (!this._isPropertyPending(p)) {\n          var value = typeof info.value == 'function' ?\n            info.value.call(this) :\n            info.value;\n          if (this._hasReadOnlyEffect(p)) {\n            this._setProperty(p, value)\n          } else {\n            this[p] = value;\n          }\n        }\n      }\n    }\n\n    // reserved for canonical behavior\n    connectedCallback() {\n      if (window.ShadyCSS) {\n        window.ShadyCSS.styleElement(this);\n      }\n      if (hostStack.isEmpty()) {\n        // note, this should never recurse to root elements; this will\n        // need new ShadyCSS api\n        // (see https://github.com/webcomponents/shadycss/issues/42)\n        this._flushProperties();\n      }\n    }\n\n    disconnectedCallback() {}\n\n    ready() {\n      super.ready();\n      if (this._template) {\n        hostStack.beginHosting(this);\n        this.root = this._stampTemplate(this._template);\n        this._flushProperties();\n        this.root = this._attachDom(this.root);\n        hostStack.endHosting(this);\n      } else {\n        this.root = this;\n        this._flushProperties();\n      }\n    }\n\n    /**\n     * Attach an element's stamped dom to itself. By default,\n     * this method creates a `shadowRoot` and adds the dom to it.\n     * However, this method may be overridden to allow an element\n     * to put its dom in another location.\n     *\n     * @method _attachDom\n     * @throws {Error}\n     * @suppress {missingReturn}\n     * @param {NodeList} dom to attach to the element.\n     * @return {Node} node to which the dom has been attached.\n     */\n    _attachDom(dom) {\n      if (this.attachShadow) {\n        if (dom) {\n          if (!this.shadowRoot) {\n            this.attachShadow({mode: 'open'});\n          }\n          this.shadowRoot.appendChild(dom);\n          return this.shadowRoot;\n        }\n      } else {\n        throw new Error('ShadowDOM not available. ' +\n          // TODO(sorvell): move to compile-time conditional when supported\n         'Polymer.Element can create dom as children instead of in ' +\n         'ShadowDOM by setting `this.root = this;\\` before \\`ready\\`.');\n      }\n    }\n\n    attributeChangedCallback(name, old, value) {\n      if (old !== value) {\n        let property = caseMap.dashToCamelCase(name);\n        let type = propertiesForClass(this.constructor)[property].type;\n        if (!this._hasReadOnlyEffect(property)) {\n          this._attributeToProperty(name, value, type);\n        }\n      }\n    }\n\n    /**\n     * Update styling for this element\n     *\n     * @param {Object=} properties\n     *  Override styling with an object of properties where the keys are css properties, and the values are strings\n     *  Example: `this.updateStyles({'color': 'blue'})`\n     *  These properties are retained unless a value of `null` is set.\n     */\n    updateStyles(properties) {\n      if (window.ShadyCSS) {\n        window.ShadyCSS.styleSubtree(this, properties);\n      }\n    }\n\n    /**\n     * Rewrites a given URL relative to the original location of the document\n     * containing the `dom-module` for this element.  This method will return\n     * the same URL before and after vulcanization.\n     *\n     * @method resolveUrl\n     * @param {string} url URL to resolve.\n     * @return {string} Rewritten URL relative to the import\n     */\n    resolveUrl(url) {\n      const module = Polymer.DomModule.import(this.constructor.is);\n      const root = module ? module.assetpath : document.baseURI;\n      return Polymer.ResolveUrl.resolveUrl(url, root);\n    }\n\n  }\n\n  return PolymerElement;\n});\n\nlet hostStack = {\n\n  stack: [],\n\n  isEmpty() {\n    return !this.stack.length;\n  },\n\n  registerHost(inst) {\n    if (this.stack.length) {\n      let host = this.stack[this.stack.length-1];\n      host._enqueueClient(inst);\n    }\n  },\n\n  beginHosting(inst) {\n    this.stack.push(inst);\n  },\n\n  endHosting(inst) {\n    let stackLen = this.stack.length;\n    if (stackLen && this.stack[stackLen-1] == inst) {\n      this.stack.pop();\n    }\n  }\n\n}\n\n// telemetry\nPolymer.telemetry = {\n  instanceCount: 0,\n  registrations: [],\n  _regLog: function(prototype) {\n    console.log('[' + prototype.is + ']: registered')\n  },\n  register: function(prototype) {\n    this.registrations.push(prototype);\n    Polymer.log && this._regLog(prototype);\n  },\n  dumpRegistrations: function() {\n    this.registrations.forEach(this._regLog);\n  }\n};\n\nPolymer.updateStyles = function(props) {\n  if (window.ShadyCSS) {\n    window.ShadyCSS.styleDocument(props);\n  }\n};\n(function() {\n  'use strict';\n\n  /** @constructor */\n  Polymer.Debouncer = function Debouncer() {\n    this._asyncModule = null;\n    this._callback = null;\n    this._timer = null;\n    this.flush = this.flush.bind(this);\n  };\n\n  Polymer.mixin(Polymer.Debouncer.prototype, {\n    /**\n     * Sets the scheduler; that is, a module with the Async interface,\n     * a callback and optional arguments to be passed to the run function\n     * from the async module.\n     *\n     * @param {{run: function, cancel: function}} asyncModule\n     * @param {function} callback\n     * @param {Array=}\n     */\n    setConfig(asyncModule, cb) {\n      this._asyncModule = asyncModule;\n      this._callback = cb;\n      this._timer = this._asyncModule.run(this.flush);\n    },\n\n    /**\n     * Cancels an active debouncer and returns a reference to itself.\n     */\n    cancel() {\n      if (this.isActive()) {\n        this._asyncModule.cancel(this._timer);\n        this._timer = null;\n      }\n    },\n\n    /**\n     * Flushes an active debouncer and returns a reference to itself.\n     */\n    flush() {\n      if (this.isActive()) {\n        this.cancel();\n        this._callback();\n      }\n    },\n\n    /**\n     * Returns true if the debouncer is active.\n     *\n     * @return {boolean}\n     */\n    isActive() {\n      return this._timer != null;\n    }\n  });\n\n  /**\n   * Creates a debouncer if no debouncer is passed as a parameter\n   * or it cancels an active debouncer otherwise.\n   *\n   * @param {Polymer.Debouncer?} debouncer\n   * @param {{run: function, cancel: function}} asyncModule\n   * @param {function} cb\n   * @return {Polymer.Debouncer}\n   */\n  Polymer.Debouncer.debounce = function debounce(debouncer, asyncModule, cb) {\n    if (debouncer instanceof Polymer.Debouncer) {\n      debouncer.cancel();\n    } else {\n      debouncer = new Polymer.Debouncer();\n    }\n    debouncer.setConfig(asyncModule, cb);\n    return debouncer;\n  };\n\n})();\n(function() {\n\n  'use strict';\n\n  // let DIRECTION_MAP = {\n  //   x: 'pan-x',\n  //   y: 'pan-y',\n  //   none: 'none',\n  //   all: 'auto'\n  // };\n\n  // detect native touch action support\n  let HAS_NATIVE_TA = typeof document.head.style.touchAction === 'string';\n  let GESTURE_KEY = '__polymerGestures';\n  let HANDLED_OBJ = '__polymerGesturesHandled';\n  let TOUCH_ACTION = '__polymerGesturesTouchAction';\n  // radius for tap and track\n  let TAP_DISTANCE = 25;\n  let TRACK_DISTANCE = 5;\n  // number of last N track positions to keep\n  let TRACK_LENGTH = 2;\n\n  // Disabling \"mouse\" handlers for 2500ms is enough\n  let MOUSE_TIMEOUT = 2500;\n  let MOUSE_EVENTS = ['mousedown', 'mousemove', 'mouseup', 'click'];\n  // an array of bitmask values for mapping MouseEvent.which to MouseEvent.buttons\n  let MOUSE_WHICH_TO_BUTTONS = [0, 1, 4, 2];\n  let MOUSE_HAS_BUTTONS = (function() {\n    try {\n      return new MouseEvent('test', {buttons: 1}).buttons === 1;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  // Check for touch-only devices\n  let IS_TOUCH_ONLY = navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);\n\n  // touch will make synthetic mouse events\n  // `preventDefault` on touchend will cancel them,\n  // but this breaks `<input>` focus and link clicks\n  // disable mouse handlers for MOUSE_TIMEOUT ms after\n  // a touchend to ignore synthetic mouse events\n  let mouseCanceller = function(mouseEvent) {\n    // Check for sourceCapabilities, used to distinguish synthetic events\n    // if mouseEvent did not come from a device that fires touch events,\n    // it was made by a real mouse and should be counted\n    // http://wicg.github.io/InputDeviceCapabilities/#dom-inputdevicecapabilities-firestouchevents\n    let sc = mouseEvent.sourceCapabilities;\n    if (sc && !sc.firesTouchEvents) {\n      return;\n    }\n    // skip synthetic mouse events\n    mouseEvent[HANDLED_OBJ] = {skip: true};\n    // disable \"ghost clicks\"\n    if (mouseEvent.type === 'click') {\n      let path = mouseEvent.composedPath && mouseEvent.composedPath();\n      if (path) {\n        for (let i = 0; i < path.length; i++) {\n          if (path[i] === POINTERSTATE.mouse.target) {\n            return;\n          }\n        }\n      }\n      mouseEvent.preventDefault();\n      mouseEvent.stopPropagation();\n    }\n  };\n\n  /**\n   * @param {boolean=} setup\n   */\n  function setupTeardownMouseCanceller(setup) {\n    let events = IS_TOUCH_ONLY ? ['click'] : MOUSE_EVENTS;\n    for (let i = 0, en; i < events.length; i++) {\n      en = events[i];\n      if (setup) {\n        document.addEventListener(en, mouseCanceller, true);\n      } else {\n        document.removeEventListener(en, mouseCanceller, true);\n      }\n    }\n  }\n\n  function ignoreMouse() {\n    if (!POINTERSTATE.mouse.mouseIgnoreJob) {\n      setupTeardownMouseCanceller(true);\n    }\n    let unset = function() {\n      setupTeardownMouseCanceller();\n      POINTERSTATE.mouse.target = null;\n      POINTERSTATE.mouse.mouseIgnoreJob = null;\n    };\n    POINTERSTATE.mouse.mouseIgnoreJob = Polymer.Debouncer.debounce(\n          POINTERSTATE.mouse.mouseIgnoreJob\n        , Polymer.Async.timeOut.after(MOUSE_TIMEOUT)\n        , unset);\n  }\n\n  function hasLeftMouseButton(ev) {\n    let type = ev.type;\n    // exit early if the event is not a mouse event\n    if (MOUSE_EVENTS.indexOf(type) === -1) {\n      return false;\n    }\n    // ev.button is not reliable for mousemove (0 is overloaded as both left button and no buttons)\n    // instead we use ev.buttons (bitmask of buttons) or fall back to ev.which (deprecated, 0 for no buttons, 1 for left button)\n    if (type === 'mousemove') {\n      // allow undefined for testing events\n      let buttons = ev.buttons === undefined ? 1 : ev.buttons;\n      if ((ev instanceof window.MouseEvent) && !MOUSE_HAS_BUTTONS) {\n        buttons = MOUSE_WHICH_TO_BUTTONS[ev.which] || 0;\n      }\n      // buttons is a bitmask, check that the left button bit is set (1)\n      return Boolean(buttons & 1);\n    } else {\n      // allow undefined for testing events\n      let button = ev.button === undefined ? 0 : ev.button;\n      // ev.button is 0 in mousedown/mouseup/click for left button activation\n      return button === 0;\n    }\n  }\n\n  function isSyntheticClick(ev) {\n    if (ev.type === 'click') {\n      // ev.detail is 0 for HTMLElement.click in most browsers\n      if (ev.detail === 0) {\n        return true;\n      }\n      // in the worst case, check that the x/y position of the click is within\n      // the bounding box of the target of the event\n      // Thanks IE 10 >:(\n      let t = gestures._findOriginalTarget(ev);\n      let bcr = t.getBoundingClientRect();\n      // use page x/y to account for scrolling\n      let x = ev.pageX, y = ev.pageY;\n      // ev is a synthetic click if the position is outside the bounding box of the target\n      return !((x >= bcr.left && x <= bcr.right) && (y >= bcr.top && y <= bcr.bottom));\n    }\n    return false;\n  }\n\n  let POINTERSTATE = {\n    mouse: {\n      target: null,\n      mouseIgnoreJob: null\n    },\n    touch: {\n      x: 0,\n      y: 0,\n      id: -1,\n      scrollDecided: false\n    }\n  };\n\n  function firstTouchAction(ev) {\n    let ta = 'auto';\n    let path = ev.composedPath && ev.composedPath();\n    if (path) {\n      for (let i = 0, n; i < path.length; i++) {\n        n = path[i];\n        if (n[TOUCH_ACTION]) {\n          ta = n[TOUCH_ACTION];\n          break;\n        }\n      }\n    }\n    return ta;\n  }\n\n  function trackDocument(stateObj, movefn, upfn) {\n    stateObj.movefn = movefn;\n    stateObj.upfn = upfn;\n    document.addEventListener('mousemove', movefn);\n    document.addEventListener('mouseup', upfn);\n  }\n\n  function untrackDocument(stateObj) {\n    document.removeEventListener('mousemove', stateObj.movefn);\n    document.removeEventListener('mouseup', stateObj.upfn);\n    stateObj.movefn = null;\n    stateObj.upfn = null;\n  }\n\n  let gestures = {\n    gestures: {},\n    recognizers: [],\n\n    deepTargetFind: function(x, y) {\n      let node = document.elementFromPoint(x, y);\n      let next = node;\n      // this code path is only taken when native ShadowDOM is used\n      // if there is a shadowroot, it may have a node at x/y\n      // if there is not a shadowroot, exit the loop\n      while (next && next.shadowRoot && !window.ShadyDOM) {\n        // if there is a node at x/y in the shadowroot, look deeper\n        next = next.shadowRoot.elementFromPoint(x, y);\n        if (next) {\n          node = next;\n        }\n      }\n      return node;\n    },\n    // a cheaper check than ev.composedPath()[0];\n    _findOriginalTarget: function(ev) {\n      // shadowdom\n      if (ev.composedPath) {\n        return ev.composedPath()[0];\n      }\n      // shadydom\n      return ev.target;\n    },\n    _handleNative: function(ev) {\n      let handled;\n      let type = ev.type;\n      let node = ev.currentTarget;\n      let gobj = node[GESTURE_KEY];\n      if (!gobj) {\n        return;\n      }\n      let gs = gobj[type];\n      if (!gs) {\n        return;\n      }\n      if (!ev[HANDLED_OBJ]) {\n        ev[HANDLED_OBJ] = {};\n        if (type.slice(0, 5) === 'touch') {\n          let t = ev.changedTouches[0];\n          if (type === 'touchstart') {\n            // only handle the first finger\n            if (ev.touches.length === 1) {\n              POINTERSTATE.touch.id = t.identifier;\n            }\n          }\n          if (POINTERSTATE.touch.id !== t.identifier) {\n            return;\n          }\n          if (!HAS_NATIVE_TA) {\n            if (type === 'touchstart' || type === 'touchmove') {\n              gestures._handleTouchAction(ev);\n            }\n          }\n          if (type === 'touchend') {\n            let rootTarget = ev.composedPath ? ev.composedPath()[0] : ev.target;\n            POINTERSTATE.mouse.target = rootTarget;\n            // ignore syntethic mouse events after a touch\n            ignoreMouse();\n          }\n        }\n      }\n      handled = ev[HANDLED_OBJ];\n      // used to ignore synthetic mouse events\n      if (handled.skip) {\n        return;\n      }\n      let recognizers = gestures.recognizers;\n      // reset recognizer state\n      for (let i = 0, r; i < recognizers.length; i++) {\n        r = recognizers[i];\n        if (gs[r.name] && !handled[r.name]) {\n          if (r.flow && r.flow.start.indexOf(ev.type) > -1 && r.reset) {\n            r.reset();\n          }\n        }\n      }\n      // enforce gesture recognizer order\n      for (let i = 0, r; i < recognizers.length; i++) {\n        r = recognizers[i];\n        if (gs[r.name] && !handled[r.name]) {\n          handled[r.name] = true;\n          r[type](ev);\n        }\n      }\n    },\n\n    _handleTouchAction: function(ev) {\n      let t = ev.changedTouches[0];\n      let type = ev.type;\n      if (type === 'touchstart') {\n        POINTERSTATE.touch.x = t.clientX;\n        POINTERSTATE.touch.y = t.clientY;\n        POINTERSTATE.touch.scrollDecided = false;\n      } else if (type === 'touchmove') {\n        if (POINTERSTATE.touch.scrollDecided) {\n          return;\n        }\n        POINTERSTATE.touch.scrollDecided = true;\n        let ta = firstTouchAction(ev);\n        let prevent = false;\n        let dx = Math.abs(POINTERSTATE.touch.x - t.clientX);\n        let dy = Math.abs(POINTERSTATE.touch.y - t.clientY);\n        if (!ev.cancelable) {\n          // scrolling is happening\n        } else if (ta === 'none') {\n          prevent = true;\n        } else if (ta === 'pan-x') {\n          prevent = dy > dx;\n        } else if (ta === 'pan-y') {\n          prevent = dx > dy;\n        }\n        if (prevent) {\n          ev.preventDefault();\n        } else {\n          gestures.prevent('track');\n        }\n      }\n    },\n\n    addListener: function(node, evType, handler) {\n      if (this.gestures[evType]) {\n        this._add(node, evType, handler);\n        return true;\n      }\n    },\n\n    removeListener: function(node, evType, handler) {\n      if (this.gestures[evType]) {\n        this._remove(node, evType, handler);\n        return true;\n      }\n    },\n\n    // automate the event listeners for the native events\n    _add: function(node, evType, handler) {\n      let recognizer = this.gestures[evType];\n      let deps = recognizer.deps;\n      let name = recognizer.name;\n      let gobj = node[GESTURE_KEY];\n      if (!gobj) {\n        node[GESTURE_KEY] = gobj = {};\n      }\n      for (let i = 0, dep, gd; i < deps.length; i++) {\n        dep = deps[i];\n        // don't add mouse handlers on iOS because they cause gray selection overlays\n        if (IS_TOUCH_ONLY && MOUSE_EVENTS.indexOf(dep) > -1 && dep !== 'click') {\n          continue;\n        }\n        gd = gobj[dep];\n        if (!gd) {\n          gobj[dep] = gd = {_count: 0};\n        }\n        if (gd._count === 0) {\n          node.addEventListener(dep, this._handleNative);\n        }\n        gd[name] = (gd[name] || 0) + 1;\n        gd._count = (gd._count || 0) + 1;\n      }\n      node.addEventListener(evType, handler);\n      if (recognizer.touchAction) {\n        this.setTouchAction(node, recognizer.touchAction);\n      }\n    },\n\n    // automate event listener removal for native events\n    _remove: function(node, evType, handler) {\n      let recognizer = this.gestures[evType];\n      let deps = recognizer.deps;\n      let name = recognizer.name;\n      let gobj = node[GESTURE_KEY];\n      if (gobj) {\n        for (let i = 0, dep, gd; i < deps.length; i++) {\n          dep = deps[i];\n          gd = gobj[dep];\n          if (gd && gd[name]) {\n            gd[name] = (gd[name] || 1) - 1;\n            gd._count = (gd._count || 1) - 1;\n            if (gd._count === 0) {\n              node.removeEventListener(dep, this._handleNative);\n            }\n          }\n        }\n      }\n      node.removeEventListener(evType, handler);\n    },\n\n    register: function(recog) {\n      this.recognizers.push(recog);\n      for (let i = 0; i < recog.emits.length; i++) {\n        this.gestures[recog.emits[i]] = recog;\n      }\n    },\n\n    _findRecognizerByEvent: function(evName) {\n      for (let i = 0, r; i < this.recognizers.length; i++) {\n        r = this.recognizers[i];\n        for (let j = 0, n; j < r.emits.length; j++) {\n          n = r.emits[j];\n          if (n === evName) {\n            return r;\n          }\n        }\n      }\n      return null;\n    },\n\n    // set scrolling direction on node to check later on first move\n    // must call this before adding event listeners!\n    setTouchAction: function(node, value) {\n      if (HAS_NATIVE_TA) {\n        node.style.touchAction = value;\n      }\n      node[TOUCH_ACTION] = value;\n    },\n\n    _fire: function(target, type, detail) {\n      let ev = new Event(type, { bubbles: true, cancelable: true, composed: true });\n      ev.detail = detail;\n      target.dispatchEvent(ev);\n      // forward `preventDefault` in a clean way\n      if (ev.defaultPrevented) {\n        let preventer = detail.preventer || detail.sourceEvent;\n        if (preventer && preventer.preventDefault) {\n          preventer.preventDefault();\n        }\n      }\n    },\n\n    prevent: function(evName) {\n      let recognizer = this._findRecognizerByEvent(evName);\n      if (recognizer.info) {\n        recognizer.info.prevent = true;\n      }\n    },\n\n    /**\n     * Reset the 2500ms timeout on processing mouse input after detecting touch input.\n     *\n     * Touch inputs create synthesized mouse inputs anywhere from 0 to 2000ms after the touch.\n     * This method should only be called during testing with simulated touch inputs.\n     * Calling this method in production may cause duplicate taps or other gestures.\n     *\n     * @method resetMouseCanceller\n     */\n    resetMouseCanceller: function() {\n      if (POINTERSTATE.mouse.mouseIgnoreJob) {\n        POINTERSTATE.mouse.mouseIgnoreJob.flush();\n      }\n    }\n  };\n\n  gestures.register({\n    name: 'downup',\n    deps: ['mousedown', 'touchstart', 'touchend'],\n    flow: {\n      start: ['mousedown', 'touchstart'],\n      end: ['mouseup', 'touchend']\n    },\n    emits: ['down', 'up'],\n\n    info: {\n      movefn: null,\n      upfn: null\n    },\n\n    reset: function() {\n      untrackDocument(this.info);\n    },\n\n    mousedown: function(e) {\n      if (!hasLeftMouseButton(e)) {\n        return;\n      }\n      let t = gestures._findOriginalTarget(e);\n      let self = this;\n      let movefn = function movefn(e) {\n        if (!hasLeftMouseButton(e)) {\n          self._fire('up', t, e);\n          untrackDocument(self.info);\n        }\n      };\n      let upfn = function upfn(e) {\n        if (hasLeftMouseButton(e)) {\n          self._fire('up', t, e);\n        }\n        untrackDocument(self.info);\n      };\n      trackDocument(this.info, movefn, upfn);\n      this._fire('down', t, e);\n    },\n    touchstart: function(e) {\n      this._fire('down', gestures._findOriginalTarget(e), e.changedTouches[0], e);\n    },\n    touchend: function(e) {\n      this._fire('up', gestures._findOriginalTarget(e), e.changedTouches[0], e);\n    },\n    _fire: function(type, target, event, preventer) {\n      gestures._fire(target, type, {\n        x: event.clientX,\n        y: event.clientY,\n        sourceEvent: event,\n        preventer: preventer,\n        prevent: function(e) {\n          return gestures.prevent(e);\n        }\n      });\n    }\n  });\n\n  gestures.register({\n    name: 'track',\n    touchAction: 'none',\n    deps: ['mousedown', 'touchstart', 'touchmove', 'touchend'],\n    flow: {\n      start: ['mousedown', 'touchstart'],\n      end: ['mouseup', 'touchend']\n    },\n    emits: ['track'],\n\n    info: {\n      x: 0,\n      y: 0,\n      state: 'start',\n      started: false,\n      moves: [],\n      addMove: function(move) {\n        if (this.moves.length > TRACK_LENGTH) {\n          this.moves.shift();\n        }\n        this.moves.push(move);\n      },\n      movefn: null,\n      upfn: null,\n      prevent: false\n    },\n\n    reset: function() {\n      this.info.state = 'start';\n      this.info.started = false;\n      this.info.moves = [];\n      this.info.x = 0;\n      this.info.y = 0;\n      this.info.prevent = false;\n      untrackDocument(this.info);\n    },\n\n    hasMovedEnough: function(x, y) {\n      if (this.info.prevent) {\n        return false;\n      }\n      if (this.info.started) {\n        return true;\n      }\n      let dx = Math.abs(this.info.x - x);\n      let dy = Math.abs(this.info.y - y);\n      return (dx >= TRACK_DISTANCE || dy >= TRACK_DISTANCE);\n    },\n\n    mousedown: function(e) {\n      if (!hasLeftMouseButton(e)) {\n        return;\n      }\n      let t = gestures._findOriginalTarget(e);\n      let self = this;\n      let movefn = function movefn(e) {\n        let x = e.clientX, y = e.clientY;\n        if (self.hasMovedEnough(x, y)) {\n          // first move is 'start', subsequent moves are 'move', mouseup is 'end'\n          self.info.state = self.info.started ? (e.type === 'mouseup' ? 'end' : 'track') : 'start';\n          if (self.info.state === 'start') {\n            // if and only if tracking, always prevent tap\n            gestures.prevent('tap');\n          }\n          self.info.addMove({x: x, y: y});\n          if (!hasLeftMouseButton(e)) {\n            // always _fire \"end\"\n            self.info.state = 'end';\n            untrackDocument(self.info);\n          }\n          self._fire(t, e);\n          self.info.started = true;\n        }\n      };\n      let upfn = function upfn(e) {\n        if (self.info.started) {\n          movefn(e);\n        }\n\n        // remove the temporary listeners\n        untrackDocument(self.info);\n      };\n      // add temporary document listeners as mouse retargets\n      trackDocument(this.info, movefn, upfn);\n      this.info.x = e.clientX;\n      this.info.y = e.clientY;\n    },\n\n    touchstart: function(e) {\n      let ct = e.changedTouches[0];\n      this.info.x = ct.clientX;\n      this.info.y = ct.clientY;\n    },\n\n    touchmove: function(e) {\n      let t = gestures._findOriginalTarget(e);\n      let ct = e.changedTouches[0];\n      let x = ct.clientX, y = ct.clientY;\n      if (this.hasMovedEnough(x, y)) {\n        if (this.info.state === 'start') {\n          // if and only if tracking, always prevent tap\n          gestures.prevent('tap');\n        }\n        this.info.addMove({x: x, y: y});\n        this._fire(t, ct);\n        this.info.state = 'track';\n        this.info.started = true;\n      }\n    },\n\n    touchend: function(e) {\n      let t = gestures._findOriginalTarget(e);\n      let ct = e.changedTouches[0];\n      // only trackend if track was started and not aborted\n      if (this.info.started) {\n        // reset started state on up\n        this.info.state = 'end';\n        this.info.addMove({x: ct.clientX, y: ct.clientY});\n        this._fire(t, ct, e);\n      }\n    },\n\n    _fire: function(target, touch) {\n      let secondlast = this.info.moves[this.info.moves.length - 2];\n      let lastmove = this.info.moves[this.info.moves.length - 1];\n      let dx = lastmove.x - this.info.x;\n      let dy = lastmove.y - this.info.y;\n      let ddx, ddy = 0;\n      if (secondlast) {\n        ddx = lastmove.x - secondlast.x;\n        ddy = lastmove.y - secondlast.y;\n      }\n      return gestures._fire(target, 'track', {\n        state: this.info.state,\n        x: touch.clientX,\n        y: touch.clientY,\n        dx: dx,\n        dy: dy,\n        ddx: ddx,\n        ddy: ddy,\n        sourceEvent: touch,\n        hover: function() {\n          return gestures.deepTargetFind(touch.clientX, touch.clientY);\n        }\n      });\n    }\n\n  });\n\n  gestures.register({\n    name: 'tap',\n    deps: ['mousedown', 'click', 'touchstart', 'touchend'],\n    flow: {\n      start: ['mousedown', 'touchstart'],\n      end: ['click', 'touchend']\n    },\n    emits: ['tap'],\n    info: {\n      x: NaN,\n      y: NaN,\n      prevent: false\n    },\n    reset: function() {\n      this.info.x = NaN;\n      this.info.y = NaN;\n      this.info.prevent = false;\n    },\n    save: function(e) {\n      this.info.x = e.clientX;\n      this.info.y = e.clientY;\n    },\n\n    mousedown: function(e) {\n      if (hasLeftMouseButton(e)) {\n        this.save(e);\n      }\n    },\n    click: function(e) {\n      if (hasLeftMouseButton(e)) {\n        this.forward(e);\n      }\n    },\n\n    touchstart: function(e) {\n      this.save(e.changedTouches[0], e);\n    },\n    touchend: function(e) {\n      this.forward(e.changedTouches[0], e);\n    },\n\n    forward: function(e, preventer) {\n      let dx = Math.abs(e.clientX - this.info.x);\n      let dy = Math.abs(e.clientY - this.info.y);\n      let t = gestures._findOriginalTarget(e);\n      // dx,dy can be NaN if `click` has been simulated and there was no `down` for `start`\n      if (isNaN(dx) || isNaN(dy) || (dx <= TAP_DISTANCE && dy <= TAP_DISTANCE) || isSyntheticClick(e)) {\n        // prevent taps from being generated if an event has canceled them\n        if (!this.info.prevent) {\n          gestures._fire(t, 'tap', {\n            x: e.clientX,\n            y: e.clientY,\n            sourceEvent: e,\n            preventer: preventer\n          });\n        }\n      }\n    }\n  });\n\n  /** @deprecated */\n  gestures.findOriginalTarget = gestures._findOriginalTarget;\n\n  /** @deprecated */\n  gestures.add = gestures._add;\n\n  Polymer.Gestures = gestures;\n\n})();\n(function() {\n\n  'use strict';\n\n  const gestures = Polymer.Gestures;\n\n  Polymer.GestureEventListeners = Polymer.dedupingMixin(function(superClass) {\n\n    return class GestureEventListeners extends superClass {\n\n      _addEventListenerToNode(node, eventName, handler) {\n        if (!gestures.addListener(node, eventName, handler) &&\n          super._addEventListenerToNode) {\n          super._addEventListenerToNode(node, eventName, handler);\n        }\n      }\n\n      _removeEventListenerFromNode(node, eventName, handler) {\n        if (!gestures.removeListener(node, eventName, handler) &&\n          super._removeEventListenerFromNode) {\n          super._removeEventListenerFromNode(node, eventName, handler);\n        }\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  // run a callback when HTMLImports are ready or immediately if\n  // this api is not available.\n  function whenImportsReady(cb) {\n    if (window.HTMLImports) {\n      HTMLImports.whenReady(cb);\n    } else {\n      cb();\n    }\n  }\n\n  /**\n   * Convenience method for importing an HTML document imperatively.\n   *\n   * This method creates a new `<link rel=\"import\">` element with\n   * the provided URL and appends it to the document to start loading.\n   * In the `onload` callback, the `import` property of the `link`\n   * element will contain the imported document contents.\n   *\n   * @method importHref\n   * @param {string} href URL to document to load.\n   * @param {Function=} onload Callback to notify when an import successfully\n   *   loaded.\n   * @param {Function=} onerror Callback to notify when an import\n   *   unsuccessfully loaded.\n   * @param {boolean=} optAsync True if the import should be loaded `async`.\n   *   Defaults to `false`.\n   * @return {HTMLLinkElement} The link element for the URL to be loaded.\n   */\n  Polymer.importHref = function(href, onload, onerror, optAsync) {\n    let link =\n      document.head.querySelector('link[href=\"' + href + '\"][import-href]');\n    if (!link) {\n      link = document.createElement('link');\n      link.rel = 'import';\n      link.href = href;\n      link.setAttribute('import-href', '');\n    }\n    // always ensure link has `async` attribute if user specified one,\n    // even if it was previously not async. This is considered less confusing.\n    if (optAsync) {\n      link.setAttribute('async', '');\n    }\n    // NOTE: the link may now be in 3 states: (1) pending insertion,\n    // (2) inflight, (3) already laoded. In each case, we need to add\n    // event listeners to process callbacks.\n    let cleanup = function() {\n      link.removeEventListener('load', loadListener);\n      link.removeEventListener('error', errorListener);\n    }\n    let loadListener = function(event) {\n      cleanup();\n      // In case of a successful load, cache the load event on the link so\n      // that it can be used to short-circuit this method in the future when\n      // it is called with the same href param.\n      link.__dynamicImportLoaded = true;\n      if (onload) {\n        whenImportsReady(() => {\n          onload(event);\n        });\n      }\n    };\n    let errorListener = function(event) {\n      cleanup();\n      // In case of an error, remove the link from the document so that it\n      // will be automatically created again the next time `importHref` is\n      // called.\n      if (link.parentNode) {\n        link.parentNode.removeChild(link);\n      }\n      if (onerror) {\n        whenImportsReady(() => {\n          onerror(event);\n        });\n      }\n    };\n    link.addEventListener('load', loadListener);\n    link.addEventListener('error', errorListener);\n    if (link.parentNode == null) {\n      document.head.appendChild(link);\n    // if the link already loaded, dispatch a fake load event\n    // so that listeners are called and get a proper event argument.\n    } else if (link.__dynamicImportLoaded) {\n      link.dispatchEvent(new Event('load'));\n    }\n    return link;\n  };\n\n})();\n(function() {\n\n  'use strict';\n\n  let scheduled = false;\n  let beforeRenderQueue = [];\n  let afterRenderQueue = [];\n\n  function schedule() {\n    scheduled = true;\n    // before next render\n    requestAnimationFrame(function() {\n      scheduled = false;\n      flushQueue(beforeRenderQueue);\n      // after the render\n      setTimeout(function() {\n        flushQueue(afterRenderQueue);\n      });\n    });\n  }\n\n  function flushQueue(queue) {\n    for (let i=0, q, context, callback, args; i<queue.length; i++) {\n      try {\n        q = queue[i];\n        context = q[0];\n        callback = q[1];\n        args = q[2];\n        callback.apply(context, args);\n      } catch(e) {\n        setTimeout(() => {\n          throw e;\n        })\n      }\n    }\n    queue.length = 0;\n  }\n\n  Polymer.RenderStatus = {\n\n    beforeNextRender: function(context, callback, args) {\n      if (!scheduled) {\n        schedule();\n      }\n      beforeRenderQueue.push([context, callback, args]);\n    },\n\n    afterNextRender: function(context, callback, args) {\n      if (!scheduled) {\n        schedule();\n      }\n      afterRenderQueue.push([context, callback, args]);\n    }\n\n  };\n\n})();\n(function() {\n\n  // unresolved\n\n  function resolve() {\n    document.body.removeAttribute('unresolved');\n  }\n\n  if (window.WebComponents) {\n    window.addEventListener('WebComponentsReady', resolve);\n  } else {\n    if (document.readyState === 'interactive' || document.readyState === 'complete') {\n      resolve();\n    } else {\n      window.addEventListener('DOMContentLoaded', resolve);\n    }\n  }\n\n})();\n(function() {\n\n  'use strict';\n\n  function newSplice(index, removed, addedCount) {\n    return {\n      index: index,\n      removed: removed,\n      addedCount: addedCount\n    };\n  }\n\n  const EDIT_LEAVE = 0;\n  const EDIT_UPDATE = 1;\n  const EDIT_ADD = 2;\n  const EDIT_DELETE = 3;\n\n  let ArraySplice = {\n\n    // Note: This function is *based* on the computation of the Levenshtein\n    // \"edit\" distance. The one change is that \"updates\" are treated as two\n    // edits - not one. With Array splices, an update is really a delete\n    // followed by an add. By retaining this, we optimize for \"keeping\" the\n    // maximum array items in the original array. For example:\n    //\n    //   'xxxx123' -> '123yyyy'\n    //\n    // With 1-edit updates, the shortest path would be just to update all seven\n    // characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n    // leaves the substring '123' intact.\n    calcEditDistances(current, currentStart, currentEnd,\n                                old, oldStart, oldEnd) {\n      // \"Deletion\" columns\n      let rowCount = oldEnd - oldStart + 1;\n      let columnCount = currentEnd - currentStart + 1;\n      let distances = new Array(rowCount);\n\n      // \"Addition\" rows. Initialize null column.\n      for (let i = 0; i < rowCount; i++) {\n        distances[i] = new Array(columnCount);\n        distances[i][0] = i;\n      }\n\n      // Initialize null row\n      for (let j = 0; j < columnCount; j++)\n        distances[0][j] = j;\n\n      for (let i = 1; i < rowCount; i++) {\n        for (let j = 1; j < columnCount; j++) {\n          if (this.equals(current[currentStart + j - 1], old[oldStart + i - 1]))\n            distances[i][j] = distances[i - 1][j - 1];\n          else {\n            let north = distances[i - 1][j] + 1;\n            let west = distances[i][j - 1] + 1;\n            distances[i][j] = north < west ? north : west;\n          }\n        }\n      }\n\n      return distances;\n    },\n\n    // This starts at the final weight, and walks \"backward\" by finding\n    // the minimum previous weight recursively until the origin of the weight\n    // matrix.\n    spliceOperationsFromEditDistances(distances) {\n      let i = distances.length - 1;\n      let j = distances[0].length - 1;\n      let current = distances[i][j];\n      let edits = [];\n      while (i > 0 || j > 0) {\n        if (i == 0) {\n          edits.push(EDIT_ADD);\n          j--;\n          continue;\n        }\n        if (j == 0) {\n          edits.push(EDIT_DELETE);\n          i--;\n          continue;\n        }\n        let northWest = distances[i - 1][j - 1];\n        let west = distances[i - 1][j];\n        let north = distances[i][j - 1];\n\n        let min;\n        if (west < north)\n          min = west < northWest ? west : northWest;\n        else\n          min = north < northWest ? north : northWest;\n\n        if (min == northWest) {\n          if (northWest == current) {\n            edits.push(EDIT_LEAVE);\n          } else {\n            edits.push(EDIT_UPDATE);\n            current = northWest;\n          }\n          i--;\n          j--;\n        } else if (min == west) {\n          edits.push(EDIT_DELETE);\n          i--;\n          current = west;\n        } else {\n          edits.push(EDIT_ADD);\n          j--;\n          current = north;\n        }\n      }\n\n      edits.reverse();\n      return edits;\n    },\n\n    /**\n     * Splice Projection functions:\n     *\n     * A splice map is a representation of how a previous array of items\n     * was transformed into a new array of items. Conceptually it is a list of\n     * tuples of\n     *\n     *   <index, removed, addedCount>\n     *\n     * which are kept in ascending index order of. The tuple represents that at\n     * the |index|, |removed| sequence of items were removed, and counting forward\n     * from |index|, |addedCount| items were added.\n     */\n\n    /**\n     * Lacking individual splice mutation information, the minimal set of\n     * splices can be synthesized given the previous state and final state of an\n     * array. The basic approach is to calculate the edit distance matrix and\n     * choose the shortest path through it.\n     *\n     * Complexity: O(l * p)\n     *   l: The length of the current array\n     *   p: The length of the old array\n     */\n    calcSplices(current, currentStart, currentEnd,\n                          old, oldStart, oldEnd) {\n      let prefixCount = 0;\n      let suffixCount = 0;\n      let splice;\n\n      let minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n      if (currentStart == 0 && oldStart == 0)\n        prefixCount = this.sharedPrefix(current, old, minLength);\n\n      if (currentEnd == current.length && oldEnd == old.length)\n        suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);\n\n      currentStart += prefixCount;\n      oldStart += prefixCount;\n      currentEnd -= suffixCount;\n      oldEnd -= suffixCount;\n\n      if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)\n        return [];\n\n      if (currentStart == currentEnd) {\n        splice = newSplice(currentStart, [], 0);\n        while (oldStart < oldEnd)\n          splice.removed.push(old[oldStart++]);\n\n        return [ splice ];\n      } else if (oldStart == oldEnd)\n        return [ newSplice(currentStart, [], currentEnd - currentStart) ];\n\n      let ops = this.spliceOperationsFromEditDistances(\n          this.calcEditDistances(current, currentStart, currentEnd,\n                                 old, oldStart, oldEnd));\n\n      splice = undefined;\n      let splices = [];\n      let index = currentStart;\n      let oldIndex = oldStart;\n      for (let i = 0; i < ops.length; i++) {\n        switch(ops[i]) {\n          case EDIT_LEAVE:\n            if (splice) {\n              splices.push(splice);\n              splice = undefined;\n            }\n\n            index++;\n            oldIndex++;\n            break;\n          case EDIT_UPDATE:\n            if (!splice)\n              splice = newSplice(index, [], 0);\n\n            splice.addedCount++;\n            index++;\n\n            splice.removed.push(old[oldIndex]);\n            oldIndex++;\n            break;\n          case EDIT_ADD:\n            if (!splice)\n              splice = newSplice(index, [], 0);\n\n            splice.addedCount++;\n            index++;\n            break;\n          case EDIT_DELETE:\n            if (!splice)\n              splice = newSplice(index, [], 0);\n\n            splice.removed.push(old[oldIndex]);\n            oldIndex++;\n            break;\n        }\n      }\n\n      if (splice) {\n        splices.push(splice);\n      }\n      return splices;\n    },\n\n    sharedPrefix(current, old, searchLength) {\n      for (let i = 0; i < searchLength; i++)\n        if (!this.equals(current[i], old[i]))\n          return i;\n      return searchLength;\n    },\n\n    sharedSuffix(current, old, searchLength) {\n      let index1 = current.length;\n      let index2 = old.length;\n      let count = 0;\n      while (count < searchLength && this.equals(current[--index1], old[--index2]))\n        count++;\n\n      return count;\n    },\n\n    calculateSplices(current, previous) {\n      return this.calcSplices(current, 0, current.length, previous, 0,\n                              previous.length);\n    },\n\n    equals(currentValue, previousValue) {\n      return currentValue === previousValue;\n    }\n\n  };\n\n  Polymer.ArraySplice = {\n    calculateSplices(current, previous) {\n      return ArraySplice.calculateSplices(current, previous);\n    }\n  }\n\n})();\n(function() {\n\n  let debouncerQueue = [];\n\n  Polymer.enqueueDebouncer = function(debouncer) {\n    debouncerQueue.push(debouncer);\n  }\n\n  function flushDebouncers() {\n    const didFlush = Boolean(debouncerQueue.length);\n    while (debouncerQueue.length) {\n      try {\n        debouncerQueue.shift().flush();\n      } catch(e) {\n        setTimeout(() => {\n          throw e;\n        });\n      }\n    }\n    return didFlush;\n  }\n\n  Polymer.flush = function() {\n    let shadyDOM, debouncers;\n    do {\n      shadyDOM = window.ShadyDOM && ShadyDOM.flush();\n      if (window.ShadyCSS && window.ShadyCSS.ScopingShim) {\n        window.ShadyCSS.ScopingShim.flush();\n      }\n      debouncers = flushDebouncers();\n    } while (shadyDOM || debouncers);\n  }\n\n})();\n(function() {\n\n  function isSlot(node) {\n    return (node.localName === 'slot');\n  }\n\n  function getEffectiveNodes(node) {\n    if (isSlot(node)) {\n      return node.assignedNodes({flatten: true});\n    } else {\n      return Array.from(node.childNodes).map(node => {\n        if (isSlot(node)) {\n          return node.assignedNodes({flatten: true});\n        } else {\n          return [node];\n        }\n      }).reduce((a, b) => a.concat(b), []);\n    }\n  }\n\n  let matchesSelector = (function() {\n    let p = Element.prototype;\n    let normalizedMatchesSelector = p.matches || p.matchesSelector ||\n      p.mozMatchesSelector || p.msMatchesSelector ||\n      p.oMatchesSelector || p.webkitMatchesSelector;\n\n    return function(node, selector) {\n      return normalizedMatchesSelector.call(node, selector);\n    }\n  })();\n\n  class EffectiveNodesObserver {\n\n    constructor(target, callback) {\n      /** @type {MutationObserver} */\n      this._shadyChildrenObserver = null;\n      /** @type {MutationObserver} */\n      this._nativeChildrenObserver = null;\n      this._connected = false;\n      this._target = target;\n      this.callback = callback;\n      this._effectiveNodes = [];\n      this._observer = null;\n      this._scheduled = false;\n      this._boundSchedule = () => {\n        this._schedule();\n      }\n      this._connect();\n      this._schedule();\n    }\n\n    _connect() {\n      if (isSlot(this._target)) {\n        this._listenSlots([this._target]);\n      } else {\n        this._listenSlots(this._target.children);\n        if (window.ShadyDOM) {\n          this._shadyChildrenObserver =\n            ShadyDOM.observeChildren(this._target, (mutations) => {\n              this._processMutations(mutations);\n            });\n        } else {\n          this._nativeChildrenObserver =\n            new MutationObserver((mutations) => {\n              this._processMutations(mutations);\n            });\n          this._nativeChildrenObserver.observe(this._target, {childList: true});\n        }\n      }\n      this._connected = true;\n    }\n\n    disconnect() {\n      if (isSlot(this._target)) {\n        this._unlistenSlots([this._target]);\n      } else {\n        this._unlistenSlots(this._target.children);\n        if (window.ShadyDOM && this._shadyChildrenObserver) {\n          ShadyDOM.unobserveChildren(this._shadyChildrenObserver);\n          this._shadyChildrenObserver = null;\n        } else if (this._nativeChildrenObserver) {\n          this._nativeChildrenObserver.disconnect();\n          this._nativeChildrenObserver = null;\n        }\n      }\n      this._connected = false;\n    }\n\n    _schedule() {\n      if (!this._scheduled) {\n        this._scheduled = true;\n        Polymer.Async.microTask.run(() => this.flush());\n      }\n    }\n\n    _processMutations(mutations) {\n      this._processSlotMutations(mutations);\n      this.flush();\n    }\n\n    _processSlotMutations(mutations) {\n      if (mutations) {\n        for (let i=0; i < mutations.length; i++) {\n          let mutation = mutations[i];\n          if (mutation.addedNodes) {\n            this._listenSlots(mutation.addedNodes);\n          }\n          if (mutation.removedNodes) {\n            this._unlistenSlots(mutation.removedNodes);\n          }\n        }\n      }\n    }\n\n    flush() {\n      if (!this._connected) {\n        return;\n      }\n      if (window.ShadyDOM) {\n        ShadyDOM.flush();\n      }\n      if (this._nativeChildrenObserver) {\n        this._processSlotMutations(this._nativeChildrenObserver.takeRecords());\n      } else if (this.shadyChildrenObserver) {\n        this._processSlotMutations(this._shadyChildrenObserver.takeRecords());\n      }\n      this._scheduled = false;\n      let info = {\n        target: this._target,\n        addedNodes: [],\n        removedNodes: []\n      };\n      let newNodes = getEffectiveNodes(this._target);\n      let splices = Polymer.ArraySplice.calculateSplices(newNodes,\n        this._effectiveNodes);\n      // process removals\n      for (let i=0, s; (i<splices.length) && (s=splices[i]); i++) {\n        for (let j=0, n; (j < s.removed.length) && (n=s.removed[j]); j++) {\n          info.removedNodes.push(n);\n        }\n      }\n      // process adds\n      for (let i=0, s; (i<splices.length) && (s=splices[i]); i++) {\n        for (let j=s.index; j < s.index + s.addedCount; j++) {\n          info.addedNodes.push(newNodes[j]);\n        }\n      }\n      // update cache\n      this._effectiveNodes = newNodes;\n      if (info.addedNodes.length || info.removedNodes.length) {\n        this.callback.call(this._target, info);\n      }\n    }\n\n    _listenSlots(nodeList) {\n      for (let i=0; i < nodeList.length; i++) {\n        let n = nodeList[i];\n        if (isSlot(n)) {\n          n.addEventListener('slotchange', this._boundSchedule);\n        }\n      }\n    }\n\n    _unlistenSlots(nodeList) {\n      for (let i=0; i < nodeList.length; i++) {\n        let n = nodeList[i];\n        if (isSlot(n)) {\n          n.removeEventListener('slotchange', this._boundSchedule);\n        }\n      }\n    }\n\n  }\n\n  class DomApi {\n\n    constructor(node) {\n      if (window.ShadyDOM) {\n        ShadyDOM.patch(node);\n      }\n      this.node = node;\n    }\n\n    observeNodes(callback) {\n      return new EffectiveNodesObserver(this.node, callback);\n    }\n\n    unobserveNodes(observerHandle) {\n      observerHandle.disconnect();\n    }\n\n    notifyObserver() {}\n\n    deepContains(node) {\n      if (this.node.contains(node)) {\n        return true;\n      }\n      let n = node;\n      let doc = node.ownerDocument;\n      // walk from node to `this` or `document`\n      while (n && n !== doc && n !== this.node) {\n        // use logical parentnode, or native ShadowRoot host\n        n = Polymer.dom(n).parentNode || n.host;\n      }\n      return n === this.node;\n    }\n\n    getOwnerRoot() {\n      return this.node.getRootNode();\n    }\n\n    getDistributedNodes() {\n      return (this.node.localName === 'slot') ?\n        this.node.assignedNodes({flatten: true}) :\n        [];\n    }\n\n    getDestinationInsertionPoints() {\n      let ip$ = [];\n      let n = this.node.assignedSlot;\n      while (n) {\n        ip$.push(n);\n        n = n.assignedSlot;\n      }\n      return ip$;\n    }\n\n    importNode(externalNode, deep) {\n      let doc = this.node instanceof Document ? this.node :\n        this.node.ownerDocument;\n      return doc.importNode(externalNode, deep);\n    }\n\n    getEffectiveChildNodes() {\n      return getEffectiveNodes(this.node);\n    }\n\n    queryDistributedElements(selector) {\n      let c$ = this.getEffectiveChildNodes();\n      let list = [];\n      for (let i=0, l=c$.length, c; (i<l) && (c=c$[i]); i++) {\n        if ((c.nodeType === Node.ELEMENT_NODE) &&\n            matchesSelector(c, selector)) {\n          list.push(c);\n        }\n      }\n      return list;\n    }\n\n    get activeElement() {\n      let node = this.node;\n      return node._activeElement !== undefined ? node._activeElement : node.activeElement;\n    }\n  }\n\n  function forwardMethods(proto, methods) {\n    for (let i=0; i < methods.length; i++) {\n      let method = methods[i];\n      proto[method] = function() {\n        return this.node[method].apply(this.node, arguments);\n      }\n    }\n  }\n\n  function forwardReadOnlyProperties(proto, properties) {\n    for (let i=0; i < properties.length; i++) {\n      let name = properties[i];\n      Object.defineProperty(proto, name, {\n        get: function() {\n          return this.node[name];\n        },\n        configurable: true\n      });\n    }\n  }\n\n  function forwardProperties(proto, properties) {\n    for (let i=0; i < properties.length; i++) {\n      let name = properties[i];\n      Object.defineProperty(proto, name, {\n        get: function() {\n          return this.node[name];\n        },\n        set: function(value) {\n          this.node[name] = value;\n        },\n        configurable: true\n      });\n    }\n  }\n\n  forwardMethods(DomApi.prototype, [\n    'cloneNode', 'appendChild', 'insertBefore', 'removeChild',\n    'replaceChild', 'setAttribute', 'removeAttribute',\n    'querySelector', 'querySelectorAll'\n  ]);\n\n  forwardReadOnlyProperties(DomApi.prototype, [\n    'parentNode', 'firstChild', 'lastChild',\n    'nextSibling', 'previousSibling', 'firstElementChild',\n    'lastElementChild', 'nextElementSibling', 'previousElementSibling',\n    'childNodes', 'children', 'classList'\n  ]);\n\n  forwardProperties(DomApi.prototype, [\n    'textContent', 'innerHTML'\n  ]);\n\n\n  class EventApi {\n    constructor(event) {\n      this.event = event;\n    }\n\n    get rootTarget() {\n      return this.event.composedPath()[0];\n    }\n\n    get localTarget() {\n      return this.event.target;\n    }\n\n    get path() {\n      return this.event.composedPath();\n    }\n  }\n\n  Polymer.dom = function(obj) {\n    obj = obj || document;\n    let ctor = obj instanceof Event ? EventApi : DomApi;\n    if (!obj.__domApi) {\n      obj.__domApi = new ctor(obj);\n    }\n    return obj.__domApi;\n  };\n\n  Polymer.dom.matchesSelector = matchesSelector;\n\n  Polymer.dom.flush = Polymer.flush;\n\n  Polymer.dom.addDebouncer = Polymer.enqueueDebouncer;\n\n  Polymer.Settings = {\n    useShadow: true\n  };\n\n})();\n(function() {\n\n  'use strict';\n\n  let styleInterface = window.ShadyCSS;\n\n  Polymer.LegacyElementMixin = Polymer.dedupingMixin(function(base) {\n\n    const mixin = Polymer.GestureEventListeners(Polymer.ElementMixin(base));\n\n    return class LegacyElement extends mixin {\n\n      constructor() {\n        super();\n        this.created();\n      }\n\n      created() {}\n\n      connectedCallback() {\n        super.connectedCallback();\n        this.isAttached = true;\n        this.attached();\n      }\n\n      attached() {}\n\n      disconnectedCallback() {\n        super.disconnectedCallback();\n        this.isAttached = false;\n        this.detached();\n      }\n\n      detached() {}\n\n      attributeChangedCallback(name, old, value) {\n        if (old !== value) {\n          super.attributeChangedCallback(name, old, value);\n          this.attributeChanged(name, old, value);\n        }\n      }\n\n      attributeChanged() {}\n\n      _initializeProperties() {\n        this._registered();\n        super._initializeProperties();\n      }\n\n      /**\n       * Called automatically when an element is initializing.\n       * Users may override this method to perform class registration time\n       * work. The implementation should ensure the work is performed\n       * only once for the class.\n       * @protected\n       */\n      _registered() {}\n\n      ready() {\n        this._ensureAttributes();\n        this._applyListeners();\n        super.ready();\n      }\n\n      /**\n       * Ensures an element has required attributes. Called when the element\n       * is being readied via `ready`. Users should override to set the\n       * element's required attributes. The implementation should be sure\n       * to check and not override existing attributes added by\n       * the user of the element. Typically, setting attributes should be left\n       * to the element user and not done here; reasonable exceptions include\n       * setting aria roles and focusability.\n       * @protected\n       */\n      _ensureAttributes() {}\n\n      /**\n       * Adds element event listeners. Called when the element\n       * is being readied via `ready`. Users should override to\n       * add any required element event listeners.\n       * In performance critical elements, the work done here should be kept\n       * to a minimum since it is done before the element is rendered. In\n       * these elements, consider adding listeners asychronously so as not to\n       * block render.\n       * @protected\n       */\n      _applyListeners() {}\n\n      serialize(value) {\n        return this._serializeValue(value);\n      }\n\n      deserialize(value, type) {\n        return this._deserializeValue(value, type);\n      }\n\n      reflectPropertyToAttribute(property, attribute, value) {\n        this._propertyToAttribute(this, property, attribute, value);\n      }\n\n      serializeValueToAttribute(value, attribute, node) {\n        this._valueToNodeAttribute(node || this, value, attribute);\n      }\n\n      /**\n       * Copies own properties (including accessor descriptors) from a source\n       * object to a target object.\n       *\n       * @method extend\n       * @param {Object} prototype Target object to copy properties to.\n       * @param {Object} api Source object to copy properties from.\n       * @return {Object} prototype object that was passed as first argument.\n       */\n      extend(prototype, api) {\n        if (!(prototype && api)) {\n          return prototype || api;\n        }\n        let n$ = Object.getOwnPropertyNames(api);\n        for (let i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n          let pd = Object.getOwnPropertyDescriptor(api, n);\n          if (pd) {\n            Object.defineProperty(prototype, n, pd);\n          }\n        }\n        return prototype;\n      }\n\n      /**\n       * Copies props from a source object to a target object.\n       *\n       * Note, this method uses a simple `for...in` strategy for enumerating\n       * properties.  To ensure only `ownProperties` are copied from source\n       * to target and that accessor implementations are copied, use `extend`.\n       *\n       * @method mixin\n       * @param {Object} target Target object to copy properties to.\n       * @param {Object} source Source object to copy properties from.\n       * @return {Object} Target object that was passed as first argument.\n       */\n      mixin(target, source) {\n        return Polymer.mixin(target, source);\n      }\n\n      chainObject(object, inherited) {\n        if (object && inherited && object !== inherited) {\n          object.__proto__ = inherited;\n        }\n        return object;\n      }\n\n      /* **** Begin Template **** */\n      /**\n       * Calls `importNode` on the `content` of the `template` specified and\n       * returns a document fragment containing the imported content.\n       *\n       * @method instanceTemplate\n       * @param {HTMLTemplateElement} template HTML template element to instance.\n       * @return {DocumentFragment} Document fragment containing the imported\n       *   template content.\n      */\n      instanceTemplate(template) {\n        var dom = /** @type {DocumentFragment} */\n          (document.importNode(template._content || template.content, true));\n        return dom;\n      }\n\n      /* **** Begin Events **** */\n      /**\n       * Dispatches a custom event with an optional detail value.\n       *\n       * @method fire\n       * @param {string} type Name of event type.\n       * @param {*=} detail Detail value containing event-specific\n       *   payload.\n       * @param {Object=} options Object specifying options.  These may include:\n       *  `bubbles` (boolean, defaults to `true`),\n       *  `cancelable` (boolean, defaults to false), and\n       *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n       * @return {Event} The new event that was fired.\n       */\n      fire(type, detail, options) {\n        options = options || {};\n        detail = (detail === null || detail === undefined) ? {} : detail;\n        var event = new Event(type, {\n          bubbles: options.bubbles === undefined ? true : options.bubbles,\n          cancelable: Boolean(options.cancelable),\n          composed: options.composed === undefined ? true: options.composed\n        });\n        event.detail = detail;\n        var node = options.node || this;\n        node.dispatchEvent(event)\n        return event;\n      }\n\n      /**\n       * Convenience method to add an event listener on a given element,\n       * late bound to a named method on this element.\n       *\n       * @method listen\n       * @param {Element} node Element to add event listener to.\n       * @param {string} eventName Name of event to listen for.\n       * @param {string} methodName Name of handler method on `this` to call.\n       */\n      listen(node, eventName, methodName) {\n        node = node || this;\n        var hbl = this.__boundListeners ||\n          (this.__boundListeners = new WeakMap());\n        var bl = hbl.get(node);\n        if (!bl) {\n          bl = {};\n          hbl.set(node, bl);\n        }\n        var key = eventName + methodName;\n        if (!bl[key]) {\n          bl[key] = this._addMethodEventListenerToNode(\n            node, eventName, methodName, this);\n        }\n      }\n\n      /**\n       * Convenience method to remove an event listener from a given element,\n       * late bound to a named method on this element.\n       *\n       * @method unlisten\n       * @param {Element} node Element to remove event listener from.\n       * @param {string} eventName Name of event to stop listening to.\n       * @param {string} methodName Name of handler method on `this` to not call\n       anymore.\n       */\n      unlisten(node, eventName, methodName) {\n        node = node || this;\n        var bl = this.__boundListeners && this.__boundListeners.get(node);\n        var key = eventName + methodName;\n        var handler = bl && bl[key];\n        if (handler) {\n          this._removeEventListenerFromNode(node, eventName, handler);\n          bl[key] = null;\n        }\n      }\n\n      /**\n       * Override scrolling behavior to all direction, one direction, or none.\n       *\n       * Valid scroll directions:\n       *   - 'all': scroll in any direction\n       *   - 'x': scroll only in the 'x' direction\n       *   - 'y': scroll only in the 'y' direction\n       *   - 'none': disable scrolling for this node\n       *\n       * @method setScrollDirection\n       * @param {String=} direction Direction to allow scrolling\n       * Defaults to `all`.\n       * @param {HTMLElement=} node Element to apply scroll direction setting.\n       * Defaults to `this`.\n       */\n      setScrollDirection(direction, node) {\n        Polymer.Gestures.setTouchAction(node || this, direction || 'auto');\n      }\n      /* **** End Events **** */\n\n      /**\n       * Convenience method to run `querySelector` on this local DOM scope.\n       *\n       * This function calls `Polymer.dom(this.root).querySelector(slctr)`.\n       *\n       * @method $$\n       * @param {string} slctr Selector to run on this local DOM scope\n       * @return {Element} Element found by the selector, or null if not found.\n       */\n      $$(slctr) {\n        return this.root.querySelector(slctr);\n      }\n\n      /**\n       * Return the element whose local dom within which this element\n       * is contained. This is a shorthand for\n       * `this.getRootNode().host`.\n       */\n      get domHost() {\n        var root = this.getRootNode();\n        return (root instanceof DocumentFragment) ? root.host : root;\n      }\n\n      /**\n       * Force this element to distribute its children to its local dom.\n       * This is necessary only when ShadyDOM is used and only in cases that\n       * are not automatically handled. For example,\n       * a user should call `distributeContent` if distribution has been\n       * invalidated due to an element being added or removed from the shadowRoot\n       * that contains an insertion point (<slot>) inside its subtree.\n       * @method distributeContent\n       */\n      distributeContent() {\n        if (window.ShadyDOM && this.shadowRoot) {\n          this.shadowRoot.forceRender();\n        }\n      }\n\n      /**\n       * Returns a list of nodes that are the effective childNodes. The effective\n       * childNodes list is the same as the element's childNodes except that\n       * any `<content>` elements are replaced with the list of nodes distributed\n       * to the `<content>`, the result of its `getDistributedNodes` method.\n       *\n       * @method getEffectiveChildNodes\n       * @return {Array<Node>} List of effctive child nodes.\n       */\n      getEffectiveChildNodes() {\n        return Polymer.dom(this).getEffectiveChildNodes();\n      }\n\n      /**\n       * Returns a list of nodes distributed within this element that match\n       * `selector`. These can be dom children or elements distributed to\n       * children that are insertion points.\n       * @method queryDistributedElements\n       * @param {string} selector Selector to run.\n       * @return {Array<Node>} List of distributed elements that match selector.\n       */\n      queryDistributedElements(selector) {\n        return Polymer.dom(this).queryDistributedElements(selector);\n      }\n\n      /**\n       * Returns a list of elements that are the effective children. The effective\n       * children list is the same as the element's children except that\n       * any `<content>` elements are replaced with the list of elements\n       * distributed to the `<content>`.\n       *\n       * @method getEffectiveChildren\n       * @return {Array<Node>} List of effctive children.\n       */\n      getEffectiveChildren() {\n        var list = this.getEffectiveChildNodes();\n        return list.filter(function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      }\n\n      /**\n       * Returns a string of text content that is the concatenation of the\n       * text content's of the element's effective childNodes (the elements\n       * returned by <a href=\"#getEffectiveChildNodes>getEffectiveChildNodes</a>.\n       *\n       * @method getEffectiveTextContent\n       * @return {string} List of effctive children.\n       */\n      getEffectiveTextContent() {\n        var cn = this.getEffectiveChildNodes();\n        var tc = [];\n        for (var i=0, c; (c = cn[i]); i++) {\n          if (c.nodeType !== Node.COMMENT_NODE) {\n            tc.push(c.textContent);\n          }\n        }\n        return tc.join('');\n      }\n\n      /**\n       * Returns the first effective childNode within this element that\n       * match `selector`. These can be dom child nodes or elements distributed\n       * to children that are insertion points.\n       * @method queryEffectiveChildren\n       * @param {string} selector Selector to run.\n       * @return {Object<Node>} First effective child node that matches selector.\n       */\n      queryEffectiveChildren(selector) {\n        var e$ = this.queryDistributedElements(selector);\n        return e$ && e$[0];\n      }\n\n      /**\n       * Returns a list of effective childNodes within this element that\n       * match `selector`. These can be dom child nodes or elements distributed\n       * to children that are insertion points.\n       * @method queryEffectiveChildren\n       * @param {string} selector Selector to run.\n       * @return {Array<Node>} List of effective child nodes that match selector.\n       */\n      queryAllEffectiveChildren(selector) {\n        return this.queryDistributedElements(selector);\n      }\n\n      /**\n       * Returns a list of nodes distributed to this element's `<content>`.\n       *\n       * If this element contains more than one `<content>` in its local DOM,\n       * an optional selector may be passed to choose the desired content.\n       *\n       * @method getContentChildNodes\n       * @param {String=} slctr CSS selector to choose the desired\n       *   `<content>`.  Defaults to `content`.\n       * @return {Array<Node>} List of distributed nodes for the `<content>`.\n       */\n      getContentChildNodes(slctr) {\n        var content = this.root.querySelector(slctr || 'content');\n        return content ? content.getDistributedNodes() : [];\n      }\n\n      /**\n       * Returns a list of element children distributed to this element's\n       * `<content>`.\n       *\n       * If this element contains more than one `<content>` in its\n       * local DOM, an optional selector may be passed to choose the desired\n       * content.  This method differs from `getContentChildNodes` in that only\n       * elements are returned.\n       *\n       * @method getContentChildNodes\n       * @param {String=} slctr CSS selector to choose the desired\n       *   `<content>`.  Defaults to `content`.\n       * @return {Array<HTMLElement>} List of distributed nodes for the\n       *   `<content>`.\n       */\n      getContentChildren(slctr) {\n        return this.getContentChildNodes(slctr).filter(function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      }\n\n      /**\n       * Checks whether an element is in this element's light DOM tree.\n       *\n       * @method isLightDescendant\n       * @param {?Node} node The element to be checked.\n       * @return {Boolean} true if node is in this element's light DOM tree.\n       */\n      isLightDescendant(node) {\n        return this !== node && this.contains(node) &&\n            this.getRootNode() === node.getRootNode();\n      }\n\n      /**\n       * Checks whether an element is in this element's local DOM tree.\n       *\n       * @method isLocalDescendant\n       * @param {HTMLElement=} node The element to be checked.\n       * @return {boolean} true if node is in this element's local DOM tree.\n       */\n      isLocalDescendant(node) {\n        return this.root === node.getRootNode();\n      }\n\n      // NOTE: should now be handled by ShadyCss library.\n      scopeSubtree(container, shouldObserve) { // eslint-disable-line no-unused-vars\n      }\n\n      /**\n       * Returns the computed style value for the given property.\n       * @param {String} property\n       * @return {String} the computed value\n       */\n      getComputedStyleValue(property) {\n        return styleInterface.getComputedStyleValue(this, property);\n      }\n\n      // debounce\n\n      /**\n       * Call `debounce` to collapse multiple requests for a named task into\n       * one invocation which is made after the wait time has elapsed with\n       * no new request.  If no wait time is given, the callback will be called\n       * at microtask timing (guaranteed before paint).\n       *\n       *     debouncedClickAction(e) {\n       *       // will not call `processClick` more than once per 100ms\n       *       this.debounce('click', function() {\n       *        this.processClick();\n       *       } 100);\n       *     }\n       *\n       * @method debounce\n       * @param {String} jobName String to indentify the debounce job.\n       * @param {function()} callback Function that is called (with `this`\n       *   context) when the wait time elapses.\n       * @param {number} wait Optional wait time in milliseconds (ms) after the\n       *   last signal that must elapse before invoking `callback`\n       */\n      debounce(jobName, callback, wait) {\n        this._debouncers = this._debouncers || {};\n        return this._debouncers[jobName] = Polymer.Debouncer.debounce(\n              this._debouncers[jobName]\n            , wait > 0 ? Polymer.Async.timeOut.after(wait) : Polymer.Async.microTask\n            , callback.bind(this));\n      }\n\n      /**\n       * Returns whether a named debouncer is active.\n       *\n       * @method isDebouncerActive\n       * @param {String} jobName The name of the debouncer started with `debounce`\n       * @return {boolean} Whether the debouncer is active (has not yet fired).\n       */\n      isDebouncerActive(jobName) {\n        this._debouncers = this._debouncers || {};\n        var debouncer = this._debouncers[jobName];\n        return !!(debouncer && debouncer.isActive());\n      }\n\n      /**\n       * Immediately calls the debouncer `callback` and inactivates it.\n       *\n       * @method flushDebouncer\n       * @param {String} jobName The name of the debouncer started with `debounce`\n       */\n      flushDebouncer(jobName) {\n        this._debouncers = this._debouncers || {};\n        var debouncer = this._debouncers[jobName];\n        if (debouncer) {\n          debouncer.flush();\n        }\n      }\n\n      /**\n       * Cancels an active debouncer.  The `callback` will not be called.\n       *\n       * @method cancelDebouncer\n       * @param {String} jobName The name of the debouncer started with `debounce`\n       */\n      cancelDebouncer(jobName) {\n        this._debouncers = this._debouncers || {}\n        var debouncer = this._debouncers[jobName];\n        if (debouncer) {\n          debouncer.cancel();\n        }\n      }\n\n      /**\n       * Runs a callback function asyncronously.\n       *\n       * By default (if no waitTime is specified), async callbacks are run at\n       * microtask timing, which will occur before paint.\n       *\n       * @method async\n       * @param {Function} callback The callback function to run, bound to `this`.\n       * @param {number=} waitTime Time to wait before calling the\n       *   `callback`.  If unspecified or 0, the callback will be run at microtask\n       *   timing (before paint).\n       * @return {number} Handle that may be used to cancel the async job.\n       */\n      async(callback, waitTime) {\n        return waitTime > 0 ? Polymer.Async.timeOut.run(callback.bind(this), waitTime) :\n            ~Polymer.Async.microTask.run(callback.bind(this));\n      }\n\n      /**\n       * Cancels an async operation started with `async`.\n       *\n       * @method cancelAsync\n       * @param {number} handle Handle returned from original `async` call to\n       *   cancel.\n       */\n      cancelAsync(handle) {\n        handle < 0 ? Polymer.Async.microTask.cancel(~handle) :\n            Polymer.Async.timeOut.cancel(handle);\n      }\n\n      // other\n\n      /**\n       * Convenience method for creating an element and configuring it.\n       *\n       * @method create\n       * @param {string} tag HTML element tag to create.\n       * @param {Object} props Object of properties to configure on the\n       *    instance.\n       * @return {Element} Newly created and configured element.\n       */\n      create(tag, props) {\n        var elt = document.createElement(tag);\n        if (props) {\n          if (elt.setProperties) {\n            elt.setProperties(props);\n          } else {\n            for (var n in props) {\n              elt[n] = props[n];\n            }\n          }\n        }\n        return elt;\n      }\n\n      /**\n       * Convenience method for importing an HTML document imperatively.\n       *\n       * This method creates a new `<link rel=\"import\">` element with\n       * the provided URL and appends it to the document to start loading.\n       * In the `onload` callback, the `import` property of the `link`\n       * element will contain the imported document contents.\n       *\n       * @method importHref\n       * @param {string} href URL to document to load.\n       * @param {Function} onload Callback to notify when an import successfully\n       *   loaded.\n       * @param {Function} onerror Callback to notify when an import\n       *   unsuccessfully loaded.\n       * @param {boolean} optAsync True if the import should be loaded `async`.\n       *   Defaults to `false`.\n       * @return {HTMLLinkElement} The link element for the URL to be loaded.\n       */\n      importHref(href, onload, onerror, optAsync) { // eslint-disable-line no-unused-vars\n        let loadFn = onload ? onload.bind(this) : null;\n        let errorFn = onerror ? onerror.bind(this) : null;\n        return Polymer.importHref(href, loadFn, errorFn, optAsync);\n      }\n\n      /**\n       * Polyfill for Element.prototype.matches, which is sometimes still\n       * prefixed.\n       *\n       * @method elementMatches\n       * @param {string} selector Selector to test.\n       * @param {Element=} node Element to test the selector against.\n       * @return {boolean} Whether the element matches the selector.\n       */\n      elementMatches(selector, node) {\n        return Polymer.dom.matchesSelector(node || this, selector);\n      }\n\n      /**\n       * Toggles an HTML attribute on or off.\n       *\n       * @method toggleAttribute\n       * @param {String} name HTML attribute name\n       * @param {boolean=} bool Boolean to force the attribute on or off.\n       *    When unspecified, the state of the attribute will be reversed.\n       * @param {HTMLElement=} node Node to target.  Defaults to `this`.\n       */\n      toggleAttribute(name, bool, node) {\n        node = node || this;\n        if (arguments.length == 1) {\n          bool = !node.hasAttribute(name);\n        }\n        if (bool) {\n          node.setAttribute(name, '');\n        } else {\n          node.removeAttribute(name);\n        }\n      }\n\n\n      /**\n       * Toggles a CSS class on or off.\n       *\n       * @method toggleClass\n       * @param {String} name CSS class name\n       * @param {boolean=} bool Boolean to force the class on or off.\n       *    When unspecified, the state of the class will be reversed.\n       * @param {HTMLElement=} node Node to target.  Defaults to `this`.\n       */\n      toggleClass(name, bool, node) {\n        node = node || this;\n        if (arguments.length == 1) {\n          bool = !node.classList.contains(name);\n        }\n        if (bool) {\n          node.classList.add(name);\n        } else {\n          node.classList.remove(name);\n        }\n      }\n\n      /**\n       * Cross-platform helper for setting an element's CSS `transform` property.\n       *\n       * @param {string} transformText Transform setting.\n       * @param {HTMLElement=} node Element to apply the transform to.\n       * Defaults to `this`\n       */\n      transform(transformText, node) {\n        node = node || this;\n        node.style.webkitTransform = transformText;\n        node.style.transform = transformText;\n      }\n\n      /**\n       * Cross-platform helper for setting an element's CSS `translate3d`\n       * property.\n       *\n       * @method translate3d\n       * @param {number} x X offset.\n       * @param {number} y Y offset.\n       * @param {number} z Z offset.\n       * @param {HTMLElement=} node Element to apply the transform to.\n       * Defaults to `this`.\n       */\n      translate3d(x, y, z, node) {\n        node = node || this;\n        this.transform('translate3d(' + x + ',' + y + ',' + z + ')', node);\n      }\n\n      /**\n       * Removes an item from an array, if it exists.\n       *\n       * If the array is specified by path, a change notification is\n       * generated, so that observers, data bindings and computed\n       * properties watching that path can update.\n       *\n       * If the array is passed directly, **no change\n       * notification is generated**.\n       *\n       * @method arrayDelete\n       * @param {string | !Array<number|string>} arrayOrPath Path to array from which to remove the item\n       *   (or the array itself).\n       * @param {*} item Item to remove.\n       * @return {Array} Array containing item removed.\n       */\n      arrayDelete(arrayOrPath, item) {\n        var index;\n        if (Array.isArray(arrayOrPath)) {\n          index = arrayOrPath.indexOf(item);\n          if (index >= 0) {\n            return arrayOrPath.splice(index, 1);\n          }\n        } else {\n          var arr = Polymer.Path.get(this, arrayOrPath);\n          index = arr.indexOf(item);\n          if (index >= 0) {\n            return this.splice(arrayOrPath, index, 1);\n          }\n        }\n        return null;\n      }\n\n      // logging\n      _logger(level, args) {\n        // accept ['foo', 'bar'] and [['foo', 'bar']]\n        if (Array.isArray(args) && args.length === 1) {\n          args = args[0];\n        }\n        switch(level) {\n          case 'log':\n          case 'warn':\n          case 'error':\n            console[level](...args);\n        }\n      }\n\n      _log(...args) {\n        this._logger('log', args);\n      }\n\n      _warn(...args) {\n        this._logger('warn', args);\n      }\n\n      _error(...args) {\n        this._logger('error', args)\n      }\n\n      _logf(...args) {\n        return ['[%s::%s]', this.is, ...args];\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n    'use strict';\n\n    let LegacyElementMixin = Polymer.LegacyElementMixin;\n\n    let metaProps = {\n      attached: true,\n      detached: true,\n      ready: true,\n      created: true,\n      beforeRegister: true,\n      registered: true,\n      attributeChanged: true,\n      // meta objects\n      behaviors: true,\n      hostAttributes: true,\n      properties: true,\n      observers: true,\n      listeners: true\n    }\n\n    function mixinBehaviors(behaviors, klass) {\n      if (!behaviors) {\n        return klass;\n      }\n      // NOTE: ensure the bahevior is extending a class with\n      // legacy element api. This is necessary since behaviors expect to be able\n      // to access 1.x legacy api.\n      klass = LegacyElementMixin(klass);\n      if (!Array.isArray(behaviors)) {\n        behaviors = [behaviors];\n      }\n      let superBehaviors = klass.behaviors;\n      // get flattened, deduped list of behaviors *not* already on super class\n      behaviors = flattenBehaviors(behaviors, null, superBehaviors);\n      // mixin new behaviors\n      klass = _mixinBehaviors(behaviors, klass);\n      if (superBehaviors) {\n        behaviors = superBehaviors.concat(behaviors);\n      }\n      klass.behaviors = behaviors;\n      return klass;\n    }\n\n    // NOTE:\n    // 1.x\n    // Behaviors were mixed in *in reverse order* and de-duped on the fly.\n    // The rule was that behavior properties were copied onto the element\n    // prototype if and only if the property did not already exist.\n    // Given: Polymer{ behaviors: [A, B, C, A, B]}, property copy order was:\n    // (1), B, (2), A, (3) C. This means prototype properties win over\n    // B properties win over A win over C. This mirrors what would happen\n    // with inheritance if element extended B extended A extended C.\n    //\n    // Again given, Polymer{ behaviors: [A, B, C, A, B]}, the resulting\n    // `behaviors` array was [C, A, B].\n    // Behavior lifecycle methods were called in behavior array order\n    // followed by the element, e.g. (1) C.created, (2) A.created,\n    // (3) B.created, (4) element.created. There was no support for\n    // super, and \"super-behavior\" methods were callable only by name).\n    //\n    // 2.x\n    // Behaviors are made into proper mixins which live in the\n    // element's prototype chain. Behaviors are placed in the element prototype\n    // eldest to youngest and de-duped youngest to oldest:\n    // So, first [A, B, C, A, B] becomes [C, A, B] then,\n    // the element prototype becomes (oldest) (1) Polymer.Element, (2) class(C),\n    // (3) class(A), (4) class(B), (5) class(Polymer({...})).\n    // Result:\n    // This means element properties win over B properties win over A win\n    // over C. (same as 1.x)\n    // If lifecycle is called (super then me), order is\n    // (1) C.created, (2) A.created, (3) B.created, (4) element.created\n    // (again same as 1.x)\n    function _mixinBehaviors(behaviors, klass) {\n      for (let i=0; i<behaviors.length; i++) {\n        let b = behaviors[i];\n        if (b) {\n          klass = Array.isArray(b) ? _mixinBehaviors(b, klass) :\n            GenerateClassFromInfo(b, klass);\n        }\n      }\n      return klass;\n    }\n\n    /**\n     * @param {Array} behaviors\n     * @param {Array=} list\n     * @param {Array=} exclude\n     */\n    function flattenBehaviors(behaviors, list, exclude) {\n      list = list || [];\n      for (let i=behaviors.length-1; i >= 0; i--) {\n        let b = behaviors[i];\n        if (b) {\n          if (Array.isArray(b)) {\n            flattenBehaviors(b, list);\n          } else {\n            // dedup\n            if (list.indexOf(b) < 0 && (!exclude || exclude.indexOf(b) < 0)) {\n              list.unshift(b);\n            }\n          }\n        } else {\n          Polymer._warn('behavior is null, check for missing or 404 import');\n        }\n      }\n      return list;\n    }\n\n    function GenerateClassFromInfo(info, Base) {\n\n      let config = {\n        properties: info.properties,\n        observers: info.observers,\n        generatedFrom: info\n      };\n\n      let registered = false;\n\n      class PolymerGenerated extends Base {\n\n        static get config() {\n          return config;\n        }\n\n        static get template() {\n          // get template first from any imperative set in `info._template`\n          return info._template ||\n            // next look in dom-module associated with this element's is.\n            Polymer.DomModule.import(this.is, 'template') ||\n            // next look for superclass template (note: use superclass symbol\n            // to ensure correct `this.is`)\n            Base.template ||\n            // finally fall back to `_template` in element's protoype.\n            this.prototype._template;\n        }\n\n        created() {\n          super.created();\n          if (info.created) {\n            info.created.call(this);\n          }\n        }\n\n        _registered() {\n          if (!registered) {\n            super._registered();\n            // call `registered` only if it was not called for *this* constructor\n            registered = true;\n            if (info.registered) {\n              info.registered.call(Object.getPrototypeOf(this));\n            }\n          }\n        }\n\n        _applyListeners() {\n          super._applyListeners();\n          if (info.listeners) {\n            for (let l in info.listeners) {\n              this._addMethodEventListenerToNode(this, l, info.listeners[l]);\n            }\n          }\n        }\n\n        // note: exception to \"super then me\" rule;\n        // do work before calling super so that super attributes\n        // only apply if not already set.\n        _ensureAttributes() {\n          if (info.hostAttributes) {\n            for (let a in info.hostAttributes) {\n              this._ensureAttribute(a, info.hostAttributes[a]);\n            }\n          }\n          super._ensureAttributes();\n        }\n\n        ready() {\n          super.ready();\n          if (info.ready) {\n            info.ready.call(this);\n          }\n        }\n\n        attached() {\n          super.attached();\n          if (info.attached) {\n            info.attached.call(this);\n          }\n        }\n\n        detached() {\n          super.detached();\n          if (info.detached) {\n            info.detached.call(this);\n          }\n        }\n\n        attributeChanged(name, old, value) {\n          super.attributeChanged(name, old, value);\n          if (info.attributeChanged) {\n            info.attributeChanged.call(this, name, old, value);\n          }\n       }\n      }\n\n      for (let p in info) {\n        // NOTE: cannot copy `metaProps` methods onto prototype at least because\n        // `super.ready` must be called and is not included in the user fn.\n        if (!(p in metaProps)) {\n          let pd = Object.getOwnPropertyDescriptor(info, p);\n          if (pd) {\n            Object.defineProperty(PolymerGenerated.prototype, p, pd);\n          }\n        }\n      }\n\n      return PolymerGenerated;\n    }\n\n    Polymer.Class = function(info) {\n      if (!info) {\n        Polymer._warn('Polymer.Class requires `info` argument');\n      }\n      let klass = GenerateClassFromInfo(info, info.behaviors ?\n        // note: mixinBehaviors ensures `LegacyElementMixin`.\n        mixinBehaviors(info.behaviors, HTMLElement) :\n        LegacyElementMixin(HTMLElement));\n      // decorate klass with registration info\n      klass.is = info.is;\n      // behaviors on prototype for BC...\n      klass.prototype.behaviors = klass.behaviors;\n      // NOTE: while we could call `beforeRegister` here to maintain\n      // some BC, the state of the element at this point is not as it was in 1.0\n      // In 1.0, the method was called *after* mixing prototypes together\n      // but before processing of meta-objects. Since this is now done\n      // in 1 step via `GenerateClassFromInfo`, this is no longer possible.\n      // However, *most* work (not setting `is`) that was previously done in\n      // `beforeRegister` should be possible in `registered`.\n      return klass;\n    }\n\n    Polymer.mixinBehaviors = mixinBehaviors;\n\n  })();\n(function() {\n\n    window.Polymer._polymerFn = function(info) {\n      // if input is a `class` (aka a function with a prototype), use the prototype\n      // remember that the `constructor` will never be called\n      var klass;\n      if (typeof info === 'function') {\n        klass = info;\n      } else {\n        klass = Polymer.Class(info);\n      }\n      var options = {};\n      if (klass.extends) {\n        options.extends = klass.extends;\n      }\n      customElements.define(klass.is, klass, options);\n      return klass;\n    };\n\n  })();\n(function() {\n    'use strict';\n\n    // Base class for HTMLTemplateElement extension that has property effects\n    // machinery for propagating host properties to children. This is an ES5\n    // class only because Babel (incorrectly) requires super() in the class\n    // constructor even though no `this` is used and it returns an instance.\n    let newInstance = null;\n    function HTMLTemplateElementExtension() { return newInstance; }\n    HTMLTemplateElementExtension.prototype = Object.create(HTMLTemplateElement.prototype, {\n      constructor: {\n        value: HTMLTemplateElementExtension,\n        writable: true\n      }\n    });\n    const DataTemplate = Polymer.PropertyEffects(HTMLTemplateElementExtension);\n\n    // Applies a DataTemplate subclass to a <template> instance\n    function upgradeTemplate(template, constructor) {\n      newInstance = template;\n      Object.setPrototypeOf(template, constructor.prototype);\n      new constructor();\n      newInstance = null;\n    }\n\n    // Base class for TemplateInstance's\n    class TemplateInstanceBase extends Polymer.PropertyEffects(class{}) {\n      constructor(props) {\n        super();\n        this._configureProperties(props);\n        this.root = this._stampTemplate(this.__dataHost);\n        // Save list of stamped children\n        let children = this.children = [];\n        for (let n = this.root.firstChild; n; n=n.nextSibling) {\n          children.push(n);\n          n._templateInstance = this;\n        }\n        if (this.__templatizeOwner.__hideTemplateChildren__) {\n          this._showHideChildren(true);\n        }\n        // Flush props only when props are passed if instance props exist\n        // or when there isn't instance props.\n        let options = this.__templatizeOptions;\n        if ((props && options.instanceProps) || !options.instanceProps) {\n          this._flushProperties(true);\n        }\n      }\n      _configureProperties(props) {\n        let options = this.__templatizeOptions;\n        if (props) {\n          for (let iprop in options.instanceProps) {\n            if (iprop in props) {\n              this[iprop] = props[iprop];\n            }\n          }\n        }\n        for (let hprop in this.__hostProps) {\n          this[hprop] = this.__dataHost['_host_' + hprop];\n        }\n      }\n      forwardHostProp(prop, value) {\n        if (this._setPendingPropertyOrPath(prop, value, true)) {\n          this.__dataHost._enqueueClient(this);\n        }\n      }\n      _addEventListenerToNode(node, eventName, handler) {\n        if (this._methodHost) {\n          this._methodHost._addEventListenerToNode(node, eventName, (e) => {\n            e.model = this;\n            handler(e);\n          });\n        }\n      }\n      _showHideChildren(hide) {\n        let c = this.children;\n        for (let i=0; i<c.length; i++) {\n          let n = c[i];\n          // Ignore non-changes\n          if (Boolean(hide) != Boolean(n.__hideTemplateChildren__)) {\n            if (n.nodeType === Node.TEXT_NODE) {\n              if (hide) {\n                n.__polymerTextContent__ = n.textContent;\n                n.textContent = '';\n              } else {\n                n.textContent = n.__polymerTextContent__;\n              }\n            } else if (n.style) {\n              if (hide) {\n                n.__polymerDisplay__ = n.style.display;\n                n.style.display = 'none';\n              } else {\n                n.style.display = n.__polymerDisplay__;\n              }\n            }\n          }\n          n.__hideTemplateChildren__ = hide;\n          if (n._showHideChildren) {\n            n._showHideChildren(hide);\n          }\n        }\n      }\n      /**\n       * Overrides default property-effects implementation to intercept\n       * textContent bindings while children are \"hidden\" and cache in\n       * private storage for later retrieval.\n       *\n       * @override\n       */\n      _setUnmanagedPropertyToNode(node, prop, value) {\n        if (node.__hideTemplateChildren__ &&\n            node.nodeType == Node.TEXT_NODE && prop == 'textContent') {\n          node.__polymerTextContent__ = value;\n        } else {\n          super._setUnmanagedPropertyToNode(node, prop, value);\n        }\n      }\n    }\n\n    function findMethodHost(template) {\n      // Technically this should be the owner of the outermost template.\n      // In shadow dom, this is always getRootNode().host, but we can\n      // approximate this via cooperation with our dataHost always setting\n      // `_methodHost` as long as there were bindings (or id's) on this\n      // instance causing it to get a dataHost.\n      let templateHost = template.__dataHost;\n      return templateHost && templateHost._methodHost || templateHost;\n    }\n\n    function createTemplatizerClass(template, options) {\n      // Anonymous class created by the templatize\n      /**\n       * @unrestricted\n       */\n      let klass = class extends TemplateInstanceBase { }\n      klass.prototype.__templatizeOptions = options;\n      klass.prototype._bindTemplate(template);\n      addNotifyEffects(klass, template, options);\n      return klass;\n    }\n\n    function addPropagateEffects(template, options) {\n      let userForwardHostProp = options.forwardHostProp;\n      if (userForwardHostProp) {\n        // Provide data API and property effects on memoized template class\n        let klass = template._content.__templatizeTemplateClass;\n        if (!klass) {\n          klass = template._content.__templatizeTemplateClass =\n            class TemplatizedTemplate extends DataTemplate {}\n          // Add template - >instances effects\n          // and host <- template effects\n          let hostProps = template._content._hostProps;\n          for (let prop in hostProps) {\n            klass.prototype._addPropertyEffect('_host_' + prop,\n              klass.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,\n              {fn: createForwardHostPropEffect(prop, userForwardHostProp)});\n            klass.prototype._createNotifyingProperty('_host_' + prop);\n          }\n        }\n        upgradeTemplate(template, klass);\n        // Mix any pre-bound data into __data; no need to flush this to\n        // instances since they pull from the template at instance-time\n        if (template.__dataProto) {\n          Polymer.mixin(template.__data, template.__dataProto);\n        }\n        // Clear any pending data since we're eliding a flush for performance\n        template.__dataOld = {};\n        template.__dataTemp = {};\n        template.__dataPending = {};\n      }\n    }\n\n    function createForwardHostPropEffect(hostProp, userForwardHostProp) {\n      return function forwardHostProp(template, prop, props) {\n        userForwardHostProp.call(template.__templatizeOwner,\n          prop.substring('_host_'.length), props[prop]);\n      }\n    }\n\n    function addNotifyEffects(klass, template, options) {\n      let hostProps = template._content._hostProps || {};\n      for (let iprop in options.instanceProps) {\n        delete hostProps[iprop];\n        let userNotifyInstanceProp = options.notifyInstanceProp;\n        if (userNotifyInstanceProp) {\n          klass.prototype._addPropertyEffect(iprop,\n            klass.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,\n            {fn: createNotifyInstancePropEffect(iprop, userNotifyInstanceProp)});\n        }\n      }\n      if (options.forwardHostProp && template.__dataHost) {\n        for (let hprop in hostProps) {\n          klass.prototype._addPropertyEffect(hprop,\n            klass.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,\n            {fn: createNotifyHostPropEffect()})\n        }\n      }\n    }\n\n    function createNotifyInstancePropEffect(instProp, userNotifyInstanceProp) {\n      return function notifyInstanceProp(inst, prop, props, oldProps, info, fromAbove) {\n        if (!fromAbove) {\n          userNotifyInstanceProp.call(inst.__templatizeOwner,\n            inst, prop, props[prop]);\n        }\n      }\n    }\n\n    function createNotifyHostPropEffect() {\n      return function notifyHostProp(inst, prop, props, oldProps, info, fromAbove) {\n        if (!fromAbove) {\n          inst.__dataHost._setPendingPropertyOrPath('_host_' + prop, props[prop], true);\n        }\n      }\n    }\n\n    let Templatize = {\n\n      templatize(template, owner, options) {\n        if (template.__templatizeOwner) {\n          throw new Error('A <template> can only be templatized once');\n        }\n        template.__templatizeOwner = owner;\n        // Ensure template has _content\n        template._content = template._content || template.content;\n        // Get memoized base class for the prototypical template, which\n        // includes property effects for binding template & forwarding\n        let baseClass = template._content.__templatizeInstanceClass;\n        if (!baseClass) {\n          baseClass = template._content.__templatizeInstanceClass =\n            createTemplatizerClass(template, options);\n        }\n        // Host property forwarding must be installed onto template instance\n        addPropagateEffects(template, options);\n        // Subclass base class and add reference for this specific template\n        let klass = class TemplateInstance extends baseClass {};\n        klass.prototype._methodHost = findMethodHost(template);\n        klass.prototype.__dataHost = template;\n        klass.prototype.__templatizeOwner = owner;\n        klass.prototype.__hostProps = template._content._hostProps;\n        return klass;\n      },\n\n      /**\n       * Returns the template \"model\" associated with a given element, which\n       * serves as the binding scope for the template instance the element is\n       * contained in. A template model is an instance of `Polymer.Base`, and\n       * should be used to manipulate data associated with this template instance.\n       *\n       * Example:\n       *\n       *   let model = modelForElement(el);\n       *   if (model.index < 10) {\n       *     model.set('item.checked', true);\n       *   }\n       *\n       * @method modelForElement\n       * @param {HTMLElement} el Element for which to return a template model.\n       * @return {TemplateInstanceBase} Model representing the binding scope for\n       *   the element.\n       */\n      modelForElement(host, el) {\n        let model;\n        while (el) {\n          // An element with a _templateInstance marks the top boundary\n          // of a scope; walk up until we find one, and then ensure that\n          // its __dataHost matches `this`, meaning this dom-repeat stamped it\n          if ((model = el._templateInstance)) {\n            // Found an element stamped by another template; keep walking up\n            // from its __dataHost\n            if (model.__dataHost != host) {\n              el = model.__dataHost;\n            } else {\n              return model;\n            }\n          } else {\n            // Still in a template scope, keep going up until\n            // a _templateInstance is found\n            el = el.parentNode;\n          }\n        }\n        return null;\n      }\n    }\n\n    Polymer.Templatize = Templatize;\n\n  })();\n(function() {\n    'use strict';\n\n    let Templatizer = {\n      templatize(template) {\n        this._templatizerTemplate = template;\n        this.ctor = Polymer.Templatize.templatize(template, this, {\n          instanceProps: this._instanceProps,\n          forwardHostProp: this._forwardHostPropV2,\n          notifyInstanceProp: this._notifyInstancePropV2\n        });\n      },\n      stamp(model) {\n        return new this.ctor(model);\n      },\n      modelForElement(el) {\n        return Polymer.Templatize.modelForElement(this._templatizerTemplate, el);\n      }\n    };\n\n    Polymer.Templatizer = Templatizer;\n\n  })();\n(function() {\n\n    const mixin = Polymer.PropertyEffects(HTMLElement);\n\n    class DomBind extends mixin {\n\n      connectedCallback() {\n        this.render();\n      }\n\n      disconnectedCallback() {\n        this.__removeChildren();\n      }\n\n      __insertChildren() {\n        this.parentNode.insertBefore(this.root, this);\n      }\n\n      __removeChildren() {\n        if (this.__children) {\n          for (let i=0; i<this.__children.length; i++) {\n            this.root.appendChild(this.__children[i]);\n          }\n        }\n      }\n\n      /**\n       * Forces the element to render its content. This is typically only\n       * necessary to call if HTMLImports with the async attribute are used.\n       */\n      render() {\n        let template;\n        if (!this.__children) {\n          template = template || this.querySelector('template');\n          if (!template) {\n            // Wait until childList changes and template should be there by then\n            let observer = new MutationObserver(() => {\n              template = this.querySelector('template');\n              if (template) {\n                observer.disconnect();\n                this.render(template);\n              } else {\n                throw new Error('dom-bind requires a <template> child');\n              }\n            })\n            observer.observe(this, {childList: true});\n            return;\n          }\n          this._bindTemplate(template);\n          this.root = this._stampTemplate(template);\n          this.__children = [];\n          for (let n=this.root.firstChild; n; n=n.nextSibling) {\n            this.__children[this.__children.length] = n;\n          }\n          this._flushProperties(this);\n        }\n        this.__insertChildren();\n        this.dispatchEvent(new CustomEvent('dom-change', {bubbles: true}));\n      }\n\n    }\n\n    customElements.define('dom-bind', DomBind);\n\n  })();\nPolymer.Element = Polymer.ElementMixin(HTMLElement);\n(function() {\n  'use strict';\n\n  class DomRepeat extends Polymer.Element {\n\n    static get template() { return null; }\n\n    static get config() {\n\n      return {\n\n        /**\n         * Fired whenever DOM is added or removed by this template (by\n         * default, rendering occurs lazily).  To force immediate rendering, call\n         * `render`.\n         *\n         * @event dom-change\n         */\n\n        properties: {\n\n          /**\n           * An array containing items determining how many instances of the template\n           * to stamp and that that each template instance should bind to.\n           */\n          items: {\n            type: Array\n          },\n\n          /**\n           * The name of the variable to add to the binding scope for the array\n           * element associated with a given template instance.\n           */\n          as: {\n            type: String,\n            value: 'item'\n          },\n\n          /**\n           * The name of the variable to add to the binding scope with the index\n           * for the inst.  If `sort` is provided, the index will reflect the\n           * sorted order (rather than the original array order).\n           */\n          indexAs: {\n            type: String,\n            value: 'index'\n          },\n\n          /**\n           * The name of the variable to add to the binding scope with the index\n           * for the inst.  If `sort` is provided, the index will reflect the\n           * sorted order (rather than the original array order).\n           */\n          itemsIndexAs: {\n            type: String,\n            value: 'itemsIndex'\n          },\n\n          /**\n           * A function that should determine the sort order of the items.  This\n           * property should either be provided as a string, indicating a method\n           * name on the element's host, or else be an actual function.  The\n           * function should match the sort function passed to `Array.sort`.\n           * Using a sort function has no effect on the underlying `items` array.\n           */\n          sort: {\n            type: Function,\n            observer: '__sortChanged'\n          },\n\n          /**\n           * A function that can be used to filter items out of the view.  This\n           * property should either be provided as a string, indicating a method\n           * name on the element's host, or else be an actual function.  The\n           * function should match the sort function passed to `Array.filter`.\n           * Using a filter function has no effect on the underlying `items` array.\n           */\n          filter: {\n            type: Function,\n            observer: '__filterChanged'\n          },\n\n          /**\n           * When using a `filter` or `sort` function, the `observe` property\n           * should be set to a space-separated list of the names of item\n           * sub-fields that should trigger a re-sort or re-filter when changed.\n           * These should generally be fields of `item` that the sort or filter\n           * function depends on.\n           */\n          observe: {\n            type: String,\n            observer: '__observeChanged'\n          },\n\n          /**\n           * When using a `filter` or `sort` function, the `delay` property\n           * determines a debounce time after a change to observed item\n           * properties that must pass before the filter or sort is re-run.\n           * This is useful in rate-limiting shuffing of the view when\n           * item changes may be frequent.\n           */\n          delay: Number,\n\n          /**\n           * Count of currently rendered items after `filter` (if any) has been applied.\n           * If \"chunking mode\" is enabled, `renderedItemCount` is updated each time a\n           * set of template instances is rendered.\n           *\n           */\n          renderedItemCount: {\n            type: Number,\n            notify: true,\n            readOnly: true\n          },\n\n          /**\n           * Defines an initial count of template instances to render after setting\n           * the `items` array, before the next paint, and puts the `dom-repeat`\n           * into \"chunking mode\".  The remaining items will be created and rendered\n           * incrementally at each animation frame therof until all instances have\n           * been rendered.\n           */\n          initialCount: {\n            type: Number,\n            observer: '__initializeChunking'\n          },\n\n          /**\n           * When `initialCount` is used, this property defines a frame rate to\n           * target by throttling the number of instances rendered each frame to\n           * not exceed the budget for the target frame rate.  Setting this to a\n           * higher number will allow lower latency and higher throughput for\n           * things like event handlers, but will result in a longer time for the\n           * remaining items to complete rendering.\n           */\n          targetFramerate: {\n            type: Number,\n            value: 20\n          },\n\n          _targetFrameTime: {\n            type: Number,\n            computed: '__computeFrameTime(targetFramerate)'\n          }\n\n        },\n\n        observers: [\n          '__itemsChanged(items.*)'\n        ]\n\n      }\n\n    }\n\n    constructor() {\n      super();\n      this.__instances = [];\n      this.__limit = Infinity;\n      this.__pool = [];\n      this.__renderDebouncer = null;\n      this.__itemsIdxToInstIdx = {};\n      this.__chunkCount = null;\n      this.__lastChunkTime = null;\n      this.__needFullRefresh = false;\n      this.__sortFn = null;\n      this.__filterFn = null;\n      this.__observePaths = null;\n      this.__ctor = null;\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      this.__isDetached = true;\n      for (var i=0; i<this.__instances.length; i++) {\n        this.__detachInstance(i);\n      }\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      // only perform attachment if the element was previously detached.\n      if (this.__isDetached) {\n        this.__isDetached = false;\n        var parent = this.parentNode;\n        for (var i=0; i<this.__instances.length; i++) {\n          this.__attachInstance(i, parent);\n        }\n      }\n    }\n\n    __ensureTemplatized() {\n      // Templatizing (generating the instance constructor) needs to wait\n      // until ready, since won't have its template content handed back to\n      // it until then\n      if (!this.__ctor) {\n        var template = this.template = this.querySelector('template');\n        if (!template) {\n          // // Wait until childList changes and template should be there by then\n          let observer = new MutationObserver(() => {\n            if (this.querySelector('template')) {\n              observer.disconnect();\n              this.__render();\n            } else {\n              throw new Error('dom-repeat requires a <template> child');\n            }\n          })\n          observer.observe(this, {childList: true});\n          return false;\n        }\n        // Template instance props that should be excluded from forwarding\n        var instanceProps = {};\n        instanceProps[this.as] = true;\n        instanceProps[this.indexAs] = true;\n        instanceProps[this.itemsIndexAs] = true;\n        this.__ctor = Polymer.Templatize.templatize(template, this, {\n          instanceProps: instanceProps,\n          forwardHostProp: function(prop, value) {\n            var i$ = this.__instances;\n            for (var i=0, inst; (i<i$.length) && (inst=i$[i]); i++) {\n              inst.forwardHostProp(prop, value);\n            }\n          },\n          notifyInstanceProp: function(inst, prop, value) {\n            if (Polymer.Path.matches(this.as, prop)) {\n              let idx = inst[this.itemsIndexAs];\n              if (prop == this.as) {\n                this.items[idx] = value;\n              }\n              let path = Polymer.Path.translate(this.as, 'items.' + idx, prop);\n              this.notifyPath(path, value);\n            }\n          }\n        });\n      }\n      return true;\n    }\n\n    __getMethodHost() {\n      // Technically this should be the owner of the outermost template.\n      // In shadow dom, this is always getRootNode().host, but we can\n      // approximate this via cooperation with our dataHost always setting\n      // `_methodHost` as long as there were bindings (or id's) on this\n      // instance causing it to get a dataHost.\n      return this.__dataHost._methodHost || this.__dataHost;\n    }\n\n    __sortChanged(sort) {\n      var methodHost = this.__getMethodHost();\n      this.__sortFn = sort && (typeof sort == 'function' ? sort :\n        function() { return methodHost[sort].apply(methodHost, arguments); });\n      this.__needFullRefresh = true;\n      if (this.items) {\n        this.__debounceRender(this.__render);\n      }\n    }\n\n    __filterChanged(filter) {\n      var methodHost = this.__getMethodHost();\n      this.__filterFn = filter && (typeof filter == 'function' ? filter :\n        function() { return methodHost[filter].apply(methodHost, arguments); });\n      this.__needFullRefresh = true;\n      if (this.items) {\n        this.__debounceRender(this.__render);\n      }\n    }\n\n    __computeFrameTime(rate) {\n      return Math.ceil(1000/rate);\n    }\n\n    __initializeChunking() {\n      if (this.initialCount) {\n        this.__limit = this.initialCount;\n        this.__chunkCount = this.initialCount;\n        this.__lastChunkTime = performance.now();\n      }\n    }\n\n    __tryRenderChunk() {\n      // Debounced so that multiple calls through `_render` between animation\n      // frames only queue one new rAF (e.g. array mutation & chunked render)\n      if (this.items && this.__limit < this.items.length) {\n        this.__debounceRender(this.__requestRenderChunk);\n      }\n    }\n\n    __requestRenderChunk() {\n      requestAnimationFrame(()=>this.__renderChunk());\n    }\n\n    __renderChunk() {\n      // Simple auto chunkSize throttling algorithm based on feedback loop:\n      // measure actual time between frames and scale chunk count by ratio\n      // of target/actual frame time\n      var currChunkTime = performance.now();\n      var ratio = this._targetFrameTime / (currChunkTime - this.__lastChunkTime);\n      this.__chunkCount = Math.round(this.__chunkCount * ratio) || 1;\n      this.__limit += this.__chunkCount;\n      this.__lastChunkTime = currChunkTime;\n      this.__debounceRender(this.__render);\n    }\n\n    __observeChanged() {\n      this.__observePaths = this.observe &&\n        this.observe.replace('.*', '.').split(' ');\n    }\n\n    __itemsChanged(change) {\n      if (this.items && !Array.isArray(this.items)) {\n        console.warn('dom-repeat expected array for `items`, found', this.items);\n      }\n      // If path was to an item (e.g. 'items.3' or 'items.3.foo'), forward the\n      // path to that instance synchronously (retuns false for non-item paths)\n      if (!this.__handleItemPath(change.path, change.value)) {\n        // Otherwise, the array was reset ('items') or spliced ('items.splices'),\n        // so queue a full refresh\n        this.__needFullRefresh = true;\n        this.__initializeChunking();\n        this.__debounceRender(this.__render);\n      }\n    }\n\n    __handleObservedPaths(path) {\n      if (this.__observePaths) {\n        path = path.substring(path.indexOf('.') + 1);\n        var paths = this.__observePaths;\n        for (var i=0; i<paths.length; i++) {\n          if (path.indexOf(paths[i]) === 0) {\n            this.__needFullRefresh = true;\n            this.__debounceRender(this.__render, this.delay);\n            return true;\n          }\n        }\n      }\n    }\n\n    /**\n     * @param {function()} fn\n     * @param {number=} delay\n     */\n    __debounceRender(fn, delay) {\n      this.__renderDebouncer = Polymer.Debouncer.debounce(\n            this.__renderDebouncer\n          , delay > 0 ? Polymer.Async.timeOut.after(delay) : Polymer.Async.microTask\n          , fn.bind(this));\n      Polymer.enqueueDebouncer(this.__renderDebouncer);\n    }\n\n    /**\n     * Forces the element to render its content. Normally rendering is\n     * asynchronous to a provoking change. This is done for efficiency so\n     * that multiple changes trigger only a single render. The render method\n     * should be called if, for example, template rendering is required to\n     * validate application state.\n     */\n    render() {\n      // Queue this repeater, then flush all in order\n      this.__needFullRefresh = true;\n      this.__debounceRender(this.__render);\n      Polymer.flush();\n    }\n\n    __render() {\n      if (!this.__ensureTemplatized()) {\n        // No template found yet\n        return;\n      }\n      this.__applyFullRefresh();\n      // Reset the pool\n      // TODO(kschaaf): Reuse pool across turns and nested templates\n      // Now that objects/arrays are re-evaluated when set, we can safely\n      // reuse pooled instances across turns, however we still need to decide\n      // semantics regarding how long to hold, how many to hold, etc.\n      this.__pool.length = 0;\n      // Set rendered item count\n      this._setRenderedItemCount(this.__instances.length);\n      // Notify users\n      this.dispatchEvent(new CustomEvent('dom-change', {bubbles: true}));\n      // Check to see if we need to render more items\n      this.__tryRenderChunk();\n    }\n\n    __applyFullRefresh() {\n      const items = this.items || [];\n      let isntIdxToItemsIdx = new Array(items.length);\n      for (let i=0; i<items.length; i++) {\n        isntIdxToItemsIdx[i] = i;\n      }\n      // Apply user filter\n      if (this.__filterFn) {\n        isntIdxToItemsIdx = isntIdxToItemsIdx.filter((i, idx, array) =>\n          this.__filterFn(items[i], idx, array));\n      }\n      // Apply user sort\n      if (this.__sortFn) {\n        isntIdxToItemsIdx.sort((a, b) => this.__sortFn(items[a], items[b]));\n      }\n      // items->inst map kept for item path forwarding\n      const itemsIdxToInstIdx = this.__itemsIdxToInstIdx = {};\n      let instIdx = 0;\n      // Generate instances and assign items\n      const limit = Math.min(isntIdxToItemsIdx.length, this.__limit);\n      for (; instIdx<limit; instIdx++) {\n        let inst = this.__instances[instIdx];\n        let itemIdx = isntIdxToItemsIdx[instIdx];\n        let item = items[itemIdx];\n        itemsIdxToInstIdx[itemIdx] = instIdx;\n        if (inst && instIdx < this.__limit) {\n          inst._setPendingProperty(this.as, item);\n          inst._setPendingProperty(this.indexAs, instIdx);\n          inst._setPendingProperty(this.itemsIndexAs, itemIdx);\n          inst._flushProperties(true);\n        } else {\n          this.__insertInstance(item, instIdx, itemIdx);\n        }\n      }\n      // Remove any extra instances from previous state\n      for (let i=this.__instances.length-1; i>=instIdx; i--) {\n        this.__detachAndRemoveInstance(i);\n      }\n    }\n\n    __detachInstance(idx) {\n      var inst = this.__instances[idx];\n      for (var i=0; i<inst.children.length; i++) {\n        var el = inst.children[i];\n        inst.root.appendChild(el);\n      }\n      return inst;\n    }\n\n    __attachInstance(idx, parent) {\n      var inst = this.__instances[idx];\n      parent.insertBefore(inst.root, this);\n    }\n\n    __detachAndRemoveInstance(idx) {\n      var inst = this.__detachInstance(idx);\n      if (inst) {\n        this.__pool.push(inst);\n      }\n      this.__instances.splice(idx, 1);\n    }\n\n    __stampInstance(item, instIdx, itemIdx) {\n      var model = {};\n      model[this.as] = item;\n      model[this.indexAs] = instIdx;\n      model[this.itemsIndexAs] = itemIdx;\n      return new this.__ctor(model);\n    }\n\n    __insertInstance(item, instIdx, itemIdx) {\n      var inst = this.__pool.pop();\n      if (inst) {\n        // TODO(kschaaf): If the pool is shared across turns, hostProps\n        // need to be re-set to reused instances in addition to item\n        inst._setPendingProperty(this.as, item);\n        inst._setPendingProperty(this.indexAs, instIdx);\n        inst._setPendingProperty(this.itemsIndexAs, itemIdx);\n        inst._flushProperties(true);\n      } else {\n        inst = this.__stampInstance(item, instIdx, itemIdx);\n      }\n      var beforeRow = this.__instances[instIdx + 1];\n      var beforeNode = beforeRow ? beforeRow.children[0] : this;\n      this.parentNode.insertBefore(inst.root, beforeNode);\n      this.__instances[instIdx] = inst;\n      return inst;\n    }\n\n    // Implements extension point from Templatize mixin\n    _showHideChildren(hidden) {\n      for (var i=0; i<this.__instances.length; i++) {\n        this.__instances[i]._showHideChildren(hidden);\n      }\n    }\n\n    // Called as a side effect of a host items.<key>.<path> path change,\n    // responsible for notifying item.<path> changes to inst for key\n    __handleItemPath(path, value) {\n      var itemsPath = path.slice(6); // 'items.'.length == 6\n      var dot = itemsPath.indexOf('.');\n      var itemsIdx = dot < 0 ? itemsPath : itemsPath.substring(0, dot);\n      // If path was index into array...\n      if (itemsIdx == parseInt(itemsIdx, 10)) {\n        var itemSubPath = dot < 0 ? '' : itemsPath.substring(dot+1);\n        // See if the item subpath should trigger a full refresh...\n        if (!this.__handleObservedPaths(itemSubPath)) {\n          // If not, forward to the instance for that index\n          var instIdx = this.__itemsIdxToInstIdx[itemsIdx];\n          var inst = this.__instances[instIdx];\n          if (inst) {\n            let itemPath = this.as + (itemSubPath ? '.' + itemSubPath : '');\n            // This is effectively `notifyPath`, but avoids some of the overhead\n            // of the public API\n            inst._setPendingPropertyOrPath(itemPath, value, true);\n            inst._flushProperties(true);\n          }\n        }\n        return true;\n      }\n    }\n\n    /**\n     * Returns the item associated with a given element stamped by\n     * this `dom-repeat`.\n     *\n     * Note, to modify sub-properties of the item,\n     * `modelForElement(el).set('item.<sub-prop>', value)`\n     * should be used.\n     *\n     * @method itemForElement\n     * @param {HTMLElement} el Element for which to return the item.\n     * @return {*} Item associated with the element.\n     */\n    itemForElement(el) {\n      var instance = this.modelForElement(el);\n      return instance && instance[this.as];\n    }\n\n    /**\n     * Returns the inst index for a given element stamped by this `dom-repeat`.\n     * If `sort` is provided, the index will reflect the sorted order (rather\n     * than the original array order).\n     *\n     * @method indexForElement\n     * @param {HTMLElement} el Element for which to return the index.\n     * @return {*} Row index associated with the element (note this may\n     *   not correspond to the array index if a user `sort` is applied).\n     */\n    indexForElement(el) {\n      var instance = this.modelForElement(el);\n      return instance && instance[this.indexAs];\n    }\n\n    /**\n     * Returns the template \"model\" associated with a given element, which\n     * serves as the binding scope for the template instance the element is\n     * contained in. A template model is an instance of `Polymer.Base`, and\n     * should be used to manipulate data associated with this template instance.\n     *\n     * Example:\n     *\n     *   var model = modelForElement(el);\n     *   if (model.index < 10) {\n     *     model.set('item.checked', true);\n     *   }\n     *\n     * @method modelForElement\n     * @param {HTMLElement} el Element for which to return a template model.\n     * @return {TemplateInstanceBase} Model representing the binding scope for\n     *   the element.\n     */\n    modelForElement(el) {\n      return Polymer.Templatize.modelForElement(this.template, el);\n    }\n\n  }\n\n  customElements.define('dom-repeat', DomRepeat);\n\n  Polymer.DomRepeat = DomRepeat;\n\n})();\n(function() {\n\n  /**\n   * Stamps the template iff the `if` property is truthy.\n   *\n   * When `if` becomes falsey, the stamped content is hidden but not\n   * removed from dom. When `if` subsequently becomes truthy again, the content\n   * is simply re-shown. This approach is used due to its favorable performance\n   * characteristics: the expense of creating template content is paid only\n   * once and lazily.\n   *\n   * Set the `restamp` property to true to force the stamped content to be\n   * created / destroyed when the `if` condition changes.\n   */\n  class DomIf extends Polymer.Element {\n\n    static get template() { return null; }\n\n    static get config() {\n\n      return {\n\n        /**\n         * Fired whenever DOM is added or removed/hidden by this template (by\n         * default, rendering occurs lazily).  To force immediate rendering, call\n         * `render`.\n         *\n         * @event dom-change\n         */\n\n        properties: {\n\n          /**\n           * A boolean indicating whether this template should stamp.\n           */\n          'if': {\n            type: Boolean,\n            observer: '__debounceRender'\n          },\n\n          /**\n           * When true, elements will be removed from DOM and discarded when `if`\n           * becomes false and re-created and added back to the DOM when `if`\n           * becomes true.  By default, stamped elements will be hidden but left\n           * in the DOM when `if` becomes false, which is generally results\n           * in better performance.\n           */\n          restamp: {\n            type: Boolean,\n            observer: '__debounceRender'\n          }\n\n        }\n\n      };\n\n    }\n\n    constructor() {\n      super();\n      this.__renderDebouncer = null;\n      this.__invalidProps = null;\n      this.__instance = null;\n    }\n\n    __debounceRender() {\n      // Render is async for 2 reasons:\n      // 1. To eliminate dom creation trashing if user code thrashes `if` in the\n      //    same turn. This was more common in 1.x where a compound computed\n      //    property could result in the result changing multiple times, but is\n      //    mitigated to a large extent by batched property processing in 2.x.\n      // 2. To avoid double object propagation when a bag including values bound\n      //    to the `if` property as well as one or more hostProps could enqueue\n      //    the <dom-if> to flush before the <template>'s host property\n      //    forwarding. In that scenario creating an instance would result in\n      //    the host props being set once, and then the enqueued changes on the\n      //    template would set properties a second time, potentially causing an\n      //    object to be set to an instance more than once.  Creating the\n      //    instance async from flushing data ensures this doesn't happen. If\n      //    we wanted a sync option in the future, simply having <dom-if> flush\n      //    (or clear) its template's pending host properties before creating\n      //    the instance would also avoid the problem.\n      this.__renderDebouncer = Polymer.Debouncer.debounce(\n            this.__renderDebouncer\n          , Polymer.Async.microTask\n          , () => this.__render());\n      Polymer.enqueueDebouncer(this.__renderDebouncer);\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      if (!this.parentNode ||\n          (this.parentNode.nodeType == Node.DOCUMENT_FRAGMENT_NODE &&\n           !this.parentNode.host)) {\n        this.__teardownInstance();\n      }\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      if (this.if) {\n        this.__debounceRender();\n      }\n    }\n\n    /**\n     * Forces the element to render its content. Normally rendering is\n     * asynchronous to a provoking change. This is done for efficiency so\n     * that multiple changes trigger only a single render. The render method\n     * should be called if, for example, template rendering is required to\n     * validate application state.\n     */\n    render() {\n      Polymer.flush();\n    }\n\n    __render() {\n      if (this.if) {\n        if (!this.__ensureInstance()) {\n          // No template found yet\n          return;\n        }\n        this._showHideChildren();\n      } else if (this.restamp) {\n        this.__teardownInstance();\n      }\n      if (!this.restamp && this.__instance) {\n        this._showHideChildren();\n      }\n      if (this.if != this._lastIf) {\n        this.dispatchEvent(new CustomEvent('dom-change', {bubbles: true}));\n        this._lastIf = this.if;\n      }\n    }\n\n    __ensureInstance() {\n      let parentNode = this.parentNode;\n      // Guard against element being detached while render was queued\n      if (parentNode) {\n        if (!this.__ctor) {\n          let template = this.querySelector('template');\n          if (!template) {\n            // Wait until childList changes and template should be there by then\n            let observer = new MutationObserver(() => {\n              if (this.querySelector('template')) {\n                observer.disconnect();\n                this.__render();\n              } else {\n                throw new Error('dom-if requires a <template> child');\n              }\n            })\n            observer.observe(this, {childList: true});\n            return false;\n          }\n          this.__ctor = Polymer.Templatize.templatize(template, this, {\n            forwardHostProp: function(prop, value) {\n              if (this.__instance) {\n                if (this.if) {\n                  this.__instance.forwardHostProp(prop, value);\n                } else {\n                  // If we have an instance but are squelching host property\n                  // forwarding due to if being false, note the invalidated\n                  // properties so `__syncHostProperties` can sync them the next\n                  // time `if` becomes true\n                  this.__invalidProps = this.__invalidProps || Object.create(null);\n                  this.__invalidProps[Polymer.Path.root(prop)] = true;\n                }\n              }\n            }\n          });\n        }\n        if (!this.__instance) {\n          this.__instance = new this.__ctor();\n          parentNode.insertBefore(this.__instance.root, this);\n        } else {\n          this.__syncHostProperties();\n          let c$ = this.__instance.children;\n          if (c$ && c$.length) {\n            // Detect case where dom-if was re-attached in new position\n            let lastChild = this.previousSibling;\n            if (lastChild !== c$[c$.length-1]) {\n              for (let i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n                parentNode.insertBefore(n, this);\n              }\n            }\n          }\n        }\n      }\n      return true;\n    }\n\n    __syncHostProperties() {\n      let props = this.__invalidProps;\n      if (props) {\n        for (let prop in props) {\n          this.__instance._setPendingProperty(prop, this.__dataHost[prop]);\n        }\n        this.__invalidProps = null;\n        this.__instance._flushProperties(true);\n      }\n    }\n\n    __teardownInstance() {\n      if (this.__instance) {\n        let c$ = this.__instance.children;\n        if (c$ && c$.length) {\n          // use first child parent, for case when dom-if may have been detached\n          let parent = c$[0].parentNode;\n          for (let i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n            parent.removeChild(n);\n          }\n        }\n        this.__instance = null;\n        this.__invalidProps = null;\n      }\n    }\n\n    _showHideChildren() {\n      let hidden = this.__hideTemplateChildren__ || !this.if;\n      if (this.__instance) {\n        this.__instance._showHideChildren(hidden);\n      }\n    }\n\n  }\n\n  customElements.define('dom-if', DomIf);\n\n  Polymer.DomIf = DomIf;\n\n})();\n(function() {\n\n  let ArraySelectorMixin = Polymer.dedupingMixin(superClass => {\n\n    return class extends superClass {\n\n      static get config() {\n\n        return {\n\n          properties: {\n\n            /**\n             * An array containing items from which selection will be made.\n             */\n            items: {\n              type: Array,\n            },\n\n            /**\n             * When `true`, multiple items may be selected at once (in this case,\n             * `selected` is an array of currently selected items).  When `false`,\n             * only one item may be selected at a time.\n             */\n            multi: {\n              type: Boolean,\n              value: false,\n            },\n\n            /**\n             * When `multi` is true, this is an array that contains any selected.\n             * When `multi` is false, this is the currently selected item, or `null`\n             * if no item is selected.\n             */\n            selected: {\n              type: Object,\n              notify: true\n            },\n\n            /**\n             * When `multi` is false, this is the currently selected item, or `null`\n             * if no item is selected.\n             */\n            selectedItem: {\n              type: Object,\n              notify: true\n            },\n\n            /**\n             * When `true`, calling `select` on an item that is already selected\n             * will deselect the item.\n             */\n            toggle: {\n              type: Boolean,\n              value: false\n            }\n\n          },\n\n          observers: ['__updateSelection(multi, items.*)'],\n\n        }\n\n      }\n\n      constructor() {\n        super();\n        this.__lastItems = null;\n        this.__lastMulti = null;\n        this.__selectedMap = null;\n      }\n\n      __updateSelection(multi, itemsInfo) {\n        let path = itemsInfo.path;\n        if (path == 'items') {\n          // Case 1 - items array changed, so diff against previous array and\n          // deselect any removed items and adjust selected indices\n          let newItems = itemsInfo.base || [];\n          let lastItems = this.__lastItems;\n          let lastMulti = this.__lastMulti;\n          if (multi !== lastMulti) {\n            this.clearSelection();\n          }\n          if (lastItems) {\n            let splices = Polymer.ArraySplice.calculateSplices(newItems, lastItems);\n            this.__applySplices(splices);\n          }\n          this.__lastItems = newItems;\n          this.__lastMulti = multi;\n        } else if (itemsInfo.path == 'items.splices') {\n          // Case 2 - got specific splice information describing the array mutation:\n          // deselect any removed items and adjust selected indices\n          this.__applySplices(itemsInfo.value.indexSplices);\n        } else {\n          // Case 3 - an array element was changed, so deselect the previous\n          // item for that index if it was previously selected\n          let part = path.slice('items.'.length);\n          let idx = parseInt(part, 10);\n          if ((part.indexOf('.') < 0) && part == idx) {\n            this.__deselectChangedIdx(idx);\n          }\n        }\n      }\n\n      __applySplices(splices) {\n        let selected = this.__selectedMap;\n        // Adjust selected indices and mark removals\n        for (let i=0; i<splices.length; i++) {\n          let s = splices[i];\n          selected.forEach((idx, item) => {\n            if (idx < s.index) {\n              // no change\n            } else if (idx >= s.index + s.removed.length) {\n              // adjust index\n              selected.set(item, idx + s.addedCount - s.removed.length);\n            } else {\n              // remove index\n              selected.set(item, -1);\n            }\n          });\n          for (let j=0; j<s.addedCount; j++) {\n            let idx = s.index + j;\n            if (selected.has(this.items[idx])) {\n              selected.set(this.items[idx], idx);\n            }\n          }\n        }\n        // Update linked paths\n        this.__updateLinks();\n        // Remove selected items that were removed from the items array\n        let sidx = 0;\n        selected.forEach((idx, item) => {\n          if (idx < 0) {\n            if (this.multi) {\n              this.splice('selected', sidx, 1);\n            } else {\n              this.selected = this.selectedItem = null;\n            }\n            selected.delete(item);\n          } else {\n            sidx++;\n          }\n        });\n      }\n\n      __updateLinks() {\n        this.__dataLinkedPaths = {};\n        if (this.multi) {\n          let sidx = 0;\n          this.__selectedMap.forEach(idx => {\n            if (idx >= 0) {\n              this.linkPaths('items.' + idx, 'selected.' + sidx++);\n            }\n          });\n        } else {\n          this.__selectedMap.forEach(idx => {\n            this.linkPaths('selected', 'items.' + idx);\n            this.linkPaths('selectedItem', 'items.' + idx);\n          });\n        }\n      }\n\n      /**\n       * Clears the selection state.\n       *\n       * @method clearSelection\n       */\n      clearSelection() {\n        // Unbind previous selection\n        this.__dataLinkedPaths = {};\n        // The selected map stores 3 pieces of information:\n        // key: items array object\n        // value: items array index\n        // order: selected array index\n        this.__selectedMap = new Map();\n        // Initialize selection\n        this.selected = this.multi ? [] : null\n        this.selectedItem = null;\n      }\n\n      /**\n       * Returns whether the item is currently selected.\n       *\n       * @method isSelected\n       * @param {*} item Item from `items` array to test\n       * @return {boolean} Whether the item is selected\n       */\n      isSelected(item) {\n        return this.__selectedMap.has(item);\n      }\n\n      /**\n       * Returns whether the item is currently selected.\n       *\n       * @method isSelected\n       * @param {*} idx Index from `items` array to test\n       * @return {boolean} Whether the item is selected\n       */\n      isIndexSelected(idx) {\n        return this.isSelected(this.items[idx]);\n      }\n\n      __deselectChangedIdx(idx) {\n        let sidx = this.__selectedIndexForItemIndex(idx);\n        if (sidx >= 0) {\n          let i = 0;\n          this.__selectedMap.forEach((idx, item) => {\n            if (sidx == i++) {\n              this.deselect(item);\n            }\n          });\n        }\n      }\n\n      __selectedIndexForItemIndex(idx) {\n        let selected = this.__dataLinkedPaths['items.' + idx];\n        if (selected) {\n          return parseInt(selected.slice('selected.'.length), 10);\n        }\n      }\n\n      /**\n       * Deselects the given item if it is already selected.\n       *\n       * @method deselect\n       * @param {*} item Item from `items` array to deselect\n       */\n      deselect(item) {\n        let idx = this.__selectedMap.get(item);\n        if (idx >= 0) {\n          this.__selectedMap.delete(item);\n          let sidx;\n          if (this.multi) {\n            sidx = this.__selectedIndexForItemIndex(idx);\n          }\n          this.__updateLinks();\n          if (this.multi) {\n            this.splice('selected', sidx, 1);\n          } else {\n            this.selected = this.selectedItem = null;\n          }\n        }\n      }\n\n      /**\n       * Deselects the given index if it is already selected.\n       *\n       * @method deselect\n       * @param {number} idx Index from `items` array to deselect\n       */\n      deselectIndex(idx) {\n        this.deselect(this.items[idx]);\n      }\n\n      /**\n       * Selects the given item.  When `toggle` is true, this will automatically\n       * deselect the item if already selected.\n       *\n       * @method select\n       * @param {*} item Item from `items` array to select\n       */\n      select(item) {\n        this.selectIndex(this.items.indexOf(item));\n      }\n\n      /**\n       * Selects the given index.  When `toggle` is true, this will automatically\n       * deselect the item if already selected.\n       *\n       * @method select\n       * @param {number} idx Index from `items` array to select\n       */\n      selectIndex(idx) {\n        let item = this.items[idx];\n        if (!this.isSelected(item)) {\n          if (!this.multi) {\n            this.__selectedMap.clear();\n          }\n          this.__selectedMap.set(item, idx);\n          this.__updateLinks();\n          if (this.multi) {\n            this.push('selected', item);\n          } else {\n            this.selected = this.selectedItem = item;\n          }\n        } else if (this.toggle) {\n          this.deselectIndex(idx);\n        }\n      }\n\n    }\n\n  });\n\n  // export mixin\n  Polymer.ArraySelectorMixin = ArraySelectorMixin;\n\n  // define element class & export\n  const ArraySelector = ArraySelectorMixin(Polymer.Element);\n  customElements.define('array-selector', ArraySelector);\n  Polymer.ArraySelector = ArraySelector;\n\n})();\n(function(){\n/*\n\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n'use strict';var c=!(window.ShadyDOM&&window.ShadyDOM.inUse),f=!navigator.userAgent.match(\"AppleWebKit/601\")&&window.CSS&&CSS.supports&&CSS.supports(\"box-shadow\",\"0 0 0 var(--foo)\");function g(a){a&&(f=f&&!a.nativeCss&&!a.shimcssproperties,c=c&&!a.nativeShadow&&!a.shimshadow)}window.ShadyCSS?g(window.ShadyCSS):window.WebComponents&&g(window.WebComponents.flags);var h=c,k=f;function l(a,b){for(var d in b)null===d?a.style.removeProperty(d):a.style.setProperty(d,b[d])};var m=null,n=window.HTMLImports&&window.HTMLImports.whenReady||null,r;function t(){var a=u;n?n(a):(m||(m=new Promise(function(a){r=a}),\"complete\"===document.readyState?r():document.addEventListener(\"readystatechange\",function(){\"complete\"===document.readyState&&r()})),m.then(function(){a&&a()}))};var v=null,u=null;function x(){this.customStyles=[];this.enqueued=!1}function y(a){!a.enqueued&&u&&(a.enqueued=!0,t())}x.prototype.c=function(a){a.__seenByShadyCSS||(a.__seenByShadyCSS=!0,this.customStyles.push(a),y(this))};x.prototype.b=function(a){if(a.__shadyCSSCachedStyle)return a.__shadyCSSCachedStyle;var b;a.getStyle?b=a.getStyle():b=a;return b};\nx.prototype.a=function(){for(var a=this.customStyles,b=0;b<a.length;b++){var d=a[b];if(!d.__shadyCSSCachedStyle){var e=this.b(d);if(e){var p=e.__appliedElement;if(p)for(var q=0;q<e.attributes.length;q++){var w=e.attributes[q];p.setAttribute(w.name,w.value)}e=p||e;v&&v(e);d.__shadyCSSCachedStyle=e}}}return a};x.prototype.addCustomStyle=x.prototype.c;x.prototype.getStyleForCustomStyle=x.prototype.b;x.prototype.processStyles=x.prototype.a;\nObject.defineProperties(x.prototype,{transformCallback:{get:function(){return v},set:function(a){v=a}},validateCallback:{get:function(){return u},set:function(a){var b=!1;u||(b=!0);u=a;b&&y(this)}}});var z=new x;window.ShadyCSS||(window.ShadyCSS={prepareTemplate:function(){},styleSubtree:function(a,b){z.a();l(a,b)},styleElement:function(){z.a()},styleDocument:function(a){z.a();l(document.body,a)},getComputedStyleValue:function(a,b){return(a=window.getComputedStyle(a).getPropertyValue(b))?a.trim():\"\"},nativeCss:k,nativeShadow:h});window.ShadyCSS.CustomStyleInterface=z;\n}).call(self)\n\n//# sourceMappingURL=custom-style-interface.min.js.map\n(function() {\n  'use strict';\n\n  const attr = 'include';\n\n  const CustomStyleInterface = window.ShadyCSS.CustomStyleInterface;\n\n  class CustomStyle extends HTMLElement {\n    constructor() {\n      super();\n      this._style = null;\n      CustomStyleInterface.addCustomStyle(this);\n    }\n    getStyle() {\n      if (this._style) {\n        return this._style;\n      }\n      const style = this.querySelector('style');\n      if (!style) {\n        return;\n      }\n      this._style = style;\n      const include = style.getAttribute(attr);\n      if (include) {\n        style.removeAttribute(attr);\n        style.textContent = Polymer.StyleGather.cssFromModules(include) + style.textContent;\n      }\n      return this._style;\n    }\n  }\n\n  window.CustomStyle = CustomStyle;\n  window.customElements.define('custom-style', CustomStyle);\n})();\nPolymer.LegacyElement = Polymer.LegacyElementMixin(HTMLElement);\n  // bc\n  Polymer.Base = Polymer.LegacyElement.prototype;\n(function () {\n  var _bindingRegex_patch = {\n    // Issue with https://github.com/Polymer/polymer/issues/3349 \n    _bindingRegex_1_2_4: (function() {\n      var IDENT  = '(?:' + '[a-zA-Z_$][\\\\w.:$-*]*' + ')';\n      var NUMBER = '(?:' + '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';\n      var SQUOTE_STRING = '(?:' + '\\'(?:[^\\'\\\\\\\\]|\\\\\\\\.)*\\'' + ')';\n      var DQUOTE_STRING = '(?:' + '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"' + ')';\n      var STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';\n      var ARGUMENT = '(?:' + IDENT + '|' + NUMBER + '|' +  STRING + '\\\\s*' + ')';\n      var ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\\\s*' + ARGUMENT + ')*' + ')';\n      var ARGUMENT_LIST = '(?:' + '\\\\(\\\\s*' +\n                                    '(?:' + ARGUMENTS + '?' + ')' +\n                                  '\\\\)\\\\s*' + ')';\n      var BINDING = '(' + IDENT + '\\\\s*' + ARGUMENT_LIST + '?' + ')'; // Group 3\n      var OPEN_BRACKET = '(\\\\[\\\\[|{{)' + '\\\\s*';\n      var CLOSE_BRACKET = '(?:]]|}})';\n      var NEGATE = '(?:(!)\\\\s*)?'; // Group 2\n      var EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;\n      return new RegExp(EXPRESSION, \"g\");\n    })(),\n\n    // Fix from https://github.com/TimvdLippe/polymer/blob/fix-binding-with-dash/src/lib/annotations/annotations.html\n    _bindingRegex_1_2_4_patched: (function() {\n      var IDENT  = '(?:' + '[a-zA-Z_\\\\$][\\\\w\\\\.:\\\\$\\\\-\\\\*]*' + ')';\n      var NUMBER = '(?:' + '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';\n      var SQUOTE_STRING = '(?:' + '\\'(?:[^\\'\\\\\\\\]|\\\\\\\\.)*\\'' + ')';\n      var DQUOTE_STRING = '(?:' + '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"' + ')';\n      var STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';\n      var ARGUMENT = '(?:' + IDENT + '|' + NUMBER + '|' +  STRING + '\\\\s*' + ')';\n      var ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\\\s*' + ARGUMENT + ')*' + ')';\n      var ARGUMENT_LIST = '(?:' + '\\\\(\\\\s*' +\n                                    '(?:' + ARGUMENTS + '?' + ')' +\n                                  '\\\\)\\\\s*' + ')';\n      var BINDING = '(' + IDENT + '\\\\s*' + ARGUMENT_LIST + '?' + ')'; // Group 3\n      var OPEN_BRACKET = '(\\\\[\\\\[|{{)' + '\\\\s*';\n      var CLOSE_BRACKET = '(?:]]|}})';\n      var NEGATE = '(?:(!)\\\\s*)?'; // Group 2\n      var EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;\n      return new RegExp(EXPRESSION, \"g\");\n    })()\n  };\n    \n  if (!Polymer.ElementMixin && Polymer.Annotations._bindingRegex.toString() === \n      _bindingRegex_patch._bindingRegex_1_2_4.toString()) {\n    console.log('Fixing Polymer issue#3349 by patching Polymer.Annotations._bindingRegex for Polymer 1.2.4');\n    Polymer.Annotations._bindingRegex = _bindingRegex_patch._bindingRegex_1_2_4_patched;\n  }\n})();\n'use strict';\n\n  Polymer({\n    is: 'iron-request',\n\n    hostAttributes: {\n      hidden: true\n    },\n\n    properties: {\n\n      /**\n       * A reference to the XMLHttpRequest instance used to generate the\n       * network request.\n       *\n       * @type {XMLHttpRequest}\n       */\n      xhr: {\n        type: Object,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return new XMLHttpRequest();\n        }\n      },\n\n      /**\n       * A reference to the parsed response body, if the `xhr` has completely\n       * resolved.\n       *\n       * @type {*}\n       * @default null\n       */\n      response: {\n        type: Object,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return null;\n        }\n      },\n\n      /**\n       * A reference to the status code, if the `xhr` has completely resolved.\n       */\n      status: {\n        type: Number,\n        notify: true,\n        readOnly: true,\n        value: 0\n      },\n\n      /**\n       * A reference to the status text, if the `xhr` has completely resolved.\n       */\n      statusText: {\n        type: String,\n        notify: true,\n        readOnly: true,\n        value: ''\n      },\n\n      /**\n       * A promise that resolves when the `xhr` response comes back, or rejects\n       * if there is an error before the `xhr` completes.\n       *\n       * @type {Promise}\n       */\n      completes: {\n        type: Object,\n        readOnly: true,\n        notify: true,\n        value: function() {\n          return new Promise(function (resolve, reject) {\n            this.resolveCompletes = resolve;\n            this.rejectCompletes = reject;\n          }.bind(this));\n        }\n      },\n\n      /**\n       * An object that contains progress information emitted by the XHR if\n       * available.\n       *\n       * @default {}\n       */\n      progress: {\n        type: Object,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return {};\n        }\n      },\n\n      /**\n       * Aborted will be true if an abort of the request is attempted.\n       */\n      aborted: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        value: false,\n      },\n\n      /**\n       * Errored will be true if the browser fired an error event from the\n       * XHR object (mainly network errors).\n       */\n      errored: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        value: false\n      },\n\n      /**\n       * TimedOut will be true if the XHR threw a timeout event.\n       */\n      timedOut: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        value: false\n      }\n    },\n\n    /**\n     * Succeeded is true if the request succeeded. The request succeeded if it\n     * loaded without error, wasn't aborted, and the status code is  200, and\n     * < 300, or if the status code is 0.\n     *\n     * The status code 0 is accepted as a success because some schemes - e.g.\n     * file:// - don't provide status codes.\n     *\n     * @return {boolean}\n     */\n    get succeeded() {\n      if (this.errored || this.aborted || this.timedOut) {\n        return false;\n      }\n      var status = this.xhr.status || 0;\n\n      // Note: if we are using the file:// protocol, the status code will be 0\n      // for all outcomes (successful or otherwise).\n      return status === 0 ||\n        (status >= 200 && status < 300);\n    },\n\n    /**\n     * Sends an HTTP request to the server and returns the XHR object.\n     *\n     * The handling of the `body` parameter will vary based on the Content-Type\n     * header. See the docs for iron-ajax's `body` param for details.\n     *\n     * @param {{\n     *   url: string,\n     *   method: (string|undefined),\n     *   async: (boolean|undefined),\n     *   body: (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object),\n     *   headers: (Object|undefined),\n     *   handleAs: (string|undefined),\n     *   jsonPrefix: (string|undefined),\n     *   withCredentials: (boolean|undefined)}} options -\n     *     url The url to which the request is sent.\n     *     method The HTTP method to use, default is GET.\n     *     async By default, all requests are sent asynchronously. To send synchronous requests,\n     *         set to false.\n     *     body The content for the request body for POST method.\n     *     headers HTTP request headers.\n     *     handleAs The response type. Default is 'text'.\n     *     withCredentials Whether or not to send credentials on the request. Default is false.\n     *   timeout: (Number|undefined)\n     * @return {Promise}\n     */\n    send: function (options) {\n      var xhr = this.xhr;\n\n      if (xhr.readyState > 0) {\n        return null;\n      }\n\n      xhr.addEventListener('progress', function (progress) {\n        this._setProgress({\n          lengthComputable: progress.lengthComputable,\n          loaded: progress.loaded,\n          total: progress.total\n        });\n      }.bind(this))\n\n      xhr.addEventListener('error', function (error) {\n        this._setErrored(true);\n        this._updateStatus();\n        this.rejectCompletes(error);\n      }.bind(this));\n\n      xhr.addEventListener('timeout', function (error) {\n        this._setTimedOut(true);\n        this._updateStatus();\n        this.rejectCompletes(error);\n      }.bind(this));\n\n      xhr.addEventListener('abort', function () {\n        this._updateStatus();\n        this.rejectCompletes(new Error('Request aborted.'));\n      }.bind(this));\n\n      // Called after all of the above.\n      xhr.addEventListener('loadend', function () {\n        this._updateStatus();\n        this._setResponse(this.parseResponse());\n\n        if (!this.succeeded) {\n          this.rejectCompletes(new Error('The request failed with status code: ' + this.xhr.status));\n          return;\n        }\n\n        this.resolveCompletes(this);\n      }.bind(this));\n\n      this.url = options.url;\n      xhr.open(\n        options.method || 'GET',\n        options.url,\n        options.async !== false\n      );\n\n      var acceptType = {\n        'json': 'application/json',\n        'text': 'text/plain',\n        'html': 'text/html',\n        'xml': 'application/xml',\n        'arraybuffer': 'application/octet-stream'\n      }[options.handleAs];\n      var headers = options.headers || Object.create(null);\n      var newHeaders = Object.create(null);\n      for (var key in headers) {\n        newHeaders[key.toLowerCase()] = headers[key];\n      }\n      headers = newHeaders;\n\n      if (acceptType && !headers['accept']) {\n        headers['accept'] = acceptType;\n      }\n      Object.keys(headers).forEach(function (requestHeader) {\n        if (/[A-Z]/.test(requestHeader)) {\n          Polymer.Base._error('Headers must be lower case, got', requestHeader);\n        }\n        xhr.setRequestHeader(\n          requestHeader,\n          headers[requestHeader]\n        );\n      }, this);\n\n      if (options.async !== false) {\n        if (options.async) {\n          xhr.timeout = options.timeout;\n        }\n\n        var handleAs = options.handleAs;\n\n        // If a JSON prefix is present, the responseType must be 'text' or the\n        // browser wont be able to parse the response.\n        if (!!options.jsonPrefix || !handleAs) {\n          handleAs = 'text';\n        }\n\n        // In IE, `xhr.responseType` is an empty string when the response\n        // returns. Hence, caching it as `xhr._responseType`.\n        xhr.responseType = xhr._responseType = handleAs;\n\n        // Cache the JSON prefix, if it exists.\n        if (!!options.jsonPrefix) {\n          xhr._jsonPrefix = options.jsonPrefix;\n        }\n      }\n\n      xhr.withCredentials = !!options.withCredentials;\n\n\n      var body = this._encodeBodyObject(options.body, headers['content-type']);\n\n      xhr.send(\n        /** @type {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|\n                   null|string|undefined} */\n        (body));\n\n      return this.completes;\n    },\n\n    /**\n     * Attempts to parse the response body of the XHR. If parsing succeeds,\n     * the value returned will be deserialized based on the `responseType`\n     * set on the XHR.\n     *\n     * @return {*} The parsed response,\n     * or undefined if there was an empty response or parsing failed.\n     */\n    parseResponse: function () {\n      var xhr = this.xhr;\n      var responseType = xhr.responseType || xhr._responseType;\n      var preferResponseText = !this.xhr.responseType;\n      var prefixLen = (xhr._jsonPrefix && xhr._jsonPrefix.length) || 0;\n\n      try {\n        switch (responseType) {\n          case 'json':\n            // If the xhr object doesn't have a natural `xhr.responseType`,\n            // we can assume that the browser hasn't parsed the response for us,\n            // and so parsing is our responsibility. Likewise if response is\n            // undefined, as there's no way to encode undefined in JSON.\n            if (preferResponseText || xhr.response === undefined) {\n              // Try to emulate the JSON section of the response body section of\n              // the spec: https://xhr.spec.whatwg.org/#response-body\n              // That is to say, we try to parse as JSON, but if anything goes\n              // wrong return null.\n              try {\n                return JSON.parse(xhr.responseText);\n              } catch (_) {\n                return null;\n              }\n            }\n\n            return xhr.response;\n          case 'xml':\n            return xhr.responseXML;\n          case 'blob':\n          case 'document':\n          case 'arraybuffer':\n            return xhr.response;\n          case 'text':\n          default: {\n            // If `prefixLen` is set, it implies the response should be parsed\n            // as JSON once the prefix of length `prefixLen` is stripped from\n            // it. Emulate the behavior above where null is returned on failure\n            // to parse.\n            if (prefixLen) {\n              try {\n                return JSON.parse(xhr.responseText.substring(prefixLen));\n              } catch (_) {\n                return null;\n              }\n            }\n            return xhr.responseText;\n          }\n        }\n      } catch (e) {\n        this.rejectCompletes(new Error('Could not parse response. ' + e.message));\n      }\n    },\n\n    /**\n     * Aborts the request.\n     */\n    abort: function () {\n      this._setAborted(true);\n      this.xhr.abort();\n    },\n\n    /**\n     * @param {*} body The given body of the request to try and encode.\n     * @param {?string} contentType The given content type, to infer an encoding\n     *     from.\n     * @return {*} Either the encoded body as a string, if successful,\n     *     or the unaltered body object if no encoding could be inferred.\n     */\n    _encodeBodyObject: function(body, contentType) {\n      if (typeof body == 'string') {\n        return body;  // Already encoded.\n      }\n      var bodyObj = /** @type {Object} */ (body);\n      switch(contentType) {\n        case('application/json'):\n          return JSON.stringify(bodyObj);\n        case('application/x-www-form-urlencoded'):\n          return this._wwwFormUrlEncode(bodyObj);\n      }\n      return body;\n    },\n\n    /**\n     * @param {Object} object The object to encode as x-www-form-urlencoded.\n     * @return {string} .\n     */\n    _wwwFormUrlEncode: function(object) {\n      if (!object) {\n        return '';\n      }\n      var pieces = [];\n      Object.keys(object).forEach(function(key) {\n        // TODO(rictic): handle array values here, in a consistent way with\n        //   iron-ajax params.\n        pieces.push(\n            this._wwwFormUrlEncodePiece(key) + '=' +\n            this._wwwFormUrlEncodePiece(object[key]));\n      }, this);\n      return pieces.join('&');\n    },\n\n    /**\n     * @param {*} str A key or value to encode as x-www-form-urlencoded.\n     * @return {string} .\n     */\n    _wwwFormUrlEncodePiece: function(str) {\n      // Spec says to normalize newlines to \\r\\n and replace %20 spaces with +.\n      // jQuery does this as well, so this is likely to be widely compatible.\n      if (str === null) {\n        return '';\n      }\n      return encodeURIComponent(str.toString().replace(/\\r?\\n/g, '\\r\\n'))\n          .replace(/%20/g, '+');\n    },\n\n    /**\n     * Updates the status code and status text.\n     */\n    _updateStatus: function() {\n      this._setStatus(this.xhr.status);\n      this._setStatusText((this.xhr.statusText === undefined) ? '' : this.xhr.statusText);\n    }\n  });\n'use strict';\n\n  Polymer({\n\n    is: 'iron-ajax',\n\n    /**\n     * Fired when a request is sent.\n     *\n     * @event request\n     * @event iron-ajax-request\n     */\n\n    /**\n     * Fired when a response is received.\n     *\n     * @event response\n     * @event iron-ajax-response\n     */\n\n    /**\n     * Fired when an error is received.\n     *\n     * @event error\n     * @event iron-ajax-error\n     */\n\n    hostAttributes: {\n      hidden: true\n    },\n\n    properties: {\n      /**\n       * The URL target of the request.\n       */\n      url: {\n        type: String\n      },\n\n      /**\n       * An object that contains query parameters to be appended to the\n       * specified `url` when generating a request. If you wish to set the body\n       * content when making a POST request, you should use the `body` property\n       * instead.\n       */\n      params: {\n        type: Object,\n        value: function() {\n          return {};\n        }\n      },\n\n      /**\n       * The HTTP method to use such as 'GET', 'POST', 'PUT', or 'DELETE'.\n       * Default is 'GET'.\n       */\n      method: {\n        type: String,\n        value: 'GET'\n      },\n\n      /**\n       * HTTP request headers to send.\n       *\n       * Example:\n       *\n       *     <iron-ajax\n       *         auto\n       *         url=\"http://somesite.com\"\n       *         headers='{\"X-Requested-With\": \"XMLHttpRequest\"}'\n       *         handle-as=\"json\"></iron-ajax>\n       *\n       * Note: setting a `Content-Type` header here will override the value\n       * specified by the `contentType` property of this element.\n       */\n      headers: {\n        type: Object,\n        value: function() {\n          return {};\n        }\n      },\n\n      /**\n       * Content type to use when sending data. If the `contentType` property\n       * is set and a `Content-Type` header is specified in the `headers`\n       * property, the `headers` property value will take precedence.\n       *\n       * Varies the handling of the `body` param.\n       */\n      contentType: {\n        type: String,\n        value: null\n      },\n\n      /**\n       * Body content to send with the request, typically used with \"POST\"\n       * requests.\n       *\n       * If body is a string it will be sent unmodified.\n       *\n       * If Content-Type is set to a value listed below, then\n       * the body will be encoded accordingly.\n       *\n       *    * `content-type=\"application/json\"`\n       *      * body is encoded like `{\"foo\":\"bar baz\",\"x\":1}`\n       *    * `content-type=\"application/x-www-form-urlencoded\"`\n       *      * body is encoded like `foo=bar+baz&x=1`\n       *\n       * Otherwise the body will be passed to the browser unmodified, and it\n       * will handle any encoding (e.g. for FormData, Blob, ArrayBuffer).\n       *\n       * @type (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object)\n       */\n      body: {\n        type: Object,\n        value: null\n      },\n\n      /**\n       * Toggle whether XHR is synchronous or asynchronous. Don't change this\n       * to true unless You Know What You Are Doing.\n       */\n      sync: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Specifies what data to store in the `response` property, and\n       * to deliver as `event.detail.response` in `response` events.\n       *\n       * One of:\n       *\n       *    `text`: uses `XHR.responseText`.\n       *\n       *    `xml`: uses `XHR.responseXML`.\n       *\n       *    `json`: uses `XHR.responseText` parsed as JSON.\n       *\n       *    `arraybuffer`: uses `XHR.response`.\n       *\n       *    `blob`: uses `XHR.response`.\n       *\n       *    `document`: uses `XHR.response`.\n       */\n      handleAs: {\n        type: String,\n        value: 'json'\n      },\n\n      /**\n       * Set the withCredentials flag on the request.\n       */\n      withCredentials: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set the timeout flag on the request.\n       */\n      timeout: {\n        type: Number,\n        value: 0\n      },\n\n      /**\n       * If true, automatically performs an Ajax request when either `url` or\n       * `params` changes.\n       */\n      auto: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * If true, error messages will automatically be logged to the console.\n       */\n      verbose: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * The most recent request made by this iron-ajax element.\n       */\n      lastRequest: {\n        type: Object,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * True while lastRequest is in flight.\n       */\n      loading: {\n        type: Boolean,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * lastRequest's response.\n       *\n       * Note that lastResponse and lastError are set when lastRequest finishes,\n       * so if loading is true, then lastResponse and lastError will correspond\n       * to the result of the previous request.\n       *\n       * The type of the response is determined by the value of `handleAs` at\n       * the time that the request was generated.\n       *\n       * @type {Object}\n       */\n      lastResponse: {\n        type: Object,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * lastRequest's error, if any.\n       *\n       * @type {Object}\n       */\n      lastError: {\n        type: Object,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * An Array of all in-flight requests originating from this iron-ajax\n       * element.\n       */\n      activeRequests: {\n        type: Array,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return [];\n        }\n      },\n\n      /**\n       * Length of time in milliseconds to debounce multiple automatically generated requests.\n       */\n      debounceDuration: {\n        type: Number,\n        value: 0,\n        notify: true\n      },\n\n      /**\n       * Prefix to be stripped from a JSON response before parsing it.\n       *\n       * In order to prevent an attack using CSRF with Array responses\n       * (http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx/)\n       * many backends will mitigate this by prefixing all JSON response bodies\n       * with a string that would be nonsensical to a JavaScript parser.\n       *\n       */\n      jsonPrefix: {\n        type: String,\n        value: ''\n      },\n\n      /**\n       * By default, iron-ajax's events do not bubble. Setting this attribute will cause its\n       * request and response events as well as its iron-ajax-request, -response,  and -error\n       * events to bubble to the window object. The vanilla error event never bubbles when\n       * using shadow dom even if this.bubbles is true because a scoped flag is not passed with\n       * it (first link) and because the shadow dom spec did not used to allow certain events,\n       * including events named error, to leak outside of shadow trees (second link).\n       * https://www.w3.org/TR/shadow-dom/#scoped-flag\n       * https://www.w3.org/TR/2015/WD-shadow-dom-20151215/#events-that-are-not-leaked-into-ancestor-trees\n       */\n      bubbles: {\n        type: Boolean,\n        value: false\n      },\n\n      _boundHandleResponse: {\n        type: Function,\n        value: function() {\n          return this._handleResponse.bind(this);\n        }\n      }\n    },\n\n    observers: [\n      '_requestOptionsChanged(url, method, params.*, headers, contentType, ' +\n          'body, sync, handleAs, jsonPrefix, withCredentials, timeout, auto)'\n    ],\n\n    /**\n     * The query string that should be appended to the `url`, serialized from\n     * the current value of `params`.\n     *\n     * @return {string}\n     */\n    get queryString () {\n      var queryParts = [];\n      var param;\n      var value;\n\n      for (param in this.params) {\n        value = this.params[param];\n        param = window.encodeURIComponent(param);\n\n        if (Array.isArray(value)) {\n          for (var i = 0; i < value.length; i++) {\n            queryParts.push(param + '=' + window.encodeURIComponent(value[i]));\n          }\n        } else if (value !== null) {\n          queryParts.push(param + '=' + window.encodeURIComponent(value));\n        } else {\n          queryParts.push(param);\n        }\n      }\n\n      return queryParts.join('&');\n    },\n\n    /**\n     * The `url` with query string (if `params` are specified), suitable for\n     * providing to an `iron-request` instance.\n     *\n     * @return {string}\n     */\n    get requestUrl() {\n      var queryString = this.queryString;\n      var url = this.url || '';\n\n      if (queryString) {\n        var bindingChar = url.indexOf('?') >= 0 ? '&' : '?';\n        return url + bindingChar + queryString;\n      }\n\n      return url;\n    },\n\n    /**\n     * An object that maps header names to header values, first applying the\n     * the value of `Content-Type` and then overlaying the headers specified\n     * in the `headers` property.\n     *\n     * @return {Object}\n     */\n    get requestHeaders() {\n      var headers = {};\n      var contentType = this.contentType;\n      if (contentType == null && (typeof this.body === 'string')) {\n        contentType = 'application/x-www-form-urlencoded';\n      }\n      if (contentType) {\n        headers['content-type'] = contentType;\n      }\n      var header;\n\n      if (this.headers instanceof Object) {\n        for (header in this.headers) {\n          headers[header] = this.headers[header].toString();\n        }\n      }\n\n      return headers;\n    },\n\n    /**\n     * Request options suitable for generating an `iron-request` instance based\n     * on the current state of the `iron-ajax` instance's properties.\n     *\n     * @return {{\n     *   url: string,\n     *   method: (string|undefined),\n     *   async: (boolean|undefined),\n     *   body: (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object),\n     *   headers: (Object|undefined),\n     *   handleAs: (string|undefined),\n     *   jsonPrefix: (string|undefined),\n     *   withCredentials: (boolean|undefined)}}\n     */\n    toRequestOptions: function() {\n      return {\n        url: this.requestUrl || '',\n        method: this.method,\n        headers: this.requestHeaders,\n        body: this.body,\n        async: !this.sync,\n        handleAs: this.handleAs,\n        jsonPrefix: this.jsonPrefix,\n        withCredentials: this.withCredentials,\n        timeout: this.timeout\n      };\n    },\n\n    /**\n     * Performs an AJAX request to the specified URL.\n     *\n     * @return {!IronRequestElement}\n     */\n    generateRequest: function() {\n      var request = /** @type {!IronRequestElement} */ (document.createElement('iron-request'));\n      var requestOptions = this.toRequestOptions();\n\n      this.push('activeRequests', request);\n\n      request.completes.then(\n        this._boundHandleResponse\n      ).catch(\n        this._handleError.bind(this, request)\n      ).then(\n        this._discardRequest.bind(this, request)\n      );\n\n      request.send(requestOptions);\n\n      this._setLastRequest(request);\n      this._setLoading(true);\n\n      this.fire('request', {\n        request: request,\n        options: requestOptions\n      }, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n\n      this.fire('iron-ajax-request', {\n        request: request,\n        options: requestOptions\n      }, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n\n      return request;\n    },\n\n    _handleResponse: function(request) {\n      if (request === this.lastRequest) {\n        this._setLastResponse(request.response);\n        this._setLastError(null);\n        this._setLoading(false);\n      }\n      this.fire('response', request, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n      this.fire('iron-ajax-response', request, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n    },\n\n    _handleError: function(request, error) {\n      if (this.verbose) {\n        Polymer.Base._error(error);\n      }\n\n      if (request === this.lastRequest) {\n        this._setLastError({\n          request: request,\n          error: error,\n          status: request.xhr.status,\n          statusText: request.xhr.statusText,\n          response: request.xhr.response\n        });\n        this._setLastResponse(null);\n        this._setLoading(false);\n      }\n\n      // Tests fail if this goes after the normal this.fire('error', ...)\n      this.fire('iron-ajax-error', {\n        request: request,\n        error: error\n      }, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n\n      this.fire('error', {\n        request: request,\n        error: error\n      }, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n    },\n\n    _discardRequest: function(request) {\n      var requestIndex = this.activeRequests.indexOf(request);\n\n      if (requestIndex > -1) {\n        this.splice('activeRequests', requestIndex, 1);\n      }\n    },\n\n    _requestOptionsChanged: function() {\n      this.debounce('generate-request', function() {\n        if (this.url == null) {\n          return;\n        }\n\n        if (this.auto) {\n          this.generateRequest();\n        }\n      }, this.debounceDuration);\n    },\n\n  });\n(function () {\n  var intlLibraryScript;\n  var intlLibraryLoadingStatus = 'initializing';\n  var _setupIntlPolyfillCalled = false;\n\n  /**\n   * Set up Intl polyfill if required\n   */\n  function _setupIntlPolyfill () {\n    // Polyfill Intl if required\n    var intlLibraryUrl = this.resolveUrl('../intl/dist/Intl.min.js');\n    if (window.Intl) {\n      if (window.IntlPolyfill && window.Intl === window.IntlPolyfill) {\n        intlLibraryLoadingStatus = 'loaded';\n      }\n      else {\n        intlLibraryLoadingStatus = 'native';\n      }\n    }\n    else {\n      intlLibraryLoadingStatus = 'loading';\n      intlLibraryScript = document.createElement('script');\n      intlLibraryScript.setAttribute('src', intlLibraryUrl);\n      intlLibraryScript.setAttribute('id', 'intl-js-library');\n      intlLibraryScript.addEventListener('load', function intlLibraryLoaded (e) {\n        intlLibraryLoadingStatus = 'loaded';\n        e.target.removeEventListener('load', intlLibraryLoaded);\n        return false;\n      });\n      var s = document.querySelector('script') || document.body;\n      s.parentNode.insertBefore(intlLibraryScript, s);\n    }\n  }\n\n  /**\n   * Set up polyfill locale of Intl if required\n   *\n   * @param {String} locale Target locale to polyfill\n   * @param {Function} callback Callback function to handle locale load\n   * @return {Boolean} true if supported; false if callback will be called\n   */\n  function _setupIntlPolyfillLocale (locale, callback) {\n    if (!window.IntlPolyfill) {\n      switch (intlLibraryLoadingStatus) {\n      case 'loading':\n        if (intlLibraryScript) {\n          var libraryLoadedBindThis = function (e) {\n            _setupIntlPolyfillLocale.call(this, locale, callback);\n            e.target.removeEventListener('load', libraryLoadedBindThis);\n          }.bind(this);\n          intlLibraryScript.addEventListener('load', libraryLoadedBindThis);\n          return false;\n        }\n        else {\n          console.error('Intl.js is not being loaded');\n        }\n        break;\n      // impossible cases\n      case 'initializing':\n      case 'loaded':\n      case 'native':\n      default:\n        /* istanbul ignore next: these cases are impossible */\n        break;\n      }\n    }\n    else {\n      if (intlLibraryLoadingStatus !== 'native') {\n        var supported = Intl.NumberFormat.supportedLocalesOf(locale, { localeMatcher: 'lookup' });\n        var script;\n        var intlScript;\n        if (supported.length === 0) {\n          // load the locale\n          var fallbackLanguages = _enumerateFallbackLanguages(locale);\n          locale = fallbackLanguages.shift();\n          script = document.querySelector('script#intl-js-locale-' + locale);\n          if (!script) {\n            script = document.createElement('script');\n            script.setAttribute('id', 'intl-js-locale-' + locale);\n            script.setAttribute('src', this.resolveUrl('../intl/locale-data/jsonp/' + locale + '.js'));\n            var intlLocaleLoadedBindThis = function (e) {\n              if (e.target === script) {\n                e.target.removeEventListener('load', intlLocaleLoadedBindThis);\n                callback.call(this, locale);\n              }\n              return false;\n            }.bind(this);\n            var intlLocaleLoadErrorBindThis = function (e) {\n              if (e.target === script) {\n                e.target.removeEventListener('error', intlLocaleLoadErrorBindThis);\n                script.setAttribute('loaderror','');\n                locale = fallbackLanguages.shift();\n                if (!locale) {\n                  locale = this.DEFAULT_LANG;\n                }\n                var fallbackSupport = Intl.NumberFormat.supportedLocalesOf(locale, { localeMatcher: 'lookup'});\n                if (fallbackSupport.length > 0) {\n                  callback.call(this, locale);\n                }\n                else {\n                  _setupIntlPolyfillLocale.call(this, locale, callback);\n                }\n                return false;\n              }\n            }.bind(this);\n            script.addEventListener('load', intlLocaleLoadedBindThis);\n            script.addEventListener('error', intlLocaleLoadErrorBindThis);\n            intlScript = document.querySelector('script#intl-js-library') || document.body;\n            intlScript.parentNode.insertBefore(script, intlScript.nextSibling);\n          }\n          else if (!script.hasAttribute('loaderror')) {\n            // already loading\n            var anotherIntlLocaleLoadedBindThis = function (e) {\n              if (e.target === script) {\n                callback.call(this, locale);\n                e.target.removeEventListener('load', anotherIntlLocaleLoadedBindThis);\n                return false;\n              }\n            }.bind(this);\n            var anotherIntlLocaleLoadErrorBindThis = function (e) {\n              if (e.target === script) {\n                e.target.removeEventListener('error', anotherIntlLocaleLoadErrorBindThis);\n                locale = fallbackLanguages.shift();\n                if (!locale) {\n                  locale = this.DEFAULT_LANG;\n                }\n                var fallbackSupport = Intl.NumberFormat.supportedLocalesOf(locale, { localeMatcher: 'lookup'});\n                if (fallbackSupport.length > 0) {\n                  callback.call(this, locale);\n                }\n                else {\n                  _setupIntlPolyfillLocale.call(this, locale, callback);\n                }\n                return false;\n              }\n            }.bind(this);\n            script.addEventListener('load', anotherIntlLocaleLoadedBindThis);\n            script.addEventListener('error', anotherIntlLocaleLoadErrorBindThis);\n          }\n          else {\n            var enSupport = Intl.NumberFormat.supportedLocalesOf(this.DEFAULT_LANG, { localeMatcher: 'lookup'});\n            if (enSupport.length > 0) {\n              callback.call(this, this.DEFAULT_LANG);\n            }\n            else {\n              _setupIntlPolyfillLocale.call(this, this.DEFAULT_LANG, callback);\n            }\n          }\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Enumerate fallback locales for the target locale.\n   * \n   * Subset implementation of BCP47 (https://tools.ietf.org/html/bcp47).\n   *\n   * ### Examples:\n   *\n   *| Target Locale | Fallback 1 | Fallback 2 | Fallback 3 |\n   *|:--------------|:-----------|:-----------|:-----------|\n   *| ru            | N/A        | N/A        | N/A        |\n   *| en-GB         | en         | N/A        | N/A        |\n   *| en-Latn-GB    | en-GB      | en-Latn    | en         |\n   *| fr-CA         | fr         | N/A        | N/A        |\n   *| zh-Hans-CN    | zh-Hans    | zh         | N/A        |\n   *| zh-CN         | zh-Hans    | zh         | N/A        |\n   *| zh-TW         | zh-Hant    | zh         | N/A        |\n   *\n   * #### Note:\n   *\n   * For zh language, the script Hans or Hant is supplied as its default script when a country/region code is supplied.\n   *\n   * @param {string} lang Target locale.\n   * @return {Array} List of fallback locales including the target locale at the index 0.\n   */\n  function _enumerateFallbackLanguages (lang) {\n    var result = [];\n    var parts;\n    var match;\n    var isExtLangCode = 0;\n    var extLangCode;\n    var isScriptCode = 0;\n    var scriptCode;\n    var isCountryCode = 0;\n    var countryCode;\n    var n;\n    if (!lang || lang.length === 0) {\n      result.push('');\n    }\n    else {\n      parts = lang.split(/[-_]/);\n      // normalize ISO-639-1 language codes\n      if (parts.length > 0 &&\n          parts[0].match(/^[A-Za-z]{2,3}$/)) {\n        // language codes have to be lowercased\n        // e.g. JA -> ja, FR -> fr\n        // TODO: normalize 3-letter codes to 2-letter codes\n        parts[0] = parts[0].toLowerCase();\n      }\n      // normalize ISO-639-3 extension language codes\n      if (parts.length >= 2 &&\n          parts[1].match(/^[A-Za-z]{3}$/) &&\n          !parts[1].match(/^[Cc][Hh][SsTt]$/)) { // exclude CHS,CHT\n        // extension language codes have to be lowercased\n        // e.g. YUE -> yue\n        isExtLangCode = 1;\n        extLangCode = parts[1] = parts[1].toLowerCase();\n      }\n      // normalize ISO-15924 script codes\n      if (parts.length >= isExtLangCode + 2 &&\n          (match = parts[isExtLangCode + 1].match(/^([A-Za-z])([A-Za-z]{3})$/))) {\n        // script codes have to be capitalized only at the first character\n        // e.g. HANs -> Hans, lAtN -> Latn\n        isScriptCode = 1;\n        scriptCode = parts[isExtLangCode + 1] = match[1].toUpperCase() + match[2].toLowerCase();\n      }\n      // normalize ISO-3166-1 country/region codes\n      if (parts.length >= isExtLangCode + isScriptCode + 2 &&\n          (match = parts[isExtLangCode + isScriptCode + 1].match(/^[A-Za-z0-9]{2,3}$/))) {\n        // country/region codes have to be capitalized\n        // e.g. cn -> CN, jP -> JP\n        isCountryCode = 1;\n        countryCode = parts[isExtLangCode + isScriptCode + 1] = match[0].toUpperCase();\n      }\n      // extensions have to be in lowercases\n      // e.g. U-cA-Buddhist -> u-ca-buddhist, X-LiNux -> x-linux\n      if (parts.length >= isExtLangCode + isScriptCode + isCountryCode + 2) {\n        for (n = isExtLangCode + isScriptCode + isCountryCode + 1; n < parts.length; n++) {\n          parts[n] = parts[n].toLowerCase();\n        }\n      }\n      // enumerate fallback languages\n      while (parts.length > 0) {\n        // normalize delimiters as -\n        // e.g. ja_JP -> ja-JP\n        result.push(parts.join('-'));\n        if (isScriptCode &&\n            isCountryCode &&\n            parts.length == isExtLangCode + isScriptCode + 2) {\n          // script code can be omitted to default\n          // e.g. en-Latn-GB -> en-GB, zh-Hans-CN -> zh-CN\n          parts.splice(isExtLangCode + isScriptCode, 1);\n          result.push(parts.join('-'));\n          parts.splice(isExtLangCode + isScriptCode, 0, scriptCode);\n        }\n        if (isExtLangCode &&\n            isCountryCode &&\n            parts.length == isExtLangCode + isScriptCode + 2) {\n          // ext lang code can be omitted to default\n          // e.g. zh-yue-Hans-CN -> zh-Hans-CN\n          parts.splice(isExtLangCode, 1);\n          result.push(parts.join('-'));\n          parts.splice(isExtLangCode, 0, extLangCode);\n        }\n        if (isExtLangCode &&\n            isScriptCode &&\n            parts.length == isExtLangCode + isScriptCode + 1) {\n          // ext lang code can be omitted to default\n          // e.g. zh-yue-Hans -> zh-Hans\n          parts.splice(isExtLangCode, 1);\n          result.push(parts.join('-'));\n          parts.splice(isExtLangCode, 0, extLangCode);\n        }\n        if (!isScriptCode &&\n            !isExtLangCode &&\n            isCountryCode &&\n            parts.length == 2) {\n          // default script code can be added in certain cases with country codes\n          // e.g. zh-CN -> zh-Hans-CN, zh-TW -> zh-Hant-TW\n          switch (result[result.length - 1]) {\n          case 'zh-CN':\n          case 'zh-CHS':\n            result.push('zh-Hans');\n            break;\n          case 'zh-TW':\n          case 'zh-SG':\n          case 'zh-HK':\n          case 'zh-CHT':\n            result.push('zh-Hant');\n            break;\n          default:\n            break;\n          }\n        }\n        parts.pop();\n      }\n    }\n    return result;\n  }\n\n  Polymer({\n    is: 'i18n-number',\n\n    /**\n     * Fired whenever the formatted text is rendered.\n     *\n     * @event rendered\n     */\n    \n    properties: {\n      /**\n       * The locale for the formatted number.\n       * The typical value is bound to `{{effectiveLang}}` when the containing element has\n       * `BehaviorsStore.I18nBehavior`.\n       */\n      _lang: {\n        type: String,\n        value: 'en',\n        observer: '_langChanged',\n        reflectToAttribute: false\n      },\n\n      /**\n       * Options object for Intl.NumberFormat \n       * (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat)\n       */\n      options: {\n        type: Object,\n        observer: '_optionsChanged',\n        notify: true\n      },\n\n      /**\n       * Raw string synchronized with textContent\n       */\n      raw: {\n        type: String,\n        observer: '_rawChanged'\n      },\n\n      /**\n       * Offset for number\n       *\n       * Note: number = rawNumber - offset \n       */\n      offset: {\n        type: Number,\n        value: 0,\n        observer: '_offsetChanged'\n      },\n\n      /**\n       * Raw number parsed from raw\n       */\n      rawNumber: {\n        type: Number,\n        notify: true\n      },\n\n      /**\n       * Number calculated from rawNumber and offset\n       */\n      number: {\n        type: Number,\n        notify: true\n      },\n\n      /**\n       * Formatted string rendered for UI\n       *\n       * Note:\n       *   - While Intl.js Polyfill locale module is being loaded, the value is set as `undefined` until load completion.\n       */\n      formatted: {\n        type: String,\n        notify: true\n      }\n    },\n\n    observers: [\n      '_onOptionsPropertyChanged(options.*)'\n    ],\n\n    /**\n     * Default locale constant 'en'\n     */\n    DEFAULT_LANG: 'en',\n\n    /**\n     * Start loading Intl polyfill only once\n     */\n    registered: function () {\n      if (!_setupIntlPolyfillCalled) {\n        _setupIntlPolyfillCalled = true;\n        _setupIntlPolyfill.call(this);\n      }\n    },\n\n    ready: function () {\n      this._setupObservers();\n      this.raw = this.textNode.data;\n      if (!this.lang) {\n        // Polyfill non-functional default value for lang property in Safari 7\n        this.lang = this.DEFAULT_LANG;\n      }\n    },\n\n    attached: function () {\n      this.raw = this.textNode.data;\n    },\n\n    /**\n     * Set up observers of textContent mutations\n     */\n    _setupObservers: function () {\n      this.textNode = Polymer.dom(this).childNodes[0];\n      if (!this.textNode) {\n        Polymer.dom(this).appendChild(document.createTextNode(''));\n        this.textNode = Polymer.dom(this).childNodes[0];\n      }\n      this.observer = new MutationObserver(this._textMutated.bind(this));\n      this.observer.observe(this.textNode, { characterData: true });\n      this.observer.observe(this, { attributes: true, attributeFilter: [ 'lang' ] });\n      this.nodeObserver = Polymer.dom(this).observeNodes(function (info) {\n        if (info.addedNodes[0] && \n            info.addedNodes[0].nodeType === info.addedNodes[0].TEXT_NODE) {\n          this.textNode = info.addedNodes[0];\n          this.raw = this.textNode.data;\n          //console.log('i18n-number: text node added with ' + this.raw);\n          this.observer.observe(this.textNode, { characterData: true });\n        }\n      }.bind(this));\n    },\n\n    /**\n     * MutationObserver callback of the child text node to re-render on text mutations.\n     *\n     * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n     */\n    _textMutated: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'characterData':\n          //console.log('i18n-number: _textMutated: raw = ' + mutation.target.data);\n          if (this.raw !== mutation.target.data) {\n            this.raw = mutation.target.data;\n          }\n          break;\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            this._lang = this.lang;\n          }\n          break;\n        default:\n          /* istanbul ignore next: mutation.type is characterData or attributes */\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Observer of `raw` property to re-render the formatted number.\n     *\n     * @param {string} raw New raw number string.\n     */\n    _rawChanged: function (raw) {\n      if (this.textNode) {\n        if (raw !== this.textNode.data) {\n          this.textNode.data = raw;\n        }\n        //console.log('i18n-number: _rawChanged: raw = ' + raw);\n        this._render(this.lang, this.options, raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `lang` property to re-render the formatted number.\n     *\n     * @param {string} lang New locale.\n     */\n    _langChanged: function (lang) {\n      if (!lang) {\n        this.lang = this.DEFAULT_LANG;\n        lang = this.lang;\n      }\n      if (this.textNode) {\n        //console.log('i18n-number: _langChanged: lang = ' + lang);\n        this._render(lang, this.options, this.raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `options` property to re-render the formatted number.\n     *\n     * @param {Object} options New options for Intl.NumberFormat.\n     */\n    _optionsChanged: function (options) {\n      if (this.textNode) {\n        //console.log('i18n-number: _optionsChanged: options = ' + JSON.stringify(options));\n        this._render(this.lang, options, this.raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `options` sub-properties to re-render the formatted number.\n     */\n    _onOptionsPropertyChanged: function (/* changeRecord */) {\n      if (this.textNode) {\n        //console.log('_onOptionsPropertyChanged: path = ' + changeRecord.path + ' value = ' + JSON.stringify(changeRecord.value));\n        this._render(this.lang, this.options, this.raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `offset` property to re-render the formatted number.\n     *\n     * @param {number} offset New offset.\n     */\n    _offsetChanged: function (offset) {\n      if (this.textNode) {\n        //console.log('i18n-number: _offsetChanged: offset = ' + offset);\n        this._render(this.lang, this.options, this.raw, offset);\n      }\n    },\n\n    /**\n     * Formats the number\n     *\n     * @param {string} lang Locale for formatting.\n     * @param {Object} options Options for Intl.NumberFormat.\n     * @param {number} number Number to format.\n     * @return {string} Formatted number string.\n     */\n    _formatNumber: function (lang, options, number) {\n      if (!lang) {\n        lang = this.DEFAULT_LANG;\n      }\n      switch (intlLibraryLoadingStatus) {\n      case 'loaded':\n      case 'loading':\n      default:\n        try {\n          if (_setupIntlPolyfillLocale.call(this, lang, function (locale) {\n            this.effectiveLang = locale;\n            this._render.call(this, locale, this.options, this.raw, this.offset);\n          }.bind(this))) {\n            return new Intl.NumberFormat(lang, options).format(number);\n          }\n          else {\n            // waiting for callback\n            return undefined;\n          }\n        }\n        catch (e) {\n          return number.toString();\n        }\n        /* istanbul ignore next: unreachable code due to returns in the same case */\n        break;\n      case 'native':\n        // native\n        try {\n          return new Intl.NumberFormat(lang, options).format(number);\n        }\n        catch (e) {\n          return number.toString();\n        }\n        /* istanbul ignore next: unreachable code due to returns in the same case */\n        break;\n      }\n    },\n\n    /**\n     * Renders the formatted number\n     *\n     * @param {string} lang Locale for formatting.\n     * @param {Object} options Options for Intl.NumberFormat.\n     * @param {string} raw Raw number string.\n     * @param {number} offset Offset for number.\n     */\n    _render: function (lang, options, raw, offset) {\n      // TODO: rendering may be done redundantly on property initializations\n      raw = raw.trim();\n      if (!raw && !this.formatted) {\n        //console.log('i18n-number: skipping _render as raw is null');\n        return;\n      }\n      if (raw) {\n        this.rawNumber = Number(raw);\n        this.number = this.rawNumber - offset;\n        this.formatted = this._formatNumber(lang, options, this.number);\n      }\n      else {\n        this.rawNumber = undefined;\n        this.number = undefined;\n        this.formatted = '';\n      }\n      this.$.number.textContent = this.formatted ? this.formatted : '';\n      //console.log('i18n-number: _render ' + this.formatted);\n      if (typeof this.formatted !== 'undefined') {\n        this.fire('rendered');\n      }\n    },\n\n    /**\n     * Renders the formatted number with the current parameters\n     *\n     * Note: (As of Polymer 1.2.3)\n     *   Explicit render() call is needed whenever the observer \n     *   `_onOptionsPropertyChanged(options.*)` is NOT invoked \n     *   after a property of `options` is changed.  An explicit call \n     *   `this.notifyPath('options', this.options, true)` can also \n     *   trigger re-rendering.\n     *\n     *   If the changed property of `options` is bound in an annotation\n     *   like `{{options.currency}}`, the observer `_onOptionsPropertyChanged(options.*)`\n     *   is automatically called whenever the property value is changed\n     *   and thus no explicit call of `render()` or `notifyPath()` is\n     *   required.\n     */\n    render: function () {\n      this._render(this.lang, this.options, this.raw, this.offset);\n    }\n  });\n  })();\nvar _cp = [\nfunction(n, ord) {\n  if (ord) return 'other';\n  return 'other';\n},\nfunction(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one' : 'other';\n},\nfunction(n, ord) {\n  if (ord) return 'other';\n  return ((n == 0\n          || n == 1)) ? 'one' : 'other';\n},\nfunction(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1];\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n}\n];\n\n(function (root, plurals) {\n  if (typeof define === 'function' && define.amd) {\n    define(plurals);\n  } else if (typeof exports === 'object') {\n    module.exports = plurals;\n  } else {\n    root.plurals = plurals;\n  }\n}(this, {\naf: _cp[1],\n\nak: _cp[2],\n\nam: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nar: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return 'other';\n  return (n == 0) ? 'zero'\n      : (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : ((n100 >= 3 && n100 <= 10)) ? 'few'\n      : ((n100 >= 11 && n100 <= 99)) ? 'many'\n      : 'other';\n},\n\nas: function(n, ord) {\n  if (ord) return ((n == 1 || n == 5 || n == 7 || n == 8 || n == 9\n          || n == 10)) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nasa: _cp[1],\n\nast: _cp[3],\n\naz: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], i10 = i.slice(-1),\n      i100 = i.slice(-2), i1000 = i.slice(-3);\n  if (ord) return ((i10 == 1 || i10 == 2 || i10 == 5 || i10 == 7 || i10 == 8)\n          || (i100 == 20 || i100 == 50 || i100 == 70\n          || i100 == 80)) ? 'one'\n      : ((i10 == 3 || i10 == 4) || (i1000 == 100 || i1000 == 200\n          || i1000 == 300 || i1000 == 400 || i1000 == 500 || i1000 == 600 || i1000 == 700\n          || i1000 == 800\n          || i1000 == 900)) ? 'few'\n      : (i == 0 || i10 == 6 || (i100 == 40 || i100 == 60\n          || i100 == 90)) ? 'many'\n      : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nbe: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return ((n10 == 2\n          || n10 == 3) && n100 != 12 && n100 != 13) ? 'few' : 'other';\n  return (n10 == 1 && n100 != 11) ? 'one'\n      : ((n10 >= 2 && n10 <= 4) && (n100 < 12\n          || n100 > 14)) ? 'few'\n      : (t0 && n10 == 0 || (n10 >= 5 && n10 <= 9)\n          || (n100 >= 11 && n100 <= 14)) ? 'many'\n      : 'other';\n},\n\nbem: _cp[1],\n\nbez: _cp[1],\n\nbg: _cp[1],\n\nbh: _cp[2],\n\nbm: _cp[0],\n\nbn: function(n, ord) {\n  if (ord) return ((n == 1 || n == 5 || n == 7 || n == 8 || n == 9\n          || n == 10)) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nbo: _cp[0],\n\nbr: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2),\n      n1000000 = t0 && s[0].slice(-6);\n  if (ord) return 'other';\n  return (n10 == 1 && n100 != 11 && n100 != 71 && n100 != 91) ? 'one'\n      : (n10 == 2 && n100 != 12 && n100 != 72 && n100 != 92) ? 'two'\n      : (((n10 == 3 || n10 == 4) || n10 == 9) && (n100 < 10\n          || n100 > 19) && (n100 < 70 || n100 > 79) && (n100 < 90\n          || n100 > 99)) ? 'few'\n      : (n != 0 && t0 && n1000000 == 0) ? 'many'\n      : 'other';\n},\n\nbrx: _cp[1],\n\nbs: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nca: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1];\n  if (ord) return ((n == 1\n          || n == 3)) ? 'one'\n      : (n == 2) ? 'two'\n      : (n == 4) ? 'few'\n      : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\nce: _cp[1],\n\ncgg: _cp[1],\n\nchr: _cp[1],\n\nckb: _cp[1],\n\ncs: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1];\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : ((i >= 2 && i <= 4) && v0) ? 'few'\n      : (!v0) ? 'many'\n      : 'other';\n},\n\ncy: function(n, ord) {\n  if (ord) return ((n == 0 || n == 7 || n == 8\n          || n == 9)) ? 'zero'\n      : (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : ((n == 3\n          || n == 4)) ? 'few'\n      : ((n == 5\n          || n == 6)) ? 'many'\n      : 'other';\n  return (n == 0) ? 'zero'\n      : (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : (n == 3) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n},\n\nda: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return (n == 1 || !t0 && (i == 0\n          || i == 1)) ? 'one' : 'other';\n},\n\nde: _cp[3],\n\ndsb: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i100 = i.slice(-2), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i100 == 1\n          || f100 == 1) ? 'one'\n      : (v0 && i100 == 2\n          || f100 == 2) ? 'two'\n      : (v0 && (i100 == 3 || i100 == 4) || (f100 == 3\n          || f100 == 4)) ? 'few'\n      : 'other';\n},\n\ndv: _cp[1],\n\ndz: _cp[0],\n\nee: _cp[1],\n\nel: _cp[1],\n\nen: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return (n10 == 1 && n100 != 11) ? 'one'\n      : (n10 == 2 && n100 != 12) ? 'two'\n      : (n10 == 3 && n100 != 13) ? 'few'\n      : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\neo: _cp[1],\n\nes: _cp[1],\n\net: _cp[3],\n\neu: _cp[1],\n\nfa: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nff: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nfi: _cp[3],\n\nfil: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), f10 = f.slice(-1);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (v0 && (i == 1 || i == 2 || i == 3)\n          || v0 && i10 != 4 && i10 != 6 && i10 != 9\n          || !v0 && f10 != 4 && f10 != 6 && f10 != 9) ? 'one' : 'other';\n},\n\nfo: _cp[1],\n\nfr: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nfur: _cp[1],\n\nfy: _cp[3],\n\nga: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : ((t0 && n >= 3 && n <= 6)) ? 'few'\n      : ((t0 && n >= 7 && n <= 10)) ? 'many'\n      : 'other';\n},\n\ngd: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return ((n == 1\n          || n == 11)) ? 'one'\n      : ((n == 2\n          || n == 12)) ? 'two'\n      : (((t0 && n >= 3 && n <= 10)\n          || (t0 && n >= 13 && n <= 19))) ? 'few'\n      : 'other';\n},\n\ngl: _cp[3],\n\ngsw: _cp[1],\n\ngu: function(n, ord) {\n  if (ord) return (n == 1) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nguw: _cp[2],\n\ngv: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1) ? 'one'\n      : (v0 && i10 == 2) ? 'two'\n      : (v0 && (i100 == 0 || i100 == 20 || i100 == 40 || i100 == 60\n          || i100 == 80)) ? 'few'\n      : (!v0) ? 'many'\n      : 'other';\n},\n\nha: _cp[1],\n\nhaw: _cp[1],\n\nhe: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1);\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : (i == 2 && v0) ? 'two'\n      : (v0 && (n < 0\n          || n > 10) && t0 && n10 == 0) ? 'many'\n      : 'other';\n},\n\nhi: function(n, ord) {\n  if (ord) return (n == 1) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nhr: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nhsb: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i100 = i.slice(-2), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i100 == 1\n          || f100 == 1) ? 'one'\n      : (v0 && i100 == 2\n          || f100 == 2) ? 'two'\n      : (v0 && (i100 == 3 || i100 == 4) || (f100 == 3\n          || f100 == 4)) ? 'few'\n      : 'other';\n},\n\nhu: function(n, ord) {\n  if (ord) return ((n == 1\n          || n == 5)) ? 'one' : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nhy: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nid: _cp[0],\n\nig: _cp[0],\n\nii: _cp[0],\n\n\"in\": _cp[0],\n\nis: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], t0 = Number(s[0]) == n,\n      i10 = i.slice(-1), i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (t0 && i10 == 1 && i100 != 11\n          || !t0) ? 'one' : 'other';\n},\n\nit: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1];\n  if (ord) return ((n == 11 || n == 8 || n == 80\n          || n == 800)) ? 'many' : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\niu: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\niw: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1);\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : (i == 2 && v0) ? 'two'\n      : (v0 && (n < 0\n          || n > 10) && t0 && n10 == 0) ? 'many'\n      : 'other';\n},\n\nja: _cp[0],\n\njbo: _cp[0],\n\njgo: _cp[1],\n\nji: _cp[3],\n\njmc: _cp[1],\n\njv: _cp[0],\n\njw: _cp[0],\n\nka: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], i100 = i.slice(-2);\n  if (ord) return (i == 1) ? 'one'\n      : (i == 0 || ((i100 >= 2 && i100 <= 20) || i100 == 40 || i100 == 60\n          || i100 == 80)) ? 'many'\n      : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nkab: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nkaj: _cp[1],\n\nkcg: _cp[1],\n\nkde: _cp[0],\n\nkea: _cp[0],\n\nkk: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1);\n  if (ord) return (n10 == 6 || n10 == 9\n          || t0 && n10 == 0 && n != 0) ? 'many' : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nkkj: _cp[1],\n\nkl: _cp[1],\n\nkm: _cp[0],\n\nkn: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nko: _cp[0],\n\nks: _cp[1],\n\nksb: _cp[1],\n\nksh: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 0) ? 'zero'\n      : (n == 1) ? 'one'\n      : 'other';\n},\n\nku: _cp[1],\n\nkw: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nky: _cp[1],\n\nlag: function(n, ord) {\n  var s = String(n).split('.'), i = s[0];\n  if (ord) return 'other';\n  return (n == 0) ? 'zero'\n      : ((i == 0\n          || i == 1) && n != 0) ? 'one'\n      : 'other';\n},\n\nlb: _cp[1],\n\nlg: _cp[1],\n\nlkt: _cp[0],\n\nln: _cp[2],\n\nlo: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return 'other';\n},\n\nlt: function(n, ord) {\n  var s = String(n).split('.'), f = s[1] || '', t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return 'other';\n  return (n10 == 1 && (n100 < 11\n          || n100 > 19)) ? 'one'\n      : ((n10 >= 2 && n10 <= 9) && (n100 < 11\n          || n100 > 19)) ? 'few'\n      : (f != 0) ? 'many'\n      : 'other';\n},\n\nlv: function(n, ord) {\n  var s = String(n).split('.'), f = s[1] || '', v = f.length,\n      t0 = Number(s[0]) == n, n10 = t0 && s[0].slice(-1),\n      n100 = t0 && s[0].slice(-2), f100 = f.slice(-2), f10 = f.slice(-1);\n  if (ord) return 'other';\n  return (t0 && n10 == 0 || (n100 >= 11 && n100 <= 19)\n          || v == 2 && (f100 >= 11 && f100 <= 19)) ? 'zero'\n      : (n10 == 1 && n100 != 11 || v == 2 && f10 == 1 && f100 != 11\n          || v != 2 && f10 == 1) ? 'one'\n      : 'other';\n},\n\nmas: _cp[1],\n\nmg: _cp[2],\n\nmgo: _cp[1],\n\nmk: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1);\n  if (ord) return (i10 == 1 && i100 != 11) ? 'one'\n      : (i10 == 2 && i100 != 12) ? 'two'\n      : ((i10 == 7\n          || i10 == 8) && i100 != 17 && i100 != 18) ? 'many'\n      : 'other';\n  return (v0 && i10 == 1\n          || f10 == 1) ? 'one' : 'other';\n},\n\nml: _cp[1],\n\nmn: _cp[1],\n\nmo: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n == 1 && v0) ? 'one'\n      : (!v0 || n == 0\n          || n != 1 && (n100 >= 1 && n100 <= 19)) ? 'few'\n      : 'other';\n},\n\nmr: function(n, ord) {\n  if (ord) return (n == 1) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nms: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return 'other';\n},\n\nmt: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 0\n          || (n100 >= 2 && n100 <= 10)) ? 'few'\n      : ((n100 >= 11 && n100 <= 19)) ? 'many'\n      : 'other';\n},\n\nmy: _cp[0],\n\nnah: _cp[1],\n\nnaq: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nnb: _cp[1],\n\nnd: _cp[1],\n\nne: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return ((t0 && n >= 1 && n <= 4)) ? 'one' : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nnl: _cp[3],\n\nnn: _cp[1],\n\nnnh: _cp[1],\n\nno: _cp[1],\n\nnqo: _cp[0],\n\nnr: _cp[1],\n\nnso: _cp[2],\n\nny: _cp[1],\n\nnyn: _cp[1],\n\nom: _cp[1],\n\nor: _cp[1],\n\nos: _cp[1],\n\npa: _cp[2],\n\npap: _cp[1],\n\npl: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12\n          || i100 > 14)) ? 'few'\n      : (v0 && i != 1 && (i10 == 0 || i10 == 1)\n          || v0 && (i10 >= 5 && i10 <= 9)\n          || v0 && (i100 >= 12 && i100 <= 14)) ? 'many'\n      : 'other';\n},\n\nprg: function(n, ord) {\n  var s = String(n).split('.'), f = s[1] || '', v = f.length,\n      t0 = Number(s[0]) == n, n10 = t0 && s[0].slice(-1),\n      n100 = t0 && s[0].slice(-2), f100 = f.slice(-2), f10 = f.slice(-1);\n  if (ord) return 'other';\n  return (t0 && n10 == 0 || (n100 >= 11 && n100 <= 19)\n          || v == 2 && (f100 >= 11 && f100 <= 19)) ? 'zero'\n      : (n10 == 1 && n100 != 11 || v == 2 && f10 == 1 && f100 != 11\n          || v != 2 && f10 == 1) ? 'one'\n      : 'other';\n},\n\nps: _cp[1],\n\npt: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return ((t0 && n >= 0 && n <= 2) && n != 2) ? 'one' : 'other';\n},\n\n\"pt-PT\": _cp[3],\n\nrm: _cp[1],\n\nro: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n == 1 && v0) ? 'one'\n      : (!v0 || n == 0\n          || n != 1 && (n100 >= 1 && n100 <= 19)) ? 'few'\n      : 'other';\n},\n\nrof: _cp[1],\n\nroot: _cp[0],\n\nru: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12\n          || i100 > 14)) ? 'few'\n      : (v0 && i10 == 0 || v0 && (i10 >= 5 && i10 <= 9)\n          || v0 && (i100 >= 11 && i100 <= 14)) ? 'many'\n      : 'other';\n},\n\nrwk: _cp[1],\n\nsah: _cp[0],\n\nsaq: _cp[1],\n\nsdh: _cp[1],\n\nse: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nseh: _cp[1],\n\nses: _cp[0],\n\nsg: _cp[0],\n\nsh: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nshi: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one'\n      : ((t0 && n >= 2 && n <= 10)) ? 'few'\n      : 'other';\n},\n\nsi: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '';\n  if (ord) return 'other';\n  return ((n == 0 || n == 1)\n          || i == 0 && f == 1) ? 'one' : 'other';\n},\n\nsk: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1];\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : ((i >= 2 && i <= 4) && v0) ? 'few'\n      : (!v0) ? 'many'\n      : 'other';\n},\n\nsl: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i100 == 1) ? 'one'\n      : (v0 && i100 == 2) ? 'two'\n      : (v0 && (i100 == 3 || i100 == 4)\n          || !v0) ? 'few'\n      : 'other';\n},\n\nsma: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsmi: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsmj: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsmn: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsms: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsn: _cp[1],\n\nso: _cp[1],\n\nsq: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return (n == 1) ? 'one'\n      : (n10 == 4 && n100 != 14) ? 'many'\n      : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nsr: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nss: _cp[1],\n\nssy: _cp[1],\n\nst: _cp[1],\n\nsv: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return ((n10 == 1\n          || n10 == 2) && n100 != 11 && n100 != 12) ? 'one' : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\nsw: _cp[3],\n\nsyr: _cp[1],\n\nta: _cp[1],\n\nte: _cp[1],\n\nteo: _cp[1],\n\nth: _cp[0],\n\nti: _cp[2],\n\ntig: _cp[1],\n\ntk: _cp[1],\n\ntl: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), f10 = f.slice(-1);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (v0 && (i == 1 || i == 2 || i == 3)\n          || v0 && i10 != 4 && i10 != 6 && i10 != 9\n          || !v0 && f10 != 4 && f10 != 6 && f10 != 9) ? 'one' : 'other';\n},\n\ntn: _cp[1],\n\nto: _cp[0],\n\ntr: _cp[1],\n\nts: _cp[1],\n\ntzm: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return ((n == 0 || n == 1)\n          || (t0 && n >= 11 && n <= 99)) ? 'one' : 'other';\n},\n\nug: _cp[1],\n\nuk: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2), i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return (n10 == 3 && n100 != 13) ? 'few' : 'other';\n  return (v0 && i10 == 1 && i100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12\n          || i100 > 14)) ? 'few'\n      : (v0 && i10 == 0 || v0 && (i10 >= 5 && i10 <= 9)\n          || v0 && (i100 >= 11 && i100 <= 14)) ? 'many'\n      : 'other';\n},\n\nur: _cp[3],\n\nuz: _cp[1],\n\nve: _cp[1],\n\nvi: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return 'other';\n},\n\nvo: _cp[1],\n\nvun: _cp[1],\n\nwa: _cp[2],\n\nwae: _cp[1],\n\nwo: _cp[0],\n\nxh: _cp[1],\n\nxog: _cp[1],\n\nyi: _cp[3],\n\nyo: _cp[0],\n\nzh: _cp[0],\n\nzu: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n}\n}));\nPolymer({\n  is: 'i18n-format',\n\n  /**\n   * Fired whenever the formatted text is rendered.\n   *\n   * @event rendered\n   */\n\n  properties: {\n    /**\n     * The locale for the template text.\n     * The typical value is bound to `{{effectiveLang}}` when the containing element has\n     * `BehaviorsStore.I18nBehavior`.\n     */\n    _lang: {\n      type: String,\n      value: 'en',\n      reflectToAttribute: false,\n      observer: '_langChanged'\n    },\n\n    /**\n     * The parameter attribute name to identify parameters.\n     * No need to change in a normal usage.\n     */\n    paramAttribute: {\n      type: String,\n      value: (function () { return Polymer.Element ? 'slot' : 'param'; })(),\n      observer: '_paramAttributeChanged'\n    },\n\n    /**\n     * The parameter format in the template text.\n     * The `'n'` in the format means n-th parameter.\n     * No need to change in a normal usage.\n     */\n    paramFormat: {\n      type: String,\n      value: '{n}',\n      observer: '_paramFormatChanged'\n    },\n\n    /**\n     * When the boolean attribute `observe-params` is specified, \n     * the template is re-rendered on every parameter mutation.\n     * If not specified, the template is re-rendered only on `lang` changes and template text changes.\n     *\n     * Note: If true, re-rendering may be performed muiltiple times redundantly on a locale change.\n     */\n    observeParams: {\n      type: Boolean,\n      value: true // TODO: optimize re-rendering\n    }\n  },\n\n  /**\n   * Default locale constant 'en'\n   */\n  DEFAULT_LANG: 'en',\n\n  ready: function () {\n    this._setupParams();\n    if (this.root === this) {\n      this.attachShadow({ mode: 'open' });\n      this.root = this.shadowRoot;\n      this.render();\n    }\n    if (!this.lang) {\n      // Polyfill non-functional default value for lang property in Safari 7\n      this.lang = this.DEFAULT_LANG;\n    }\n  },\n\n  attached: function () {\n    this.render();\n  },\n\n  /**\n   * Traverse the local DOM and set up parameters and observers.\n   */\n  _setupParams: function () {\n    var n;\n    this.elements = Array.prototype.filter.call(\n      Polymer.dom(this).childNodes,\n      function (node) {\n        return node.nodeType === node.ELEMENT_NODE;\n      }\n    );\n    var needParamObservation = this.observeParams &&\n                               this.elements.length > 0 && \n                               this.elements[0].tagName.toLowerCase() === 'json-data';\n    this.observer = new MutationObserver(this._templateMutated.bind(this));\n    this.observer.observe(this, { attributes: true, attributeFilter: [ 'lang' ] });\n    for (n = 0; n < this.elements.length; n++) {\n      if (n === 0) {\n        this.templateElement = this.elements[n];\n        this.templateTextNode = Polymer.dom(this.templateElement).childNodes[0];\n        this.observer.observe(this.templateTextNode, { characterData: true });\n      }\n      else {\n        if (!this.elements[n].hasAttribute(this.paramAttribute)) {\n          this.elements[n].setAttribute(this.paramAttribute, '' + n);\n        }\n        if (needParamObservation) {\n          // TODO: childNodes[0] may not be a text node\n          this.observer.observe(Polymer.dom(this.elements[n]).childNodes[0], { characterData: true });\n          if (this.elements[n].tagName.toLowerCase() === 'i18n-number') {\n            this.listen(this.elements[n], 'rendered', 'render');\n          }\n        }\n      }\n    }\n    //console.log('i18n-format: _setupParams: elements = ' + this.elements);\n  },\n\n  /**\n   * MutationObserver callback of child text nodes to re-render on template text or parameter mutations.\n   *\n   * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n   */\n  _templateMutated: function (mutations) {\n    mutations.forEach(function(mutation) {\n      switch (mutation.type) {\n      case 'characterData':\n        //console.log('i18n-format: ' + this.id + '._templateMutated(): characterData: tag = ' + \n        //            Polymer.dom(mutation.target).parentNode.tagName.toLowerCase() + \n        //            ' data = ' + mutation.target.data);\n        if ((Polymer.Element ? mutation.target : Polymer.dom(mutation.target)).parentNode.tagName.toLowerCase() !== 'i18n-number' ||\n            typeof (Polymer.Element ? mutation.target : Polymer.dom(mutation.target)).parentNode.formatted !== 'undefined') {\n          this.render();\n        }\n        break;\n      case 'attributes':\n        if (mutation.attributeName === 'lang') {\n          this._lang = this.lang;\n        }\n        break;\n      default:\n        /* istanbul ignore next: mutation.type is always characterData or attributes */\n        break;\n      }\n    }, this);\n  },\n\n  /**\n   * Observer of `lang` property to re-render the template text.\n   *\n   * @param {string} lang New locale.\n   */\n  _langChanged: function (lang /*, oldLang */) {\n    //console.log('i18n-format: ' + this.id + '._langChanged() lang = ' + lang + ' oldLang = ' + oldLang);\n    if (this.elements &&\n        lang !== undefined &&\n        lang !== null &&\n        !lang.match(/^{{.*}}$/) &&\n        !lang.match(/^\\[\\[.*\\]\\]$/)) {\n      this.render();\n    }\n    //else {\n    //  console.log('i18n-format: skipping render()');\n    //}\n  },\n\n  /**\n   * Observer of `paramFormat` property to re-render the template text.\n   *\n   * @param {string} paramFormat New paramFormat.\n   * @param {string} oldParamFormat Old paramFormat.\n   */\n  _paramFormatChanged: function (paramFormat, oldParamFormat) {\n    //console.log('i18n-format: ' + this.id + '._paramFormatChanged() new = ' + paramFormat + ' old = ' + oldParamFormat);\n    if (this.elements &&\n        oldParamFormat !== undefined &&\n        paramFormat &&\n        this.lang !== undefined &&\n        this.lang !== null &&\n        !this.lang.match(/^{{.*}}$/) &&\n        !this.lang.match(/^\\[\\[.*\\]\\]$/)) {\n      this.lastTemplateText = undefined;\n      this.render();\n    }\n  },\n\n  /**\n   * Observer of `paramAttribute` property to reset parameter attributes.\n   *\n   * @param {string} paramAttribute New paramAttribute.\n   * @param {string} oldParamAttribute Old paramAttribute.\n   */\n  _paramAttributeChanged: function (paramAttribute, oldParamAttribute) {\n    //console.log('i18n-format: ' + this.id + '._paramAttributeChanged() new = ' + paramAttribute + ' old = ' + oldParamAttribute);\n    var n;\n    if (this.elements &&\n        oldParamAttribute !== undefined &&\n        paramAttribute &&\n        this.lang !== undefined &&\n        this.lang !== null &&\n        !this.lang.match(/^{{.*}}$/) &&\n        !this.lang.match(/^\\[\\[.*\\]\\]$/)) {\n      for (n = 1; n < this.elements.length; n++) {\n        this.elements[n].removeAttribute(oldParamAttribute);\n        if (!this.elements[n].hasAttribute(paramAttribute)) {\n          this.elements[n].setAttribute(paramAttribute, '' + n);\n        }\n      }\n      this.lastTemplateText = undefined;\n      this.render();\n    }\n  },\n\n  /**\n   * Detect the CLDR plural category of a number \n   * with [`make-plural` library](https://github.com/eemeli/make-plural.js).\n   *\n   * @param {number} n The number to get the plural category for.\n   * @return {string} Plural category of the number. \n   */\n  _getPluralCategory: function (n) {\n    var category = 'other';\n    var lang = this.lang || this.DEFAULT_LANG;\n    lang = lang.split(/[-_]/)[0];\n    if (window.plurals[lang]) {\n      category = window.plurals[lang](n);\n    }\n    else {\n      category = window.plurals.en(n);\n    }\n    //console.log('i18n-format: _getPluralCategory(' + n + ') = ' + category);\n    return category;\n  },\n\n  /**\n   * Select a template text by parameters.\n   *\n   * @return {string} Selected template text. \n   */\n  _selectTemplateText: function () {\n    var templateText = '';\n    if (!this.templateElement) {\n      return templateText;\n    }\n    else if (this.templateElement.tagName.toLowerCase() === 'json-data') {\n      var templateObject;\n      try {\n        templateObject = JSON.parse(this.templateTextNode.data);\n      }\n      catch (ex) {\n        if (this.templateTextNode.data) {\n          console.warn('i18n-format: parse error in json-data');\n        }\n        return templateText;\n      }\n      var n;\n      for (n = 1;\n           typeof templateObject === 'object' && n < this.elements.length;\n           n++) {\n        var param = this.elements[n];\n        if (param.tagName.toLowerCase() === 'i18n-number') {\n          // plural selector\n          var category = this._getPluralCategory(param.number);\n          if (typeof param.number === 'undefined' ||\n              typeof param.formatted === 'undefined') {\n            // i18n-number is not ready\n            //console.log('i18n-format: i18n-number is not ready');\n            templateObject = undefined;\n          }\n          else if (templateObject[param.rawNumber]) {\n            templateObject = templateObject[param.rawNumber];\n          }\n          else if (templateObject[category]) {\n            // plural category matched\n            templateObject = templateObject[category];\n          }\n          else if (templateObject.other) {\n            // other\n            templateObject = templateObject.other;\n          }\n          else {\n            // default\n            templateObject = '';\n            console.warn('i18n-format: cannot find a template');\n          }\n        }\n        else {\n          // string selector\n          if (templateObject[param.textContent]) {\n            // template found\n            templateObject = templateObject[param.textContent];\n          }\n          else if (templateObject.other) {\n            // other\n            templateObject = templateObject.other;\n          }\n          else {\n            // default\n            templateObject = '';\n            console.warn('i18n-format: cannot find a template');\n          }\n        }\n      }\n      if (typeof templateObject === 'string') {\n        templateText = templateObject;\n      }\n      else if (typeof templateObject === 'undefined') {\n        templateText = undefined;\n      }\n      else {\n        templateText = '';\n        console.warn('i18n-format: cannot find a template');\n      }\n    }\n    else {\n      templateText = this.templateTextNode.data;\n    }\n    return templateText;\n  },\n\n  /**\n   * Render the template text.\n   */\n  render: function () {\n    var templateText = this._selectTemplateText();\n    var tmpNode = document.createElement('span');\n    var paramPlaceholder;\n    var childNodes = [];\n    var i;\n    var shadowDomV1 = !!Polymer.Element;\n    var shadyDomV1 = !!window.ShadyDOM;\n\n    if (templateText === this.lastTemplateText) {\n      //console.log('i18n-format: skipping rendering as the templateText has not changed');\n      return;\n    }\n    else if (typeof templateText === 'undefined') {\n      return;\n    }\n    else {\n      this.lastTemplateText = templateText;\n      //console.log('i18n-format: ' + this.id + '.render() templateText = ' + templateText);\n    }\n\n    i = 1;\n    while (i < this.elements.length) {\n      paramPlaceholder = this.paramFormat.replace('n', i);\n      templateText = templateText.replace(paramPlaceholder, \n                      shadowDomV1 ? '<slot name=\"' + i + '\"></slot>' :\n                      '<content select=\"[' + this.paramAttribute + '=\\'' + i + '\\']\"></content>');\n      i++;\n    }\n    \n    tmpNode.innerHTML = templateText;\n\n    if (Polymer.Element) {\n      if (this.root === this) {\n        this.attachShadow({ mode: 'open' });\n        this.root = this.shadowRoot;\n      }\n      this.root.innerHTML = ''; // Polymer 2.x\n    }\n    else {\n      Polymer.dom(this.root).innerHTML = '';\n    }\n\n    // References of childNodes have to be copied for Shady DOM compatibility\n    for (i = 0; i < tmpNode.childNodes.length; i++) {\n      childNodes[i] = tmpNode.childNodes[i];\n    }\n\n    for (i = 0; i < childNodes.length; i++) {\n      // each node has to be appended via Polymer.dom()\n      Polymer.dom(this.root).appendChild(childNodes[i]);\n    }\n\n    if (shadyDomV1) {\n      ShadyDOM.flush();\n    }\n    this.fire('rendered');\n  }\n});\nPolymer({\n    is: 'iron-localstorage',\n\n    properties: {\n      /**\n       * localStorage item key\n       */\n      name: {\n        type: String,\n        value: ''\n      },\n      /**\n       * The data associated with this storage.\n       * If set to null item will be deleted.\n       * @type {*}\n       */\n      value: {\n        type: Object,\n        notify: true\n      },\n\n      /**\n       * If true: do not convert value to JSON on save/load\n       */\n      useRaw: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Value will not be saved automatically if true. You'll have to do it manually with `save()`\n       */\n      autoSaveDisabled: {\n        type: Boolean,\n        value: false\n      },\n      /**\n       * Last error encountered while saving/loading items\n       */\n      errorMessage: {\n        type: String,\n        notify: true\n      },\n\n      /** True if value has been loaded */\n      _loaded: {\n        type: Boolean,\n        value: false\n      }\n    },\n\n    observers: [\n      '_debounceReload(name,useRaw)',\n      '_trySaveValue(autoSaveDisabled)',\n      '_trySaveValue(value.*)'\n    ],\n\n    ready: function() {\n      this._boundHandleStorage = this._handleStorage.bind(this);\n    },\n\n    attached: function() {\n      window.addEventListener('storage', this._boundHandleStorage);\n    },\n\n    detached: function() {\n      window.removeEventListener('storage', this._boundHandleStorage);\n    },\n\n    _handleStorage: function(ev) {\n      if (ev.key == this.name) {\n        this._load(true);\n      }\n    },\n\n    _trySaveValue: function() {\n      if (this._doNotSave) {\n        return;\n      }\n      if (this._loaded && !this.autoSaveDisabled) {\n        this.debounce('save', this.save);\n      }\n    },\n\n    _debounceReload: function() {\n      this.debounce('reload', this.reload);\n    },\n\n    /**\n     * Loads the value again. Use if you modify\n     * localStorage using DOM calls, and want to\n     * keep this element in sync.\n     */\n    reload: function() {\n      this._loaded = false;\n      this._load();\n    },\n\n    /**\n     * loads value from local storage\n     * @param {boolean=} externalChange true if loading changes from a different window\n     */\n    _load: function(externalChange) {\n      try {\n        var v = window.localStorage.getItem(this.name);\n      } catch (ex) {\n        this.errorMessage = ex.message;\n\n        this._error(\"Could not save to localStorage.  Try enabling cookies for this page.\", ex);\n      };\n\n      if (v === null) {\n        this._loaded = true;\n        this._doNotSave = true;  // guard for save watchers\n        this.value = null;\n        this._doNotSave = false;\n        this.fire('iron-localstorage-load-empty', { externalChange: externalChange});\n      } else {\n        if (!this.useRaw) {\n          try { // parse value as JSON\n            v = JSON.parse(v);\n          } catch(x) {\n            this.errorMessage = \"Could not parse local storage value\";\n            Polymer.Base._error(\"could not parse local storage value\", v);\n            v = null;\n          }\n        }\n        this._loaded = true;\n        this._doNotSave = true;\n        this.value = v;\n        this._doNotSave = false;\n        this.fire('iron-localstorage-load', { externalChange: externalChange});\n      }\n    },\n\n    /**\n     * Saves the value to localStorage. Call to save if autoSaveDisabled is set.\n     * If `value` is null or undefined, deletes localStorage.\n     */\n    save: function() {\n      var v = this.useRaw ? this.value : JSON.stringify(this.value);\n      try {\n        if (this.value === null || this.value === undefined) {\n          window.localStorage.removeItem(this.name);\n        } else {\n          window.localStorage.setItem(this.name, /** @type {string} */ (v));\n        }\n      }\n      catch(ex) {\n        // Happens in Safari incognito mode,\n        this.errorMessage = ex.message;\n        Polymer.Base._error(\"Could not save to localStorage. Incognito mode may be blocking this action\", ex);\n      }\n    }\n\n    /**\n     * Fired when value loads from localStorage.\n     *\n     * @event iron-localstorage-load\n     * @param {{externalChange:boolean}} detail -\n     *     externalChange: true if change occured in different window.\n     */\n\n    /**\n     * Fired when loaded value does not exist.\n     * Event handler can be used to initialize default value.\n     *\n     * @event iron-localstorage-load-empty\n     * @param {{externalChange:boolean}} detail -\n     *     externalChange: true if change occured in different window.\n     */\n  });\n(function(document) {\n  'use strict';\n\n  // html element of this document\n  var html = document.querySelector('html');\n  // app global default language\n  var defaultLang = html.hasAttribute('lang') ? html.getAttribute('lang') : '';\n\n  // imperative synchronous registration of the template for Polymer 2.x\n  var template = ((!window.HTMLImports || HTMLImports.hasNative || HTMLImports.useNative) ? document.currentScript : (document._currentScript || document.currentScript))\n    .ownerDocument.querySelector('template#i18n-preference');\n  var domModule = document.createElement('dom-module');\n  var currentScript = (!window.HTMLImports || HTMLImports.hasNative || HTMLImports.useNative) ? document.currentScript : (document._currentScript || document.currentScript);\n  var registerI18nPreference = function () {\n\n  currentScript.ownerDocument.querySelector('div#dom-module-placeholder').appendChild(domModule);\n  domModule.appendChild(template);\n  domModule.register('i18n-preference');\n\n  Polymer({\n    is: 'i18n-preference',\n\n    properties: {\n      /**\n       * Persistence of preference \n       */\n      persist: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        notify: true,\n        observer: '_onPersistChange'\n      }\n    },\n\n    /**\n     * Ready callback to initialize this.lang\n     */\n    ready: function () {\n      if (this.persist) {\n        // delay this.lang update\n      }\n      else {\n        //this.$.storage.value = undefined;\n      }\n      this.isReady = true;\n    },\n\n    /**\n     * Attached callback to initialize html.lang and its observation\n     */\n    attached: function () {\n      this._observe();\n      if (this.persist) {\n        // delay html.lang update\n      }\n      else {\n        if (!html.hasAttribute('preferred')) {\n          html.setAttribute('lang', navigator.language || navigator.browserLanguage);\n        }\n      }\n    },\n\n    /**\n     * Detached callback to diconnect html.lang observation\n     */\n    detached: function () {\n      this._disconnect();\n    },\n\n    /**\n     * Initialize an empty localstorage\n     */\n    _onLoadEmptyStorage: function () {\n      if (this.isReady) {\n        if (this.persist) {\n          if (this.isInitialized) {\n            // store html.lang value\n            this.$.storage.value = html.getAttribute('lang');\n          }\n          else {\n            if (html.hasAttribute('preferred')) {\n              this.$.storage.value = html.getAttribute('lang');\n            }\n            else {\n              this.$.storage.value = navigator.language || navigator.browserLanguage;\n              if (html.getAttribute('lang') !== this.$.storage.value) {\n                html.setAttribute('lang', this.$.storage.value);\n              }\n            }\n            this.isInitialized = true;\n          }\n        }\n        else {\n          // leave the empty storage as it is\n        }\n      }\n    },\n\n\n    /**\n     * Handle the loaded storage value\n     */\n    _onLoadStorage: function () {\n      if (this.isReady) {\n        if (this.persist) {\n          // preferred attribute in html to put higher priority\n          // in the default html language than navigator.language\n          if (html.hasAttribute('preferred')) {\n            if (this.$.storage.value !== defaultLang) {\n              // overwrite the storage by the app default language\n              this.$.storage.value = defaultLang;\n            }\n          }\n          else {\n            // load the value from the storage\n            html.setAttribute('lang', this.$.storage.value);\n          }\n        }\n        else {\n          // empty the storage\n          this.$.storage.value = undefined;\n        }\n      }\n    },\n\n    /**\n     * Handle persist changes\n     *\n     * @param {Boolean} value new this.persist value\n     */\n    _onPersistChange: function (value) {\n      if (this.isReady) {\n        if (value) {\n          if (this.$.storage.value !== html.getAttribute('lang')) {\n            // save to the storage\n            this.$.storage.value = html.getAttribute('lang');\n          }\n        }\n        else {\n          // empty the storage\n          this.$.storage.value = undefined;\n        }\n      }\n    },\n\n    /**\n     * Handle storage value changes\n     *\n     * @param {Event} e value-changed event on the storage\n     */\n    _onStorageValueChange: function (e) {\n      var value = e.detail.value;\n      if (this.isReady) {\n        if (this.persist) {\n          if (value) {\n            if (value !== html.getAttribute('lang')) {\n              // save to the lang\n              html.setAttribute('lang', value);\n            }\n          }\n          else {\n            // update the storage\n            this.$.storage.value = html.getAttribute('lang');\n          }\n        }\n        else {\n          if (value) {\n            // empty the storage\n            this.$.storage.value = undefined;\n          }\n        }\n      }\n    },\n\n    /**\n     * Handle value changes on localstorage\n     *\n     * @param {MutationRecord[]} mutations Array of MutationRecords for html.lang\n     *\n     * Note: \n     *   - Bound to this element\n     */\n    _htmlLangMutationObserverCallback: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            if (this.$.storage.value !== mutation.target.getAttribute('lang')) {\n              this.$.storage.value = mutation.target.getAttribute('lang');\n            }\n          }\n          break;\n        default:\n          break;\n        }\n      }.bind(this));\n    },\n\n    /**\n     * Set up html.lang mutation observer\n     */\n    _observe: function () {\n      // observe html lang mutations\n      if (!this._htmlLangMutationObserver) {\n        this._htmlLangMutationObserverCallbackBindThis = \n          this._htmlLangMutationObserverCallback.bind(this);\n        this._htmlLangMutationObserver =\n          new MutationObserver(this._htmlLangMutationObserverCallbackBindThis);\n      }\n      this._htmlLangMutationObserver.observe(html, { attributes: true });\n    },\n\n    /**\n     * Disconnect html.lang mutation observer\n     */\n    _disconnect: function () {\n      if (this._htmlLangMutationObserver) {\n        this._htmlLangMutationObserver.disconnect();\n      }\n    }\n  });\n  }\n  if ((!window.HTMLImports || HTMLImports.hasNative || HTMLImports.useNative)) {\n    registerI18nPreference();\n  }\n  else {\n    HTMLImports.whenReady(registerI18nPreference);\n  }\n})(document);\n(function () {\n  // shared data\n  var sharedData = {};\n\n  // imperative synchronous registration of the template for Polymer 2.x\n  var template = ((!window.HTMLImports || HTMLImports.hasNative || HTMLImports.useNative) ? document.currentScript : (document._currentScript || document.currentScript))\n    .ownerDocument.querySelector('template#i18n-attr-repo');\n  var domModule = document.createElement('dom-module');\n  domModule.appendChild(template);\n  domModule.register('i18n-attr-repo');\n  window.BehaviorsStore = window.BehaviorsStore || {};\n  // Polymer function for iron-component-page documentation\n  var Polymer = function (proto) {\n    BehaviorsStore._I18nAttrRepo = proto;\n    BehaviorsStore._I18nAttrRepo._created();\n    return window.Polymer(proto);\n  };\n\n/*\n`<i18n-attr-repo>` maintains a list of attributes targeted for UI localization.  \nIt judges whether a specific attribute of an element requires localization or not. \n\n    var attrRepository = \n      document.createElement('i18n-attr-repo');\n\n    attrRepository.registerLocalizableAttributes(\n      'custom-element',\n      Polymer.DomModule.import('custom-element', 'template')\n    );\n    attrRepository.isLocalizableAttribute(inputElement, 'placeholder');\n\n### Interactions with `BehaviorsStore.I18nBehavior`\n\nThe element is not meant for DOM attachment. The object is\na singleton object dedicated for `BehaviorsStore.I18nBehavior`.\n`I18nBehavior` interacts with the localizable attributes repository in these 3 ways.\n\n### 1) Construct the repository for the standard elements from its own static template at the object creation.\n\n```\n    // i18n-behavior.html\n    var attrRepository = \n      document.createElement('i18n-attr-repo');\n```\n\nPre-defined I18N-target attributes in the static template of `i18n-attr-repo`:\n\n```\n    <dom-module id=\"i18n-attr-repo\">\n      <template>\n        <template id=\"standard\">\n          <input placeholder>\n          <any-elements title aria-label=\"$\" aria-valuetext=\"$\"></any-elements>\n\n          <paper-input label error-message placeholder></paper-input>\n          <paper-textarea label error-message placeholder></paper-textarea>\n          <paper-dropdown-menu label></paper-dropdown-menu>\n          <paper-toast text></paper-toast>\n          <google-chart options cols rows data></google-chart>\n          <google-signin label-signin label-signout label-additional></google-signin>\n          <platinum-push-messaging title message></platinum-push-messaging>\n\n          <json-data any-attributes></json-data>\n        </template>\n      </template>\n    </dom-module>\n```\n\nThis static list is also referenced by [`gulp-i18n-preprocess`](https://github.com/t2ym/gulp-i18n-preprocess) filter for\nbuild-time automatic I18N of hard-coded string attributes.\n\n### 2) Register I18N-target attributes of custom elements from a template with id=\"custom\" in its light DOM.\n\nI18N-target attributes for custom elements without I18nBehavior can be registered to the respository by this method. \n\nExample I18N-target attributes in a static template in the light DOM of `i18n-attr-repo`:\n\n```\n    <i18n-attr-repo>\n      <template id=\"custom\">\n        <shop-md-decorator error-message=\"$\"></shop-md-decorator>\n        <input value=\"type=submit|button\">\n        <my-element i18n-target-attr=\"attr=value,boolean-attr,!boolean-attr\"></my-element>\n        <my-element i18n-target-attr=\"attr1=value1,attr2=value2,type-name\"></my-element>\n        <my-element i18n-target-attr=\"boolean-attr=\"></my-element>\n        <my-element i18n-target-attr=\"type-name2\"></my-element>\n      </template>\n    </i18n-attr-repo>\n```\n\nThis list is also referenced by [`gulp-i18n-preprocess`](https://github.com/t2ym/gulp-i18n-preprocess) filter for\nbuild-time automatic I18N of hard-coded string attributes.\n\nNote: Type name feature is currently ineffective and reserved for further expansion of the attribute I18N features.\n\n### 3) Register localizable attributes of the newly registered elements from the `text-attr` attribute of the element's template.\n\n```\n    // i18n-behavior.html, scanning custom-element template\n    var id = 'custom-element';\n    attrRepository.registerLocalizableAttributes(\n      id, \n      Polymer.DomModule.import(id, 'template')\n    );\n```\n```\n    // custom-element.html\n    <dom-module id=\"custom-element\">\n      <template text-attr=\"localizable-attr1 localizable-attr2\">\n        <span>{{localizableAttr1}}</span>\n        <span>{{localizableAttr2}}</span>\n      </template>\n      <script>\n        Polymer({\n          is: 'custom-element',\n          behaviors: [ BehaviorsStore.I18nBehavior ],\n          properties: {\n            localizableAttr1: {\n              type: String\n            },\n            localizableAttr2: {\n              type: String\n            }\n          }\n        });\n      </ script>\n    </dom-module>\n```\n\n`text-attr` attributes are also traversed for build-time automatic I18N of \nhard-coded UI string attributes by [`gulp-i18n-preprocess`](https://github.com/t2ym/gulp-i18n-preprocess) filter.\n\n### 4) Judge localizability of attributes for the local DOM elements of the newly registered element.\n\n```\n    // i18n-behavior.html, scanning custom-element-user template\n    var element; // target element\n    var attr;\n    if (attrRepository.isLocalizableAttribute(element, attr.name)) {\n      // make localizalbe-attr1 localizable\n    }\n```\n```\n    // custom-element-user.html\n    <dom-module id=\"custom-element-user\">\n      <template>\n        <custom-element id=\"custom\"\n                        localizable-attr1=\"UI Text Label 1\"\n                        localizable-attr2=\"UI Text Label 2\">\n        </custom-element>\n      </template>\n      <script>\n        Polymer({\n          is: 'custom-element-user',\n          behaviors: [ BehaviorsStore.I18nBehavior ]\n        });\n      </ script>\n    </dom-module>\n```\n```\n    // template for custom-element-user after localization binding\n    <template>\n      <custom-element id=\"custom\"\n                      localizable-attr1=\"{{model.custom.localizable-attr1}}\"\n                      localizable-attr2=\"{{model.custom.localizable-attr2}}\">\n      </custom-element>\n    </template>\n```\n```\n    // extracted localizable texts in custom-element-user element\n    this.model = {\n      \"custom\": {\n        \"localizable-attr1\": \"UI Text Label 1\",\n        \"localizable-attr2\": \"UI Text Label 2\"\n      }\n    }\n```\n\nSince dependent elements should be registered prior to a custom element being registered,\nthe repository can always maintain the complete list of localizable attributes for registered custom elements.\n\n- - -\n\n### Note\n\nThe described processes above are for debug builds with runtime localization traversal of templates\nby `I18nBehavior`.\n\nFor production builds, the build system can perform the same processes at build time so that \n`I18nBehavior` at clients can skip runtime traversal of templates.\n\n- - -\n\n### TODO\n\nHandle and judge JSON object attributes.\n\n@group I18nBehavior\n@element i18n-attr-repo\n@hero hero.svg\n@demo demo/index.html\n*/\n  Polymer({\n    is: 'i18n-attr-repo',\n\n    created: function () {\n      this.data = sharedData;\n\n      var customAttributes = window.Polymer.dom(this).querySelector('template#custom');\n      // traverse custom attributes repository\n      if (customAttributes && !this.hasAttribute('processed')) {\n        this._traverseTemplateTree(customAttributes._content || customAttributes.content);\n        this.setAttribute('processed', '');\n      }\n\n      this._created();\n    },\n\n    _created: function () {\n      this.data = sharedData;\n\n      if (this.data.__ready__) {\n        return; // traverse standard attributes only once\n      }\n      this.data.__ready__ = true;\n      var standardTemplate;\n      if (!this.$) {\n        var t = window.Polymer.DomModule.import(this.is, 'template');\n        standardTemplate = (t._content || t.content).querySelector('template#standard');\n      }\n      else {\n        standardTemplate = this.$.standard;\n      }\n      this._traverseTemplateTree(standardTemplate._content || standardTemplate.content);\n    },\n\n    /**\n     * Judge if a specific attribute of an element requires localization.\n     *\n     * @param {HTMLElement} element Target element.\n     * @param {string} attr Target attribute name.\n     * @return {string or boolean} true - property, '$' - attribute, false - not targeted, 'type-name' - type name\n     */\n    isLocalizableAttribute: function (element, attr) {\n      var tagName = element.tagName.toLowerCase();\n      if (!this.data) {\n        this._created();\n        this.data = sharedData;\n      }\n      attr = attr.replace(/\\$$/, '');\n      if (this.data['any-elements'] &&\n          this.data['any-elements'][attr]) {\n        return this.data['any-elements'][attr];\n      }\n      else if (this.data[tagName]) {\n        return this.data[tagName]['any-attributes'] ||\n               this._getType(element, this.data[tagName][attr]);\n      }\n      else {\n        return false;\n      }\n    },\n\n    /**\n     * Get the type name or '$' for a specific attribute of an element from the attributes repository\n     *\n     * @param {HTMLElement} element Target element.\n     * @param {object} value this.data[tagName][attr]\n     * @return {string or boolean} true - property, '$' - attribute, false - not targeted, 'type-name' - type name\n     */\n    _getType: function (element, value) {\n      var selector;\n      var result;\n      if (typeof value === 'object') {\n        for (selector in value) {\n          if (selector) {\n            if (this._matchAttribute(element, selector)) {\n              result = this._getType(element, value[selector]);\n              if (result) {\n                return result;\n              }\n            }\n          }\n        }\n        if (value['']) {\n          if (this._matchAttribute(element, '')) {\n            result = this._getType(element, value['']);\n            if (result) {\n              return result;\n            }\n          }\n        }\n        return false;\n      }\n      else {\n        return value;\n      }\n    },\n\n    /**\n     * Get the type name or '$' for a specific attribute of an element from the attributes repository\n     *\n     * Format for selectors:\n     *  - `attr=value` - Value of `attr` matches Regex `^value$`\n     *  - `!boolean-attr` - Boolean attribute does not exist\n     *  - `boolean-attr` - Boolean attribute exists with empty value\n     *  - empty string `''` - Always matches\n     *\n     * @param {HTMLElement} element Target element.\n     * @param {string} selector Matching condition for target attribute.\n     * @return {boolean} true - matching, false - not matching\n     */\n    _matchAttribute: function (element, selector) {\n      var value;\n      var match;\n      // default ''\n      if (selector === '') {\n        return true;\n      }\n      // attr=value Regex ^value$\n      match = selector.match(/^([^!=]*)=(.*)$/);\n      if (match) {\n        if (element.hasAttribute(match[1])) {\n          value = element.getAttribute(match[1]);\n          return !!value.match(new RegExp('^' + match[2] + '$'));\n        }\n        else {\n          return false;\n        }\n      }\n      // !boolean-attr\n      match = selector.match(/^!([^!=]*)$/);\n      if (match) {\n        return !element.hasAttribute(match[1]);\n      }\n      // boolean-attr or empty-attr\n      match = selector.match(/^([^!=]*)$/);\n      if (match) {\n        if (element.hasAttribute(match[1])) {\n          value = element.getAttribute(match[1]);\n          return !value;\n        }\n        else {\n          return false;\n        }\n      }\n      // no matching\n      return false;\n    },\n\n    /**\n     * Comparator for attribute selectors\n     *\n     * @param {string} s1 selector 1\n     * @param {string} s2 selector 2\n     * @return {number} comparison result as -1, 0, or 1\n     */\n    _compareSelectors: function (s1, s2) {\n      var name1 = s1.replace(/^!/, '').replace(/=.*$/, '').toLowerCase();\n      var name2 = s2.replace(/^!/, '').replace(/=.*$/, '').toLowerCase();\n      return name1.localeCompare(name2);\n    },\n\n    /**\n     * Add a new localizable attribute of an element to the repository.\n     *\n     * Format for selector values for defining I18N-target attributes:\n     *   - `attr1=value1,attr2=value2,boolean-attr,!boolean-attr` - Attribute value matching condition for property\n     *   - `attr1=value1,attr2=value2,$` - Attribute value matching condition for attribute\n     *   - `boolean-attr=` - Boolean attribute condition\n     *   - `attr1=value1,type` - Attribute value condition with type name (type is currently ineffective)\n     *\n     * @param {string} element Target element name.\n     * @param {string} attr Target attribute name.\n     * @param {?*} value Selector value\n     */\n    setLocalizableAttribute: function (element, attr, value) {\n      this.data[element] = this.data[element] || {};\n      var cursor = this.data[element];\n      var prev = attr;\n      var type = true;\n      var selectors = [];\n\n      if (typeof value === 'string' && value) {\n        selectors = value.split(',');\n        if (selectors[selectors.length - 1].match(/^[^!=][^=]*$/)) {\n          type = selectors.pop();\n        }\n        selectors = selectors.map(function (selector) {\n          return selector.replace(/=$/, '');\n        });\n        selectors.sort(this._compareSelectors);\n        while (selectors[0] === '') {\n          selectors.shift();\n        }\n      }\n\n      selectors.forEach(function (selector, index) {\n        if (typeof cursor[prev] !== 'object') {\n          cursor[prev] = cursor[prev] ? { '': cursor[prev] } : {};\n        }\n        cursor[prev][selector] = cursor[prev][selector] || {};\n        cursor = cursor[prev];\n        prev = selector;\n      });\n\n      if (typeof cursor[prev] === 'object' &&\n          cursor[prev] &&\n          Object.keys(cursor[prev]).length) {\n        cursor = cursor[prev];\n        prev = '';\n      }\n      cursor[prev] = type;\n    },\n\n    /**\n     * Pick up localizable attributes description for a custom element \n     * from `text-attr` attribute and register them to the repository.\n     * The `text-attr` attribute is used in the template of a custom\n     * element to declare localizable attributes of its own element.\n     *\n     * Format:\n     *\n     *  Type 1: `<template text-attr=\"localizable-attr1 attr2\">`\n     *\n     *  Type 2: `<template text-attr localizable-attr1 attr2=\"value2\">`\n     *\n     * @param {string} element Target element name.\n     * @param {HTMLTemplateElement} template Template of the element.\n     */\n    registerLocalizableAttributes: function (element, template) {\n      if (!this.data) {\n        this._created();\n        this.data = sharedData;\n      }\n      if (!element) {\n        element = template.getAttribute('id');\n      }\n      if (element) {\n        var attrs = (template.getAttribute('text-attr') || '').split(' ');\n        var textAttr = false;\n        attrs.forEach(function (attr) {\n          if (attr) {\n            this.setLocalizableAttribute(element, attr, true);\n          }\n        }, this);\n        Array.prototype.forEach.call(template.attributes, function (attr) {\n          switch (attr.name) {\n          case 'id':\n          case 'lang':\n          case 'localizable-text':\n          case 'assetpath':\n            break;\n          case 'text-attr':\n            textAttr = true;\n            break;\n          default:\n            if (textAttr) {\n              this.setLocalizableAttribute(element, attr.name, attr.value);\n            }\n            break;\n          }\n        }.bind(this));\n      }\n    },\n\n    /**\n     * Traverse the template of `i18n-attr-repo` in the ready() callback\n     * and construct the localizable attributes repository object. The method calls itself\n     * recursively for traversal.\n     *\n     * @param {HTMLElement} node The target HTML node for traversing.\n     */    \n    _traverseTemplateTree: function (node) {\n      var name;\n      if (node.nodeType === node.ELEMENT_NODE) {\n        name = node.nodeName.toLowerCase();\n        Array.prototype.forEach.call(node.attributes, function (attribute) {\n          this.data[name] = this.data[name] || {};\n          this.setLocalizableAttribute(name, attribute.name, attribute.value);\n        }, this);\n      }\n      if (node.childNodes.length > 0) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          this._traverseTemplateTree(node.childNodes[i]);\n        }\n      }\n    }\n  });\n})();\n/*!\n * @license deepcopy.js Copyright(c) 2013 sasa+1\n * https://github.com/sasaplus1/deepcopy.js\n * Released under the MIT license.\n */\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.deepcopy=e():t.deepcopy=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p=\"\",e(0)}([function(t,e,n){\"use strict\";t.exports=n(3)},function(t,e){\"use strict\";function n(t,e){if(\"[object Array]\"!==o.call(t))throw new TypeError(\"array must be an Array\");var n=void 0,r=void 0,u=void 0;for(n=0,r=t.length;r>n;++n)if(u=t[n],u===e||u!==u&&e!==e)return n;return-1}e.__esModule=!0;var o=Object.prototype.toString,r=\"undefined\"!=typeof Buffer?function(t){return Buffer.isBuffer(t)}:function(){return!1},u=\"function\"==typeof Object.keys?function(t){return Object.keys(t)}:function(t){var e=typeof t;if(null===t||\"function\"!==e&&\"object\"!==e)throw new TypeError(\"obj must be an Object\");var n=[],o=void 0;for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.push(o);return n},i=\"function\"==typeof Symbol?function(t){return Object.getOwnPropertySymbols(t)}:function(){return[]};e.getKeys=u,e.getSymbols=i,e.indexOf=n,e.isBuffer=r},function(t,e,n){\"use strict\";function o(t,e){var n=u(t);return null!==n?n:r(t,e)}function r(t,e){if(\"function\"!=typeof e)throw new TypeError(\"customizer is must be a Function\");if(\"function\"==typeof t){var n=String(t);return/^\\s*function\\s*\\S*\\([^\\)]*\\)\\s*{\\s*\\[native code\\]\\s*}/.test(n)?t:new Function(\"return \"+String(n))()}var o=c.call(t);if(\"[object Array]\"===o)return[];if(\"[object Object]\"===o&&t.constructor===Object)return{};if(\"[object Date]\"===o)return new Date(t.getTime());if(\"[object RegExp]\"===o){var r=String(t),u=r.lastIndexOf(\"/\");return new RegExp(r.slice(1,u),r.slice(u+1))}if((0,i.isBuffer)(t)){var f=new Buffer(t.length);return t.copy(f),f}var l=e(t);return void 0!==l?l:null}function u(t){var e=typeof t;return null!==t&&\"object\"!==e&&\"function\"!==e?t:null}e.__esModule=!0,e.copyValue=e.copyCollection=e.copy=void 0;var i=n(1),c=Object.prototype.toString;e.copy=o,e.copyCollection=r,e.copyValue=u},function(t,e,n){\"use strict\";function o(t){}function r(t){var e=arguments.length<=1||void 0===arguments[1]?o:arguments[1];if(null===t)return null;var n=(0,i.copyValue)(t);if(null!==n)return n;var r=(0,i.copyCollection)(t,e),c=null!==r?r:t,f=[t],l=[c];return u(t,e,c,f,l)}function u(t,e,n,o,r){if(null===t)return null;var f=(0,i.copyValue)(t);if(null!==f)return f;var l=(0,c.getKeys)(t).concat((0,c.getSymbols)(t)),p=void 0,s=void 0,a=void 0,y=void 0,d=void 0,v=void 0,b=void 0,j=void 0;for(p=0,s=l.length;s>p;++p)a=l[p],y=t[a],d=(0,c.indexOf)(o,y),v=void 0,b=void 0,j=void 0,-1===d?(v=(0,i.copy)(y,e),b=null!==v?v:y,null!==y&&/^(?:function|object)$/.test(typeof y)&&(o.push(y),r.push(b))):j=r[d],n[a]=j||u(y,e,b,o,r);return n}e.__esModule=!0;var i=n(2),c=n(1);e[\"default\"]=r,t.exports=e[\"default\"]}])});\n/* jshint -W100 */\n(function(document) {\n  'use strict';\n\n  var html = document.querySelector('html');\n  if (window.ShadowDOMPolyfill) {\n    // Fix #38. Add reflectToAttribute effect on html.lang property\n    // for supplementing Shadow DOM MutationObserver polyfill\n    Object.defineProperty(html, 'lang', {\n      get: function () {\n        return this.getAttribute('lang');\n      },\n      set: function (value) {\n        this.setAttribute('lang', value);\n      }\n    });\n  }\n\n  // Safari 7 predefines non-configurable standard properties\n  // Note: They become configurable with ShadowDOMPolyfill, which wraps them.\n  var isStandardPropertyConfigurable = (function () {\n    var langPropertyDescriptor = Object.getOwnPropertyDescriptor(document.createElement('span'), 'lang');\n    return !langPropertyDescriptor || langPropertyDescriptor.configurable;\n  })();\n  // Polymer 1.4.0 on Safari 7 inserts extra unexpected whitepace node at the beginning of template\n  var extraWhiteSpaceNode = !isStandardPropertyConfigurable;\n  if (Polymer.ElementMixin) {\n    isStandardPropertyConfigurable = false;\n  }\n\n  // app global bundle storage\n  var bundles = { '': {} }; // with an empty default bundle\n  // app global default language\n  var defaultLang = html.hasAttribute('lang') ? html.getAttribute('lang') : '';\n  // shared fetching instances for bundles\n  var bundleFetchingInstances = {};\n\n  // path for start URL\n  var startUrl = (function () {\n    var path = window.location.pathname;\n    if (document.querySelector('meta[name=app-root]') &&\n        document.querySelector('meta[name=app-root]').getAttribute('content')) {\n      // <meta name=\"app-root\" content=\"/\"> to customize application root\n      path = document.querySelector('meta[name=app-root]').getAttribute('content');\n    }\n    else if (document.querySelector('link[rel=manifest]') &&\n             document.querySelector('link[rel=manifest]').getAttribute('href') &&\n             document.querySelector('link[rel=manifest]').getAttribute('href').match(/^\\//)) {\n      // assume manifest is located at the application root folder\n      path = document.querySelector('link[rel=manifest]').getAttribute('href');\n    }\n    return path.replace(/\\/[^\\/]*$/,'/');\n  })();\n\n  // path for locales from <html locales-path=\"locales\">\n  var localesPath = html.hasAttribute('locales-path') ? \n                      html.getAttribute('locales-path') : 'locales';\n\n  // Support ShadowDOM V1 on Polymer 2.x\n  var paramAttribute = Polymer.ElementMixin ? 'slot' : 'param';\n\n  var attributesRepository = ((!window.HTMLImports || HTMLImports.hasNative || HTMLImports.useNative) ? document.currentScript : (document._currentScript || document.currentScript))\n    .ownerDocument.querySelector('i18n-attr-repo');\n\n  // set up userPreference\n  var userPreference = document.querySelector('i18n-preference');\n  if (!userPreference) {\n    userPreference = document.createElement('i18n-preference');\n    // append to body\n    document.querySelector('body').appendChild(userPreference);\n  }\n\n  // debug log when <html debug> attribute exists\n  var debuglog = html.hasAttribute('debug') ?\n    function (arg) {\n      console.log(arg);\n    } :\n    function () {};\n\n  window.BehaviorsStore = window.BehaviorsStore || {};\n  /**\n   * Apply `BehaviorsStore.I18nControllerBehavior` to manipulate internal variables for I18N\n   *\n   * Note: This behavior is not for normal custom elements to apply I18N. UI is not expected.\n   */\n  BehaviorsStore.I18nControllerBehavior = {\n    properties: {\n\n      /**\n       * Flag for detection of `I18nControllerBehavior`\n       *\n       * `true` if I18nControllerBehavior is applied\n       *\n       * Note: Module-specific JSON resources are NOT fetched for `I18nControllerBehavior`\n       */\n      isI18nController: {\n        type: Boolean,\n        value: true,\n        readOnly: true\n      },\n\n      /**\n       * HTML element object for the current document\n       */\n      html: {\n        type: Object,\n        value: html\n      },\n\n      /**\n       * Master bundles object for storing all the localized and default resources\n       */\n      masterBundles: {\n        type: Object,\n        value: bundles\n      },\n\n      /**\n       * Default lang for the document, i.e., the initial value of `<html lang>` attribute\n       */\n      defaultLang: {\n        type: String,\n        value: defaultLang,\n        readOnly: true\n      },\n\n      /**\n       * List of elements which are fetching bundles\n       */\n      bundleFetchingInstances: {\n        type: Object,\n        value: bundleFetchingInstances\n      },\n\n      /**\n       * Root URL path of the application ends with '/' to fetch bundles\n       */\n      startUrl: {\n        type: String,\n        value: startUrl,\n        readOnly: true\n      },\n\n      /**\n       * Path for locales\n       *\n       * Default value is `'locales'`\n       */\n      localesPath: {\n        type: String,\n        value: localesPath,\n        readOnly: true\n      },\n\n      /**\n       * <i18n-attr-repo> element to store attributes repository\n       */\n      attributesRepository: {\n        type: Object,\n        value: attributesRepository,\n        readOnly: true\n      },\n\n      /**\n       * <i18n-preference> element\n       */\n      userPreference: {\n        type: Object,\n        value: userPreference,\n        readOnly: true\n      }\n    }\n  };\n  /**\n   * Apply `BehaviorsStore.I18nBehavior` to implement localizable elements.\n   *\n   *     <dom-module id=\"custom-element\">\n   *       <template>\n   *         <span>Hard-coded UI texts are automatically made localizable</span>\n   *       </template>\n   *       <script>\n   *         Polymer({\n   *           is: 'custom-element',\n   *           behaviors: [ \n   *             BehaviorsStore.I18nBehavior  // Add this behavior\n   *           ]\n   *         });\n   *       </script>\n   *     </dom-module>\n   *\n   * `I18nBehavior` automatically extracts UI texts from `template` and \n   * binds them to localizable variables in `this.text` object.\n   *\n   * According to the `lang` attribute value, `this.text`, and thus the bound UI texts,\n   * dynamically mutates by loading localized values from a JSON file in the `locales` directory.\n   * By default, `lang` attribute values of all the localizable elements with `I18nBehavior` are\n   * automatically updated according to `<html lang>` attribute value.\n   *\n   * The UI text externalization can be processed at build time as well by `gulp-*` task\n   * so that `I18nBehavior` can immediately recognize the extracted texts in JSON and \n   * skip run-time externalization.\n   *\n   * Run-time externalization is suitable for development and debugging \n   * since the code changes are immediately reflected at reloading without build-time preprocesses.\n   * In contrast, build-time externalization is suitable for production builds \n   * since it eliminates run-time externalization overheads.\n   * \n   * ### Steps to localize a custom element\n   *\n   * 1. [JavaScript] Add `BehaviorsStore.I18nBehavior` to `behaviors`\n   * 1. [gulp] Add `gulp-*` filter for `custom-element.html` and generate `custom-element.json`\n   * 1. [locales] Put `custom-element.lang.json` in `locales` directory\n   * 1. [translation] Translate `locales/custom-element.lang.json`\n   *\n   * - - -\n   *\n   * ### Directory structure of bundle files\n   *\n   * Normal bundles (`/element-root/locales/element-name.*.json`) for elements\n   * are stored under their root directories.\n   *\n   * Shared bundles (`/locales/bundle.*.json`) are generated at build time \n   * by merging all the targeted bundles of the localizable elements. \n   *\n   * Once the shared bundles are loaded, there should be no need to search for \n   * normal bundles per element unless the element is intentionally excluded \n   * from the shared bundles.\n   *\n   * ```\n   *      /bundle.json \n   *      /locales/bundle.ja.json\n   *              /bundle.fr.json\n   *              /bundle.zh-Hans.json\n   *\n   *      /elements/my-list/my-list.json\n   *                       /locales/my-list.ja.json\n   *                               /my-list.zh-Hans.json\n   *\n   *               /google-chart-demo/google-chart-demo.json\n   *                                 /locales/google-chart-demo.ja.json\n   *                                         /google-chart-demo.fr.json\n   * ```\n   *\n   * - - -\n   *\n   * ### Localizable `<template is=\"i18n-dom-bind\" id=\"app\">` element\n   *\n   * `<template is=\"i18n-dom-bind\">` template element extends \n   * `<template is=\"dom-bind\">` template element with all the capabilities of \n   * `I18nBehavior`.  \n   *\n   * The `id` attribute value is used for naming bundle files instead of the element name.\n   * \n   * The bundle files are stored at the locales directory under the application root. \n   *\n   * ```\n   *      /app.json\n   *      /locales/app.ja.json\n   *              /app.fr.json\n   *              /app.zh-Hans.json\n   * ```\n   *\n   * - - -\n   *\n   * ### TODOs\n   *\n   * - Support user locale preference per user\n   *\n   * @polymerBehavior BehaviorsStore.I18nBehavior\n   * @group I18nBehavior\n   * @hero hero.svg\n   * @demo demo/index.html\n   */\n  BehaviorsStore.I18nBehavior = {\n\n    /**\n     * Fired when the text message bundle object (`this.text`) is updated after `this.lang` is changed.\n     *\n     * @event lang-updated\n     */\n\n    /**\n     * Fired when a shared bundle is fetched.\n     *\n     * @event bundle-fetched\n     */\n\n    properties: {\n      /**\n       * The locale of the element.\n       * The default value is copied from `<html lang>` attribute of the current page.\n       * If `<html lang>` is not specified, `''` is set to use the template default language.\n       *\n       * The value is synchronized with `<html lang>` attribute of the current page by default.\n       *\n       * ### Note:\n       *  - The value may not reflect the current UI locale until the localized texts are loaded.\n       */\n      lang: {\n        type: String,\n        value: defaultLang,\n        reflectToAttribute: true,\n        observer: '_langChanged'\n      },\n\n      /**\n       * Text message bundle object for the current locale.\n       * The object is shared among all the instances of the same element.\n       * The value is updated when `lang-updated` event is fired.\n       */\n      text: {\n        type: Object,\n        computed: '_getBundle(lang)'\n      },\n\n      /**\n       * Data model bundle object for the current locale.\n       * The data are bound to localizable attribute values in the element template.\n       * The object is cloned from `this.text.model` per instance.\n       * The value is NOT automatically updated in sync with `this.text`.\n       * \n       * How to manually update the model object when `lang-updated` event is fired:\n       * ```\n       *     this.model = deepcopy(this.text.model);\n       * ```\n       */\n      model: {\n        type: Object,\n        notify: true\n      },\n\n      /**\n       * The locale of the hard-coded texts in the element's template.\n       * The read-only value can be specified by the `lang` attribute of the element's `template`.\n       * The default value is 'en' if not specified in the `template` element.\n       *\n       * ```\n       *  <dom-module id=\"custom-element\">\n       *    <template lang=\"en\">\n       *      <span>Hard-coded text in English</span>\n       *    </template>\n       *  <dom-module>\n       * ```\n       */\n      templateDefaultLang: {\n        type: String,\n        value: 'en'\n      },\n\n      /**\n       * The effective locale of the element.\n       * The value is updated when the localized texts are loaded and `lang-updated` event is fired.\n       */\n      effectiveLang: {\n        type: String\n      },\n\n      /**\n       * Boolean flag to synchronize with the value of  `<html lang>` attribute.\n       */\n      observeHtmlLang: {\n        type: Boolean,\n        value: true,\n        observer: '_observeHtmlLangChanged'\n      }\n    },\n\n    listeners: {\n      'lang-updated': '_updateEffectiveLang'\n    },\n\n    /* \n       bundles = \n       {\n        \"\": {},\n        \"en\": {\n          \"my-list\": {\n            \"p_2\": \"You now have:\",\n            \"model\": {\n              \"list\": {\n                \"items\": [\n                  \"item 1\", \"item 2\"\n                ]\n              }\n            }\n          },\n          \"google-chart-demo\": {\n            \"simple-chart-desc\": [\n              \"template {1} string\", \"param 1\"\n            ]\n            \"model\": {\n              \"simple-chart\": {\n                \"options\": { \"title\": \"Simple Chart\" },\n                \"rows\": []\n              }\n            }\n          }\n        },\n        \"ja\": {\n          \"my-list\": {},\n          \"google-chart-demo\": {}\n        }\n      }\n\n      bundles[lang]\n      /bundle.json - fallback\n      /locales/bundle.en.json\n              /bundle.ja.json\n              /bundle.fr.json\n              /bundle.zh-Hans.json\n\n      bundles[lang][is]\n      /elements/my-list/my-list.json - fallback\n                       /locales/my-list.en.json\n                               /my-list.ja.json\n                               /my-list.zh-Hans.json\n\n               /google-chart-demo/google-chart-demo.json - fallback\n                                 /locales/google-chart-demo.en.json\n                                         /google-chart-demo.ja.json\n                                         /google-chart-demo.zh-Hans.json\n\n      app/elements/my-list/my-list.json\n                          /locales/my-list.fr.json\n                                  /my-list.ja.json\n                                  /my-list.zh-Hans.json\n\n      dist/elements/my-list/my-list.json\n                           /locales/my-list.fr.json\n                                   /my-list.ja.json\n                                   /my-list.zh-Hans.json\n\n    */\n\n\n    /**\n     * The backend logic for `this.text` object.\n     *\n     * @param {string} lang Locale for the text message bundle.\n     * @return {Object} Text message bundle for the locale.\n     */\n    _getBundle: function (lang) {\n      //console.log('_getBundle called for ' + this.is + ' with lang = ' + lang);\n\n      var resolved;\n      var id = this.is === 'i18n-dom-bind' || (Polymer.ElementMixin && this.constructor.is === 'i18n-dom-bind') ? this.id : this.is;\n\n      if (lang && lang.length > 0) {\n        var fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n        var tryLang;\n        while ((tryLang = fallbackLanguageList.shift())) {\n          if (!bundles[tryLang]) {\n            // set up an empty bundle for the language if missing\n            bundles[tryLang] = {};\n          }\n          if (bundles[tryLang][id]) {\n            // bundle found\n            resolved = bundles[tryLang][id];\n            break;\n          }\n        }\n      }\n      else {\n        // lang is not specified\n        lang = '';\n        resolved = bundles[lang][id];\n      }\n\n      // Fallback priorities: last > app default > element default > fallback > {}\n      // TODO: need more research on fallback priorities\n      if (!resolved) { \n        if (this._fetchStatus && bundles[this._fetchStatus.lastLang] && bundles[this._fetchStatus.lastLang][id]) {\n          // old bundle for now (no changes should be shown)\n          resolved = bundles[this._fetchStatus.lastLang][id]; \n        }\n        else if (defaultLang && defaultLang.length > 0 &&\n                 bundles[defaultLang] && bundles[defaultLang][id]) {\n          // app default language for now\n          resolved = bundles[defaultLang][id]; \n        }\n        else if (this.templateDefaultLang && this.templateDefaultLang.length > 0 &&\n                 bundles[this.templateDefaultLang] && bundles[this.templateDefaultLang][id]) {\n          // element default language for now\n          resolved = bundles[this.templateDefaultLang][id]; \n        }\n        /* no more fallback should happen */\n        /* istanbul ignore else */\n        else if (bundles[''][id]) {\n          // fallback language for now (this should be the same as element default)\n          resolved = bundles[''][id];\n        }\n        else {\n          // give up providing a bundle (this should not happen)\n          resolved = {};\n        }\n      }\n\n      return resolved;\n    },\n\n    /**\n     * Enumerate fallback locales for the target locale.\n     * \n     * Subset implementation of BCP47 (https://tools.ietf.org/html/bcp47).\n     *\n     * ### Examples:\n     *\n     *| Target Locale | Fallback 1 | Fallback 2 | Fallback 3 |\n     *|:--------------|:-----------|:-----------|:-----------|\n     *| ru            | N/A        | N/A        | N/A        |\n     *| en-GB         | en         | N/A        | N/A        |\n     *| en-Latn-GB    | en-GB      | en-Latn    | en         |\n     *| fr-CA         | fr         | N/A        | N/A        |\n     *| zh-Hans-CN    | zh-Hans    | zh         | N/A        |\n     *| zh-CN         | zh-Hans    | zh         | N/A        |\n     *| zh-TW         | zh-Hant    | zh         | N/A        |\n     *\n     * #### Note:\n     *\n     * For zh language, the script Hans or Hant is supplied as its default script when a country/region code is supplied.\n     *\n     * @param {string} lang Target locale.\n     * @return {Array} List of fallback locales including the target locale at the index 0.\n     */\n    _enumerateFallbackLanguages: function (lang) {\n      var result = [];\n      var parts;\n      var match;\n      var isExtLangCode = 0;\n      var extLangCode;\n      var isScriptCode = 0;\n      var scriptCode;\n      var isCountryCode = 0;\n      var countryCode;\n      var n;\n      if (!lang || lang.length === 0) {\n        result.push('');\n      }\n      else {\n        parts = lang.split(/[-_]/);\n        // normalize ISO-639-1 language codes\n        if (parts.length > 0 &&\n            parts[0].match(/^[A-Za-z]{2,3}$/)) {\n          // language codes have to be lowercased\n          // e.g. JA -> ja, FR -> fr\n          // TODO: normalize 3-letter codes to 2-letter codes\n          parts[0] = parts[0].toLowerCase();\n        }\n        // normalize ISO-639-3 extension language codes\n        if (parts.length >= 2 &&\n            parts[1].match(/^[A-Za-z]{3}$/) &&\n            !parts[1].match(/^[Cc][Hh][SsTt]$/)) { // exclude CHS,CHT\n          // extension language codes have to be lowercased\n          // e.g. YUE -> yue\n          isExtLangCode = 1;\n          extLangCode = parts[1] = parts[1].toLowerCase();\n        }\n        // normalize ISO-15924 script codes\n        if (parts.length >= isExtLangCode + 2 &&\n            (match = parts[isExtLangCode + 1].match(/^([A-Za-z])([A-Za-z]{3})$/))) {\n          // script codes have to be capitalized only at the first character\n          // e.g. HANs -> Hans, lAtN -> Latn\n          isScriptCode = 1;\n          scriptCode = parts[isExtLangCode + 1] = match[1].toUpperCase() + match[2].toLowerCase();\n        }\n        // normalize ISO-3166-1 country/region codes\n        if (parts.length >= isExtLangCode + isScriptCode + 2 &&\n            (match = parts[isExtLangCode + isScriptCode + 1].match(/^[A-Za-z0-9]{2,3}$/))) {\n          // country/region codes have to be capitalized\n          // e.g. cn -> CN, jP -> JP\n          isCountryCode = 1;\n          countryCode = parts[isExtLangCode + isScriptCode + 1] = match[0].toUpperCase();\n        }\n        // extensions have to be in lowercases\n        // e.g. U-cA-Buddhist -> u-ca-buddhist, X-LiNux -> x-linux\n        if (parts.length >= isExtLangCode + isScriptCode + isCountryCode + 2) {\n          for (n = isExtLangCode + isScriptCode + isCountryCode + 1; n < parts.length; n++) {\n            parts[n] = parts[n].toLowerCase();\n          }\n        }\n        // enumerate fallback languages\n        while (parts.length > 0) {\n          // normalize delimiters as -\n          // e.g. ja_JP -> ja-JP\n          result.push(parts.join('-'));\n          if (isScriptCode &&\n              isCountryCode &&\n              parts.length == isExtLangCode + isScriptCode + 2) {\n            // script code can be omitted to default\n            // e.g. en-Latn-GB -> en-GB, zh-Hans-CN -> zh-CN\n            parts.splice(isExtLangCode + isScriptCode, 1);\n            result.push(parts.join('-'));\n            parts.splice(isExtLangCode + isScriptCode, 0, scriptCode);\n          }\n          if (isExtLangCode &&\n              isCountryCode &&\n              parts.length == isExtLangCode + isScriptCode + 2) {\n            // ext lang code can be omitted to default\n            // e.g. zh-yue-Hans-CN -> zh-Hans-CN\n            parts.splice(isExtLangCode, 1);\n            result.push(parts.join('-'));\n            parts.splice(isExtLangCode, 0, extLangCode);\n          }\n          if (isExtLangCode &&\n              isScriptCode &&\n              parts.length == isExtLangCode + isScriptCode + 1) {\n            // ext lang code can be omitted to default\n            // e.g. zh-yue-Hans -> zh-Hans\n            parts.splice(isExtLangCode, 1);\n            result.push(parts.join('-'));\n            parts.splice(isExtLangCode, 0, extLangCode);\n          }\n          if (!isScriptCode &&\n              !isExtLangCode &&\n              isCountryCode &&\n              parts.length == 2) {\n            // default script code can be added in certain cases with country codes\n            // e.g. zh-CN -> zh-Hans-CN, zh-TW -> zh-Hant-TW\n            switch (result[result.length - 1]) {\n            case 'zh-CN':\n            case 'zh-CHS':\n              result.push('zh-Hans');\n              break;\n            case 'zh-TW':\n            case 'zh-SG':\n            case 'zh-HK':\n            case 'zh-CHT':\n              result.push('zh-Hant');\n              break;\n            default:\n              break;\n            }\n          }\n          parts.pop();\n        }\n      }\n      return result;\n    },\n\n    /**\n     * Get the next fallback locale for the target locale.\n     * \n     * Subset implementation of BCP47 (https://tools.ietf.org/html/bcp47).\n     *\n     * ### Examples:\n     *\n     *| Target Locale | Next Fallback |\n     *|:--------------|:--------------|\n     *| ru            | null          |\n     *| en-GB         | en            |\n     *| fr-CA         | fr            |\n     *| zh-Hans-CN    | zh-Hans       |\n     *\n     * @param {string} lang Target locale.\n     * @return {string} Next fallback locale. `null` if there are no fallback languages.\n     */\n    /*\n    _getNextFallbackLanguage: function (lang) {\n      var fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n      fallbackLanguageList.shift();\n      var nextFallbackLanguage = fallbackLanguageList.shift();\n      return nextFallbackLanguage ? nextFallbackLanguage : null;\n    },\n    */\n\n    /**\n     * MutationObserver callback of `lang` attribute for Safari 7\n     *\n     * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n     */\n    _handleLangAttributeChange: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            //console.log('_handleLangAttributeChange lang = ' + this.lang + ' oldValue = ' + mutation.oldValue +\n            //            ' typeof oldValue = ' + typeof mutation.oldValue);\n            if (!(typeof mutation.oldValue === 'object' && !mutation.oldValue) &&\n                mutation.oldValue !== this.lang) {\n              if (this._lang !== mutation.oldValue) {\n                //console.log('assigning this._lang = ' + mutation.oldValue + ' from old value');\n                this._lang = mutation.oldValue;\n              }\n              //console.log('assigning this._lang = ' + this.lang);\n              this._lang = this.lang;\n            }\n            else if (mutation.oldValue != this.lang && this._lang !== this.lang) {\n              //console.log('assigning this._lang = ' + this.lang);\n              this._lang = this.lang;\n            }\n          }\n          break;\n        default:\n          /* istanbul ignore next: mutation.type is always attributes */\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Observer of `this.lang` changes.\n     *\n     * Update `this.text` object if the text message bundle of the new `lang` is locally available.\n     *\n     * Trigger fetching of the text message bundle of the new `lang` if the bundle is not locally available.\n     *\n     * @param {string} lang New value of `lang`.\n     * @param {string} oldLang Old value of `lang`.\n     */\n    _langChanged: function (lang, oldLang) {\n      //console.log(this.id + ':_langChanged lang = ' + lang + ' oldLang = ' + oldLang);\n      var id = (this.is || this.getAttribute('is')) === 'i18n-dom-bind' ? this.id : this.is;\n      lang = lang || ''; // undefined and null are treated as default ''\n      oldLang = oldLang || '';\n      if (lang !== oldLang &&\n          bundles[oldLang] && bundles[oldLang][id]) {\n        this._fetchStatus.lastLang = oldLang;\n      }\n      if (bundles[lang] && bundles[lang][id]) {\n        // bundle available for the new language\n        if (this._fetchStatus && lang !== this._fetchStatus.ajaxLang) {\n          // reset error status\n          this._fetchStatus.error = null;\n        }\n        if (!Polymer.ElementMixin || (Polymer.ElementMixin && this.__data)) {\n          this.notifyPath('text', this._getBundle(this.lang));\n        }\n        this.effectiveLang = lang;\n        this.fire('lang-updated', { \n          lang: this.lang, \n          oldLang: oldLang, \n          lastLang: this._fetchStatus.lastLang \n        });\n      }\n      else {\n        // fetch the missing bundle\n        this._fetchLanguage(lang);\n      }\n    },\n\n    /**\n     * Called on `lang-updated` events and update `this.effectiveLang` with the value of `this.lang`.\n     */\n    _updateEffectiveLang: function (event) {\n      if (Polymer.dom(event).rootTarget === this) {\n        //console.log('_updateEffectiveLang: lang = ' + this.lang);\n        this.effectiveLang = this.lang;\n      }\n    },\n\n    /**\n     * Trigger fetching of the appropriate text message bundle of the target locale.\n     *\n     * ### Two Layers of Fallbacks:\n     *\n     * 1. Missing bundles fall back to those of their fallback locales.\n     * 1. Missing texts in the non-default bundles fall back to those in the default bundle. \n     *\n     * ### Fallback Examples:\n     *\n     *| Locale      | Bundle Status                    |\n     *|:------------|:---------------------------------|\n     *| fr-CA       | existent with sparse texts       |\n     *| fr          | existent with full texts         |\n     *| ja          | existent with some missing texts |\n     *| zh-Hans-CN  | missing                          |\n     *| zh-Hans     | existent with some missing texts |\n     *| zh          | missing                          |\n     *| en          | existent with full texts         |\n     *| ''(default) | existent with full texts         |\n     *\n     *| Target      | Fallback bundle       | Resolved locale |\n     *|:------------|:----------------------|:----------------|\n     *| en          | en                    | en              |\n     *| ja          | ja + ''(default)      | ja              |\n     *| fr-CA       | fr-CA + fr            | fr-CA           |\n     *| zh-Hans-CN  | zh-Hans + ''(default) | zh-Hans         |\n     *\n     * @param {string} lang Target locale.\n     */\n    _fetchLanguage: function (lang) {\n      if (this._fetchStatus) {\n        this._fetchStatus.fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n        this._fetchStatus.fallbackLanguageList.push('');\n        this._fetchStatus.targetLang = this._fetchStatus.fallbackLanguageList.shift();\n        this._fetchBundle(this._fetchStatus.targetLang);\n      }\n    },\n\n    /**\n     * Fetch the text message bundle of the target locale \n     * cooperatively with other instances.\n     *\n     * @param {string} lang Target locale.\n     */\n    _fetchBundle: function (lang) {\n      //console.log('_fetchBundle lang = ' + lang);\n      if (!lang || lang.length === 0) {\n        // handle empty cases\n        if (defaultLang && defaultLang.length > 0) {\n          lang = defaultLang; // app default language\n        }\n        else if (this.templateDefaultLang && this.templateDefaultLang.length > 0) {\n          lang = this.templateDefaultLang; // element default language\n        }\n        else {\n          lang = ''; // fallback default language\n        }\n      }\n\n      // set up an empty bundle if inexistent\n      bundles[lang] = bundles[lang] || {};\n      var id = this.is === 'i18n-dom-bind' || (Polymer.ElementMixin && this.constructor.is === 'i18n-dom-bind') ? this.id : this.is;\n\n      if (bundles[lang][id]) {\n        // bundle is available; no need to fetch\n        if (this._fetchStatus.targetLang === lang) {\n          // reset error status\n          this._fetchStatus.error = null;\n          if (this.lang === lang) {\n            this.notifyPath('text', this._getBundle(this.lang));\n            this.fire('lang-updated', { \n              lang: this.lang, \n              lastLang: this._fetchStatus.lastLang\n            });\n          }\n          else {\n            this.lang = lang; // trigger lang-updated event\n          }\n        }\n        else {\n          var nextFallbackLanguage = this._fetchStatus.fallbackLanguageList.shift();\n          // bundle is available; no need to fetch\n          this._fetchStatus.fetchingInstance = null;\n          if (nextFallbackLanguage) {\n            this._fetchBundle(nextFallbackLanguage);\n          }\n          else {\n            this._constructBundle(this._fetchStatus.targetLang);\n            // reset error status\n            this._fetchStatus.error = null;\n            if (this.lang === this._fetchStatus.targetLang) {\n              this.notifyPath('text', this._getBundle(this.lang));\n              this.fire('lang-updated', { \n                lang: this.lang,\n                lastLang: this._fetchStatus.lastLang\n              });\n            }\n            else {\n              this.lang = this._fetchStatus.targetLang; // trigger lang-updated event\n            }\n          }\n        }\n      }\n      else if (this._fetchStatus.fetchingInstance) {\n        if (this._fetchStatus.fetchingInstance !== this) {\n          // fetching in progress by another instance\n          // TODO: redundant addEventListener multiple times\n          this._forwardLangEventBindThis = this._forwardLangEventBindThis ||\n                                            this._forwardLangEvent.bind(this);\n          this._fetchStatus.fetchingInstance\n              .addEventListener('lang-updated', this._forwardLangEventBindThis);\n        }\n      }\n      else if (bundleFetchingInstances[lang]) {\n        // fetching bundle.lang.json in progress by an instance of another element\n        this._fetchStatus.fetchingInstance = this;\n        this._fetchStatus.ajaxLang = lang;\n        this._handleBundleFetchedBindThis = this._handleBundleFetchedBindThis ||\n                                            this._handleBundleFetched.bind(this);\n        bundleFetchingInstances[lang]\n          .addEventListener('bundle-fetched', this._handleBundleFetchedBindThis);\n        //console.log(this.is + ' addEventListener bundle-fetched');\n      }\n      else {\n        // proceed to fetch\n        this._fetchStatus.fetchingInstance = this;\n        if (!this._fetchStatus.ajax) {\n          // set up ajax client\n          this._fetchStatus.ajax = Polymer.Base.create('iron-ajax');\n          this._fetchStatus.ajax.handleAs = 'json';\n          this._fetchStatus._handleResponseBindFetchingInstance = this._handleResponse.bind(this);\n          this._fetchStatus._handleErrorBindFetchingInstance = this._handleError.bind(this);\n          this._fetchStatus.ajax.addEventListener('response', this._fetchStatus._handleResponseBindFetchingInstance);\n          this._fetchStatus.ajax.addEventListener('error', this._fetchStatus._handleErrorBindFetchingInstance);\n        }\n        else {\n          if (this._fetchStatus._handleResponseBindFetchingInstance) {\n            this._fetchStatus.ajax.removeEventListener('response', this._fetchStatus._handleResponseBindFetchingInstance);\n          }\n          if (this._fetchStatus._handleErrorBindFetchingInstance) {\n            this._fetchStatus.ajax.removeEventListener('error', this._fetchStatus._handleErrorBindFetchingInstance);\n          }\n          this._fetchStatus._handleResponseBindFetchingInstance = this._handleResponse.bind(this);\n          this._fetchStatus._handleErrorBindFetchingInstance = this._handleError.bind(this);\n          this._fetchStatus.ajax.addEventListener('response', this._fetchStatus._handleResponseBindFetchingInstance);\n          this._fetchStatus.ajax.addEventListener('error', this._fetchStatus._handleErrorBindFetchingInstance);\n        }\n        // TODO: app global bundles have to be handled\n        var url;\n        var skipFetching = false;\n\n        if (lang === '') {\n          url = this.resolveUrl(id + '.json');\n        }\n        else {\n          if (bundles[lang] && bundles[lang].bundle) {\n            // missing in the bundle\n            url = this.resolveUrl(localesPath + '/' + id + '.' + lang + '.json');\n            skipFetching = !!this.isI18nController;\n          }\n          else {\n            // fetch the bundle\n            bundleFetchingInstances[lang] = this;\n            url = this.resolveUrl(startUrl + localesPath + '/bundle.' + lang + '.json');\n          }\n        }\n        this._fetchStatus.ajax.url = url;\n        this._fetchStatus.ajaxLang = lang;\n        try {\n          this._fetchStatus.error = null;\n          if (skipFetching) {\n            this._handleError({ detail: { error: 'skip fetching for I18nController' }});\n          }\n          else {\n            this._fetchStatus.ajax.generateRequest();\n          }\n        }\n        catch (e) {\n          // TODO: extract error message from the exception e\n          this._handleError({ detail: { error: 'ajax request failed: ' + e }});\n        }\n      }\n    },\n\n    /**\n     * Handle Ajax success response for a bundle.\n     *\n     * @param {Object} event `iron-ajax` success event.\n     */\n    _handleResponse: function (event) {\n      //console.log('_handleResponse ajaxLang = ' + this._fetchStatus.ajaxLang);\n      if (this._fetchStatus.ajax.url.indexOf('/' + localesPath + '/bundle.') >= 0) {\n        bundles[this._fetchStatus.ajaxLang] = bundles[this._fetchStatus.ajaxLang] || {};\n        this._deepMap(bundles[this._fetchStatus.ajaxLang],\n                      event.detail.response,\n                      function (text) { return text; });\n        bundles[this._fetchStatus.ajaxLang].bundle = true;\n        bundleFetchingInstances[this._fetchStatus.ajaxLang] = null;\n        //console.log('bundle-fetched ' + this.is + ' ' + this._fetchStatus.ajaxLang);\n        this.fire('bundle-fetched', { success: true, lang: this._fetchStatus.ajaxLang });\n        var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n        if (bundles[this._fetchStatus.ajaxLang][id]) {\n          this._fetchStatus.lastResponse = bundles[this._fetchStatus.ajaxLang][id];\n        }\n        else {\n          // bundle does not contain text for this.is\n          this._fetchStatus.fetchingInstance = null;\n          this._fetchBundle(this._fetchStatus.ajaxLang);\n          return;\n        }\n      }\n      else {\n        this._fetchStatus.lastResponse = event.detail.response;\n      }\n      if (this._fetchStatus.lastResponse) {\n        var nextFallbackLanguage = this._fetchStatus.fallbackLanguageList.shift();\n        // store the raw response\n        this._fetchStatus.rawResponses[this._fetchStatus.ajaxLang] = \n          this._fetchStatus.lastResponse;\n\n        this._fetchStatus.fetchingInstance = null;\n        if (nextFallbackLanguage) {\n          this._fetchBundle(nextFallbackLanguage);        \n        }\n        else {\n          this._fetchBundle('');\n        }\n      }\n      else {\n        event.detail.error = 'empty response for ' + this._fetchStatus.ajax.url;\n        this._handleError(event);\n      }\n    },\n\n    /**\n     * Handle Ajax error response for a bundle.\n     *\n     * @param {Object} event `iron-ajax` error event.\n     */\n    _handleError: function (event) {\n      var nextFallbackLanguage;\n      this._fetchStatus.fetchingInstance = null;\n      if (this._fetchStatus.ajax.url.indexOf('/' + localesPath + '/bundle.') >= 0) {\n        bundles[this._fetchStatus.ajaxLang] = bundles[this._fetchStatus.ajaxLang] || {};\n        bundles[this._fetchStatus.ajaxLang].bundle = true;\n        bundleFetchingInstances[this._fetchStatus.ajaxLang] = null;\n        // falls back to its element-specific bundle\n        this._fetchBundle(this._fetchStatus.ajaxLang);\n        //console.log('bundle-fetched ' + this.is + ' ' + this._fetchStatus.ajaxLang);\n        this.fire('bundle-fetched', { success: false, lang: this._fetchStatus.ajaxLang });\n        return;\n      }\n      nextFallbackLanguage = this._fetchStatus.fallbackLanguageList.shift();\n      if (this._fetchStatus.ajaxLang === this._fetchStatus.targetLang) {\n        if (nextFallbackLanguage) {\n          //console.log(this.is + ': ' + this._fetchStatus.ajaxLang +\n          //            ' falls back to ' + nextFallbackLanguage);\n          this._fetchStatus.targetLang = nextFallbackLanguage;\n          this._fetchBundle(nextFallbackLanguage);\n        }\n        else {\n          this._fetchStatus.error = event.detail.error;\n          //console.log(this._fetchStatus.error);\n          // falls back to default\n          this.lang = '';\n        }\n      }\n      else {\n        // fetching dependent fallback languages\n        if (nextFallbackLanguage) {\n          //console.log(this.is + ': ' + this._fetchStatus.ajaxLang +\n          //            ' is missing and skipped');\n          //console.log(this.is + ': step to the next dependent fallback ' +\n          //            nextFallbackLanguage);\n          this._fetchBundle(nextFallbackLanguage);\n        }\n        else {\n          this._fetchBundle('');\n        }\n      }\n    },\n\n    /**\n     * Forward `lang-updated` event to other instances of the same element.\n     *\n     * @param {Object} event `lang-updated` event object.\n     */\n    _forwardLangEvent: function (event) {\n      //console.log('_forwardLangEvent ' + this.is + ' ' + event.detail.lang);\n      event.target.removeEventListener(event.type, this._forwardLangEventBindThis);\n      if (this.lang === event.detail.lang) {\n        this.notifyPath('text', this._getBundle(this.lang));\n        this.fire(event.type, event.detail);\n      }\n      else {\n        this.lang = event.detail.lang;\n        this.notifyPath('text', this._getBundle(this.lang));\n      }\n    },\n\n    /**\n     * Handle `bundle-fetched` event.\n     *\n     * @param {Object} event `bundle-fetched` event object.\n     */\n    _handleBundleFetched: function (event) {\n      var detail = event.detail;\n      //console.log('_handleBundleFetched ' + this.is + ' ' + detail.lang);\n      event.target.removeEventListener(event.type, this._handleBundleFetchedBindThis);\n      if (this._fetchStatus.ajaxLang === detail.lang) {\n        this._fetchStatus.fetchingInstance = null;\n        this._fetchBundle(this._fetchStatus.ajaxLang);\n      }\n    },\n\n    /**\n     * Handle changes of `observeHtmlLang` property.\n     *\n     * @param {Boolean} value Value of `observeHtmlLang`\n     */\n    _observeHtmlLangChanged: function (value) {\n      if (value) {\n        this._htmlLangObserver = this._htmlLangObserver || \n          new MutationObserver(this._handleHtmlLangChange.bind(this));\n        this._htmlLangObserver.observe(html, { attributes: true });\n      }\n      else {\n        if (this._htmlLangObserver) {\n          this._htmlLangObserver.disconnect();\n        }\n      }\n    },\n\n    /**\n     * MutationObserver callback of `<html lang>` attribute.\n     *\n     * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n     */\n    _handleHtmlLangChange: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            this.lang = html.lang;\n          }\n          break;\n        default:\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Construct the text message bundle of the target locale with fallback of missing texts.\n     *\n     * @param {strings} lang Target locale.\n     */\n    _constructBundle: function (lang) {\n      var fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n      var bundle = {};\n      var raw;\n      var baseLang;\n      var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n      var i;\n      fallbackLanguageList.push('');\n      for (i = 0; i < fallbackLanguageList.length; i++) {\n        if (bundles[fallbackLanguageList[i]] &&\n            bundles[fallbackLanguageList[i]][id]) {\n          break;\n        }\n      }\n      fallbackLanguageList.splice(i + 1, fallbackLanguageList.length);\n      while ((baseLang = fallbackLanguageList.pop()) !== undefined) {\n        if (bundles[baseLang][id]) {\n          bundle = deepcopy(bundles[baseLang][id]);\n        }\n        else {\n          raw = this._fetchStatus.rawResponses[baseLang];\n          if (raw) {\n            this._deepMap(bundle, raw, function (text) { return text; });\n          }\n        }\n      }\n      // store the constructed bundle\n      if (!bundles[lang]) {\n        bundles[lang] = {};\n      }\n      bundles[lang][id] = bundle;\n    },\n\n    /**\n     * Construct a pseudo-bundle for the target locale. (Not used for now)\n     *\n     * @param {string} lang Target locale.\n     */\n    /*\n    _constructPseudoBundle: function (lang) {\n      var bundle = {};\n      var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n      this._deepMap(bundle, bundles[''][id], function (value) {\n        return typeof value === 'string' ? lang + ' ' + value : value;\n      });\n      bundles[lang] = bundles[lang] || {};\n      bundles[lang][id] = bundle;\n      return bundle;\n    },\n    */\n\n    /**\n     * Recursively map the source object onto the target object with the specified map function.\n     * \n     * The method is used to merge a bundle into its fallback bundle.\n     *\n     * @param {Object} target Target object.\n     * @param {Object} source Source object.\n     * @param {Function} map Mapping function.\n     */\n    _deepMap: function (target, source, map) {\n      var value;\n      for (var prop in source) {\n        value = source[prop];\n        switch (typeof value) {\n        case 'string':\n        case 'number':\n        case 'boolean':\n          if (typeof target === 'object') {\n            target[prop] = map(value, prop);\n          }\n          break;\n        case 'object':\n          if (typeof target === 'object') {\n            if (Array.isArray(value)) {\n              // TODO: cannot handle deep objects properly\n              target[prop] = target[prop] || [];\n              this._deepMap(target[prop], value, map);\n            }\n            else {\n              target[prop] = target[prop] || {};\n              this._deepMap(target[prop], value, map);\n            }\n          }\n          break;\n        default:\n          if (typeof target === 'object') {\n            target[prop] = value;\n          }\n          break;\n        }\n      }\n    },\n\n    /**\n     * Construct the default bundle from the element's template.\n     *\n     * Extract the default bundle from the template if it is embedded as JSON at build time.\n     *\n     * ### Hard-coded UI text example:\n     * ```\n     *   <dom-module id=\"custom-element\">\n     *     <template>\n     *       <span id=\"label\">UI Text Label:</span>\n     *       <input id=\"input-el\"\n     *              value=\"{{keyword}}\"\n     *              placeholder=\"Keyword\">\n     *     </template>\n     *   </dom-module>\n     * ```\n     *\n     * ### Constructed default bundle for the above example:\n     * ```\n     *   {\n     *     \"model\" : {\n     *       \"input-el\": {\n     *         \"placeholder\": \"Keyword\"\n     *       }\n     *     },\n     *     \"label\": \"UI Text Label:\"\n     *   }\n     * ```\n     *\n     * ### Processed template with bound annotations for the above example:\n     * ```\n     *   <dom-module id=\"custom-element\">\n     *     <template localizable-text=\"embedded\">\n     *       <span id=\"label\">{{text.label}}</span>\n     *       <input id=\"input-el\"\n     *         value=\"{{keyword}}\"\n     *         placeholder=\"{{model.input-el.placeholder}}\">\n     *     </template>\n     *   </dom-module>\n     * ```\n     *\n     * ### Embedded JSON bundle format for the above example:\n     * ```\n     *   <dom-module id=\"custom-element\">\n     *     <template localizable-text=\"embedded\">\n     *       <span id=\"label\">{{text.label}}</span>\n     *       <input id=\"input-el\"\n     *         value=\"{{keyword}}\"\n     *         placeholder=\"{{model.input-el.placeholder}}\">\n     *       <template id=\"localizable-text\">\n     *         <json-data>{\n     *           \"model\" : {\n     *             \"input-el\": {\n     *               \"placeholder\": \"Keyword\"\n     *             }\n     *           },\n     *           \"label\": \"UI Text Label:\"\n     *         }</json-data>\n     *       </template>\n     *     </template>\n     *   </dom-module>\n     * ```\n     */\n    _constructDefaultBundle: function (_template, _id) {\n      var template;\n      var id = _id || this.is;\n      if (this.is === 'i18n-dom-bind') {\n        template = _template || this;\n        id = this.id;\n        /* istanbul ignore if */\n        if (template.content && template.content.childNodes.length === 0) {\n          // Find the real template in Internet Explorer 11 when i18n-dom-bind is concealed in a parent template\n          // This does not happen on Polymer 1.3.1 or later.  So ignore this 'if' statement in code coverage.\n          template = Array.prototype.map.call(document.querySelectorAll('template'), function (parentTemplate) {\n            return parentTemplate.content.querySelector('template#' + id + '[is=\"i18n-dom-bind\"]');\n          }).reduce(function (prev, current) {\n            return prev || current;\n          });\n          // Patch this.content with the real one\n          if (template) {\n            this.content = template.content;\n          }\n        }\n      }\n      else {\n        template = _template || Polymer.DomModule.import(id, 'template');\n      }\n      if (template) {\n        this.templateDefaultLang = template.hasAttribute('lang') ? template.lang : 'en';\n      }\n      else {\n        this.templateDefaultLang = 'en';\n      }\n      var bundle = { model: {} };\n      var path = [];\n      var templateDefaultLang = this.templateDefaultLang;\n      var localizableText, jsonData;\n\n      if (template) {\n        // register localizable attributes of the element itself\n        if (attributesRepository.registerLocalizableAttributes) {\n          attributesRepository.registerLocalizableAttributes(id, template);\n        }\n        else {\n          BehaviorsStore._I18nAttrRepo._created();\n          BehaviorsStore._I18nAttrRepo.registerLocalizableAttributes(id, template);\n        }\n        if (template.getAttribute('localizable-text') === 'embedded') {\n          // pick up embedded JSON from the template\n          localizableText = template.content.querySelector('#localizable-text');\n          if (localizableText) {\n            jsonData = localizableText.content.querySelector('json-data');\n            if (jsonData) {\n              bundle = JSON.parse(jsonData.textContent);\n            }\n            else {\n              console.error('<json-data> not found in <template id=\\\"localizable-text\\\">');\n            }\n          }\n          else {\n            console.error('<template id=\\\"localizable-text\\\"> not found');\n          }\n        }\n        else {\n          if (extraWhiteSpaceNode) {\n            template.setAttribute('strip-whitespace', '');\n          }\n          // traverse template to generate bundle\n          this._traverseTemplateTree(template.content, path, bundle, 0);\n        }\n      }\n\n      bundles[''][id] = bundle;\n      bundles[templateDefaultLang] = bundles[templateDefaultLang] || {};\n      bundles[templateDefaultLang][id] = bundle;\n      //console.log('text = ');\n      //console.log(JSON.stringify(bundle, null, 2));\n\n      return true;\n    },\n\n    /**\n     * Traverse localizable attributes of the target element node and \n     * add them to the target bundle under the `model` object.\n     * \n     * The `<i18n-attr-repo>` object is used \n     * to judge if the target attributes are localizable.\n     *\n     * @param {Object} node Target element node.\n     * @param {string} path Path to the target node.\n     * @param {Object} bundle Default bundle.\n     */\n    _traverseAttributes: function (node, path, bundle) {\n      var name = node.nodeName.toLowerCase();\n      var id = node.getAttribute ?\n                 (node.getAttribute('text-id') ||\n                  node.getAttribute('id')) : null;\n      var text;\n      var messageId;\n      var attrId;\n      var isLocalizable;\n      var dummy;\n      // pick up element attributes\n      Array.prototype.forEach.call(node.attributes, function (attribute) {\n        text = attribute.value;\n        switch (attribute.name) {\n        case 'id':\n        case 'text-id':\n        case 'is':\n        case 'lang':\n        case 'class':\n        // verification required before removing these attributes\n        case 'href':\n        case 'src':\n        case 'style':\n        case 'url':\n        case 'selected':\n          break;\n        default:\n          if (!(isLocalizable = BehaviorsStore._I18nAttrRepo.isLocalizableAttribute(node, attribute.name))) {\n            break;\n          }\n          if (text.length === 0) {\n            // skip empty value attribute\n          }\n          else if (text.match(/^{{[^{}]*}}$/) || text.match(/^\\[\\[[^\\[\\]]*\\]\\]$/)) {\n            // skip annotation attribute\n          }\n          else if (text.replace(/\\n/g, ' ').match(/^{.*}|\\[.*\\]$/g) &&\n                  !text.match(/^{{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\]/) &&\n                  !text.match(/{{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\]$/)) {\n            // generate message id\n            messageId = this._generateMessageId(path, id);\n            try {\n              //console.log(messageId + ' parsing attribute ' + attribute.name + ' = ' + text);\n              var value = JSON.parse(text.replace(/\\n/g, ' '));\n              //console.log('parsed JSON object = ');\n              //console.log(value);\n              switch (typeof value) {\n              case 'string':\n              case 'number':\n              case 'object':\n                // put into model\n                attrId = ['model', messageId, attribute.name].join('.');\n                debuglog(attrId + ' = ' + text);\n                this._setBundleValue(bundle, attrId, value);\n                attribute.value = '{{' + attrId + '}}';\n                break;\n              default: // skip other types\n                break;\n              }\n            }\n            catch (e) {\n              // invalid JSON\n              console.warn(e, 'Invalid JSON at <' + name + ' ' + attribute.name + '> with value = ' + text);\n            }\n          }\n          else if (text.match(/{{[^{}]{1,}}}|\\[\\[[^\\[\\]]{1,}\\]\\]/)) {\n            // compound binding attribute\n            // Parameterized:\n            //   e.g., attr=\"Compound binding attribute has [[bound.value]] {{parameters}} in the value string\"\n            //   replaced as \"{{i18nFormat(attrId.0,bound.value,parameters)}}\"\n            //   extracted as [ \"Compound binding attribute has {1} {2} in the value string\", \"[[bound.value]]\", \"{{parameters}}\" ]\n            // Concatenated: (Parameters with functions cannot be reordered in translation)\n            //   e.g., attr2=\"Compound binding attribute has [[f1(bound.value)]] {{f2(parameters)}} in the value string\"\n            //   replaced as \"{{attrId.0}}[[f1(bound.value)]]{{attrId.2}}{{f2(parameters)}}{{attrId.4}}\"\n            //   extracted as [ \"Compound binding attribute has \", \"[[f1(bound.value)]]\", \" \", \"{{f2(parameters)}}\", \" in the value string\" ]\n            var parsed = text.match(/([^{}\\[\\]]{1,})|({{[^{}]{1,}}})|(\\[\\[[^\\[\\]]{1,}\\]\\])/g);\n            var parameterized;\n            var processed;\n            var n;\n            messageId = this._generateMessageId(path, id);\n            attrId = ['model', messageId, attribute.name.replace(/\\$$/, '')].join('.');\n            if (text.match(/\\)}}|\\)\\]\\]/)) { // check for function parameter\n              // Concatenate\n              debuglog(attrId + ' = ' + JSON.stringify(parsed));\n              this._setBundleValue(bundle, attrId, parsed);\n              processed = '';\n              for (n = 0; n < parsed.length; n++) {\n                if (parsed[n].match(/^{{[^{}]{1,}}}|\\[\\[[^\\[\\]]{1,}\\]\\]$/)) {\n                  processed += parsed[n];\n                }\n                else {\n                  processed += '{{' + attrId + '.' + n + '}}';\n                }\n              }\n              if (isLocalizable === '$' && !attribute.name.match(/\\$$/)) {\n                dummy = document.createElement('span');\n                dummy.innerHTML = '<span ' + attribute.name + '$=\"' + processed + '\"></span>';\n                node.setAttributeNode(dummy.childNodes[0].attributes[0].cloneNode());\n              }\n              else {\n                attribute.value = processed;\n              }\n            }\n            else {\n              // Parameterize\n              parameterized = [ '' ];\n              while (parsed.length) {\n                if (parsed[0].match(/^{{[^{}]{1,}}}|\\[\\[[^\\[\\]]{1,}\\]\\]$/)) {\n                  parameterized.push(parsed[0]);\n                  parameterized[0] += '{' + (parameterized.length - 1) + '}';\n                }\n                else {\n                  parameterized[0] += parsed[0];\n                }\n                parsed.shift();\n              }\n              debuglog(attrId + ' = ' + JSON.stringify(parameterized));\n              this._setBundleValue(bundle, attrId, parameterized);\n              processed = '{{i18nFormat(' + attrId + '.0';\n              for (n = 1; n < parameterized.length; n++) {\n                processed += ',' + parameterized[n].replace(/^[{\\[][{\\[](.*)[}\\]][}\\]]$/, '$1');\n              }\n              processed += ')}}';\n              if (isLocalizable === '$' && !attribute.name.match(/\\$$/)) {\n                dummy = document.createElement('span');\n                dummy.innerHTML = '<span ' + attribute.name + '$=\"' + processed + '\"></span>';\n                node.setAttributeNode(dummy.childNodes[0].attributes[0].cloneNode());\n              }\n              else {\n                attribute.value = processed;\n              }\n            }\n          }\n          else {\n            // string attribute\n            messageId = this._generateMessageId(path, id);\n            attrId = ['model', messageId, attribute.name].join('.');\n            debuglog(attrId + ' = ' + text);\n            this._setBundleValue(bundle, attrId, text);\n            if (isLocalizable === '$' && !attribute.name.match(/\\$$/)) {\n              dummy = document.createElement('span');\n              dummy.innerHTML = '<span ' + attribute.name + '$=' + '\"{{' + attrId + '}}\"' + '></span>';\n              node.setAttributeNode(dummy.childNodes[0].attributes[0].cloneNode());\n            }\n            else {\n              attribute.value = '{{' + attrId + '}}';\n            }\n          }\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Recursively traverse text contents of the target element node\n     * and add them to the target bundle object.\n     *\n     * Traversed text contents are replaced with annotations \n     * for the corresponding text in the bundle.\n     *\n     * - - -\n     *\n     * There are some special treatments in the following cases.\n     *\n     * ### Sentence with parameterized child parameter-like elements:\n     *\n     * As the order of the parameters can change in different languages,\n     * `<i18n-format>` element is used to make the sentence localizable.\n     *\n     * ### Before processing\n     *\n     * ```\n     *   <p id=\"p\"><code>i18n-format</code> is \n     *     used for  \n     *     <a href=\"https://www.google.com\">parameterized</a> \n     *     sentences.</p>\n     * ```\n     *\n     * ### After processing\n     *\n     * ```\n     *   <p id=\"p\">\n     *     <i18n-format lang=\"{{effectiveLang}}\">\n     *       <span>{{text.p.0}}</span>\n     *       <code>{{text.p.1}}</code>\n     *       <a href=\"https://www.google.com\">{{text.p.2}}</a>\n     *     </i18n-format>\n     *   </p>\n     * ```\n     *\n     * ### Constructed bundle data: Texts are stored in an Array of strings.\n     *\n     * ```\n     *   {\n     *     \"p\" : [\n     *       \"{1} is\\n used for\\n {2}\\n sentences.\",\n     *       \"i18n-format\",\n     *       \"parameterized\"\n     *     ]\n     *   }\n     * ```\n     *\n     * - - -\n     *\n     * ### `<i18n-format>` element with compound templates:\n     *\n     * Texts with compound templates for `<i18n-format>` element are\n     * processed as below.\n     *\n     * `lang=\"{{effectiveLang}}\"` attribute is added to `<i18n-format>` node\n     * as well as `<i18n-number>` node.\n     *\n     * ### Before processing\n     *\n     * ```\n     * <i18n-format id=\"sentence\">\n     *   <json-data>{\n     *     \"0\": \"You ({3}) gave no gifts.\",\n     *     \"1\": {\n     *       \"male\": \"You ({3}) gave him ({4}) {5}.\",\n     *       \"female\": \"You ({3}) gave her ({4}) {5}.\",\n     *       \"other\": \"You ({3}) gave them ({4}) {5}.\"\n     *     },\n     *     \"one\": {\n     *       \"male\": \n     *         \"You ({3}) gave him ({4}) and one other {5}.\",\n     *       \"female\": \n     *         \"You ({3}) gave her ({4}) and one other {5}.\",\n     *       \"other\": \n     *         \"You ({3}) gave them ({4}) and one other {5}.\"\n     *     },\n     *     \"other\": \n     *       \"You ({3}) gave them ({4}) and {1} others gifts.\"\n     *   }</json-data>\n     *   <i18n-number \n     *     offset=\"1\"\n     *     >{{recipients.length}}</i18n-number>\n     *   <span>{{recipients.0.gender}}</span>\n     *   <span>{{sender.name}}</span>\n     *   <span>{{recipients.0.name}}</span>\n     *   <span>a gift</span>\n     * </i18n-format>\n     * ```\n     *\n     * ### After processing\n     *\n     * ```\n     * <i18n-format id=\"sentence\" \n     *              lang=\"{{effectiveLang}}\">\n     *   <json-data>{{serialize(text.sentence.0)}}</json-data>\n     *   <i18n-number \n     *     offset=\"1\"\n     *     lang=\"{{effectiveLang}}\"\n     *     >{{recipients.length}}</i18n-number>\n     *   <span>{{recipients.0.gender}}</span>\n     *   <span>{{sender.name}}</span>\n     *   <span>{{recipients.0.name}}</span>\n     *   <span>{{text.sentence.5}}</span>\n     * </i18n-format>\n     * ```\n     *\n     * ### Constructed bundle data:\n     *\n     * ```\n     * {\n     *   \"sentence\" : [\n     *     {\n     *       \"0\": \"You ({3}) gave no gifts.\",\n     *       \"1\": {\n     *         \"male\": \"You ({3}) gave him ({4}) {5}.\",\n     *         \"female\": \"You ({3}) gave her ({4}) {5}.\",\n     *         \"other\": \"You ({3}) gave them ({4}) {5}.\"\n     *       },\n     *       \"one\": {\n     *         \"male\": \n     *         \"You ({3}) gave him ({4}) and one other {5}.\",\n     *         \"female\": \n     *         \"You ({3}) gave her ({4}) and one other {5}.\",\n     *         \"other\": \n     *         \"You ({3}) gave them ({4}) and one other {5}.\"\n     *       },\n     *       \"other\": \n     *       \"You ({3}) gave them ({4}) and {1} others gifts.\"\n     *     },\n     *     \"{{recipients.length - 1}}\",\n     *     \"{{recipients.0.gender}}\",\n     *     \"{{sender.name}}\",\n     *     \"{{recipients.0.name}}\",\n     *     \"a gift\"\n     *   ]\n     * }\n     * ```\n     *\n     * @param {Object} node Target element node.\n     * @param {string} path Path to the target node.\n     * @param {Object} bundle Default bundle.\n     * @param {Number} index Index in the siblings of the target node excluding whitespace nodes.\n     */\n    _traverseTemplateTree: function (node, path, bundle, index) {\n      var i;\n      var whiteSpaceElements = 0;\n      var isWhiteSpace = false;\n      var isCompoundAnnotatedNode = false;\n      var text;\n      var span;\n      var name = node.nodeName.toLowerCase();\n      var id = node.getAttribute ? \n                 (node.getAttribute('text-id') || \n                  node.getAttribute('id')) : null;\n      var messageId;\n      var n;\n      var templateText;\n      var templateTextParams;\n      path.push(id ? '#' + id : name + (index > 0 ? '_' + index : ''));\n      //console.log(path.join(':'));\n      switch (node.nodeType) {\n      case node.ELEMENT_NODE:\n        switch (name) {\n        case 'style':\n        case 'script':\n        case 'meta':\n          // skip\n          break;\n        case 'i18n-format':\n          // pick up element attributes\n          this._traverseAttributes(node, path, bundle);\n          // generate message id\n          messageId = this._generateMessageId(path, id);\n          if (!node.hasAttribute('lang')) {\n            node.setAttribute('lang', '{{effectiveLang}}');\n          }\n          text = Array.prototype.filter.call(node.childNodes, function (child) {\n            return child.nodeType === child.ELEMENT_NODE;\n          }).map(function (param, n) {\n            var value = param.textContent;\n            var parsedValue = value.match(/^({{)(.*)(}})$/) || \n                              value.match(/^(\\[\\[)(.*)(\\]\\])$/);\n            if (n === 0) {\n              // template element\n              if (param.tagName.toLowerCase() === 'json-data') {\n                if (parsedValue) {\n                  var parsedValue2 = value.match(/^({{)(serialize\\(.*\\))(}})$/) || \n                                     value.match(/^(\\[\\[)(serialize\\(.*\\))(\\]\\])$/);\n                  if (!parsedValue2) {\n                    // convert to {{serialize(id)}}\n                    parsedValue.shift();\n                    parsedValue.splice(1, 0, 'serialize(');\n                    parsedValue.splice(3, 0, ')');\n                    param.textContent = parsedValue.join('');\n                  }\n                }\n                else {\n                  value = JSON.parse(value);\n                  param.textContent = '{{serialize(text.' + messageId + '.' + n + ')}}';\n                }\n              }\n              else {\n                if (!parsedValue) {\n                  param.textContent = '{{text.' + messageId + '.' + n + '}}';\n                }\n              }\n            }\n            else {\n              // param element\n              // TODO: handle localization of param nodes and attributes\n              if (!param.hasAttribute(paramAttribute)) {\n                param.setAttribute(paramAttribute, n);\n              }\n              if (param.tagName.toLowerCase() === 'i18n-number') {\n                if (!param.hasAttribute('lang')) {\n                  param.setAttribute('lang', '{{effectiveLang}}');\n                }\n                var offset = param.getAttribute('offset');\n                if (offset) {\n                  offset = ' - ' + offset;\n                }\n                else {\n                  offset = '';\n                }\n                if (parsedValue) {\n                  // convert to {{path - offset}}\n                  parsedValue.shift();\n                  parsedValue.splice(2, 0, offset);\n                  value = parsedValue.join('');\n                }\n                else {\n                  param.textContent = '{{text.' + messageId + '.' + n + '}}';\n                }\n              }\n              else {\n                if (!parsedValue) {\n                  param.textContent = '{{text.' + messageId + '.' + n + '}}';\n                }\n              }\n            }\n            return value;\n          }, this);\n          debuglog(messageId + ' = ' + text);\n          this._setBundleValue(bundle, messageId, text);\n          break;\n        case 'template':\n          // traverse into its content\n          //console.log(path.join(':') + ':' + node.content.nodeName + ':' + 0);\n          if (extraWhiteSpaceNode) {\n            //if (node.hasAttribute('is') && node.getAttribute('is').match(/^(i18n-)?dom-/)) {\n              node.setAttribute('strip-whitespace', '');\n            //}\n          }\n          this._traverseTemplateTree(node.content, path, bundle, 0);\n          break;\n        default:\n          // element node\n          if (name === 'i18n-number' ||\n              name === 'i18n-datetime') {\n            if (!node.hasAttribute('lang')) {\n              node.setAttribute('lang', '{{effectiveLang}}');\n            }\n          }\n          // pick up element attributes\n          this._traverseAttributes(node, path, bundle);\n          // check annonated node\n          isCompoundAnnotatedNode = false;\n          if (node.childElementCount === 0) {\n            if (node.textContent) {\n              isCompoundAnnotatedNode = this._isCompoundAnnotatedText(node.textContent);\n            }\n          }\n          if (node.childElementCount === 0 && !isCompoundAnnotatedNode) {\n            if (node.textContent) { // use textContent for Firefox compatibility\n              text = node.textContent;\n              if (text.length === 0 || text.match(/^\\s*$/g)) {\n                // skip empty or whitespace node\n              }\n              else if (text.trim().match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n                // skip annotation node\n                // TODO: compound bindings support\n              }\n              else {\n                // a text message found\n                // generate message id\n                messageId = this._generateMessageId(path, id);\n                // store the text message\n                text = text.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n                if (name === 'json-data') {\n                  this._setBundleValue(bundle, messageId, JSON.parse(text));\n                }\n                else {\n                  this._setBundleValue(bundle, messageId, text);\n                }\n                // replace textContent with annotation\n                node.textContent = '{{text.' + messageId + '}}';\n                if (!id) {\n                  //node.id = messageId;\n                  //console.warn('add missing node id as ' + messageId + ' for ' + text);\n                }\n                debuglog(messageId + ' = ' + text);\n              }\n            }\n            else {\n              // skip\n            }\n          } \n          else {\n            // has children or compound annotation\n            // check if i18n-format is applicable\n            var childStatus = Array.prototype.map.call(\n              node.childNodes, function (child) {\n                var result;\n                if (child.nodeType === child.ELEMENT_NODE &&\n                    child.tagName === 'TEMPLATE') {\n                  var templateNonCommentChildNodes =\n                    Array.prototype.filter.call(child.content.childNodes, function (templateChild) {\n                      switch (templateChild.nodeType) {\n                      case templateChild.COMMENT_NODE:\n                        return false;\n                      case templateChild.TEXT_NODE:\n                        return !templateChild.textContent.match(/^\\s*$/g);\n                      default:\n                      case templateChild.ELEMENT_NODE:\n                        return true;\n                      }\n                    });\n                  var firstChild = templateNonCommentChildNodes.shift();\n                  // Examples:\n                  // hasText: <template>text</template>\n                  // hasCompoundAnnotatedText: <template>{{item.name}} text</template>\n                  // hasTextChild: <template><b>text</b></template> or <template><br></template>\n                  // hasCompoundAnnotatedChildNode: <template><b>{{item.name}} text</b></template>\n                  // hasGrandChildren: <template><span><b>text</b></span></template> or \n                  //                   <template><b>A</b><i>B</i></template> or\n                  //                   hasCompoundAnnotatedText\n                  result = {\n                    hasText: templateNonCommentChildNodes.length === 0 &&\n                             firstChild &&\n                             firstChild.nodeType === firstChild.TEXT_NODE &&\n                             firstChild.textContent.length > 0 &&\n                             !firstChild.textContent.match(/^\\s*$/g),\n                    hasCompoundAnnotatedText: firstChild &&\n                                              firstChild.nodeType === firstChild.TEXT_NODE &&\n                                              this._isCompoundAnnotatedText(firstChild.textContent),\n                    hasTextChild: templateNonCommentChildNodes.length === 0 &&\n                                  firstChild &&\n                                  firstChild.nodeType === child.ELEMENT_NODE &&\n                                  firstChild.childElementCount === 0, // including <br>\n                    hasCompoundAnnotatedChildNode: firstChild &&\n                                                   firstChild.nodeType === firstChild.ELEMENT_NODE &&\n                                                   firstChild.childElementCount === 0 &&\n                                                   this._isCompoundAnnotatedText(firstChild.textContent),\n                    hasGrandChildren: templateNonCommentChildNodes.length > 0 ||\n                                      (firstChild &&\n                                       firstChild.nodeType === firstChild.ELEMENT_NODE &&\n                                        Array.prototype.map.call(\n                                          firstChild.childNodes,\n                                          function (grandChild) {\n                                            return grandChild.nodeType !== grandChild.TEXT_NODE;\n                                          }\n                                        ).reduce(function (prev, current) {\n                                          return prev || current;\n                                        }, false)) ||\n                                      (firstChild &&\n                                       firstChild.nodeType === firstChild.TEXT_NODE &&\n                                       this._isCompoundAnnotatedText(firstChild.textContent))\n                  };\n                }\n                else {\n                  result = {\n                    hasText: child.nodeType === child.TEXT_NODE &&\n                             child.textContent.length > 0 &&\n                             !child.textContent.match(/^\\s*$/g),\n                    hasCompoundAnnotatedText: child.nodeType === child.TEXT_NODE &&\n                                              this._isCompoundAnnotatedText(child.textContent),\n                    hasTextChild: child.nodeType === child.ELEMENT_NODE &&\n                                  child.childElementCount === 0, // including <br>\n                    hasCompoundAnnotatedChildNode: child.nodeType === child.ELEMENT_NODE &&\n                                                   child.childElementCount === 0 &&\n                                                   this._isCompoundAnnotatedText(child.textContent),\n                    hasGrandChildren: child.nodeType === child.ELEMENT_NODE &&\n                                      Array.prototype.map.call(\n                                        child.childNodes,\n                                        function (grandChild) {\n                                          return grandChild.nodeType !== grandChild.TEXT_NODE;\n                                        }\n                                      ).reduce(function (prev, current) {\n                                        return prev || current;\n                                      }, false)\n                  };\n                }\n                return result;\n              }.bind(this)).reduce(function (prev, current) { \n                return {\n                  hasText: prev.hasText || current.hasText,\n                  hasCompoundAnnotatedText: prev.hasCompoundAnnotatedText || current.hasCompoundAnnotatedText,\n                  hasTextChild: prev.hasTextChild || current.hasTextChild,\n                  hasCompoundAnnotatedChildNode: prev.hasCompoundAnnotatedChildNode || current.hasCompoundAnnotatedChildNode,\n                  hasGrandChildren: prev.hasGrandChildren || current.hasGrandChildren\n                };\n              }, { \n                hasText: false, \n                hasCompoundAnnotatedText: false,\n                hasTextChild: false,\n                hasCompoundAnnotatedChildNode: false,\n                hasGrandChildren: false\n              });\n            if ((childStatus.hasText || node.hasAttribute('text-id')) &&\n                (childStatus.hasTextChild || childStatus.hasCompoundAnnotatedText) && \n                !childStatus.hasGrandChildren &&\n                !childStatus.hasCompoundAnnotatedChildNode) {\n              // apply i18n-format\n              /*\n                    <i18n-format>\n                      <span>{{text.simpleChartDesc.0}}</span>\n                      <code param=\"1\">{{text.simpleChartDesc.1}}</code>\n                      <a param=\"2\" href=\"link\">{{text.simpleChartDesc.2}}</a>\n                      <a param=\"3\" href=\"link2\">{{text.simpleChartDesc.3}}</a>\n                    </i18n-format>\n              */\n              n = 0;\n              messageId = this._generateMessageId(path, id);\n              templateTextParams = Array.prototype.map.call(\n                node.childNodes, function (child) {\n                  var firstChild;\n                  if (child.nodeType === child.TEXT_NODE &&\n                      this._hasAnnotatedText(child.textContent)) {\n                    return this._compoundAnnotationToSpan(child)\n                      .map(function (_child) {\n                        return {\n                          node: _child,\n                          templateNode: null,\n                          type: _child.nodeType,\n                          text: _child.nodeType === _child.TEXT_NODE ? \n                                  _child.textContent : null,\n                          childTextNode: _child.nodeType === _child.ELEMENT_NODE &&\n                                         _child.childNodes.length > 0\n                        };\n                      });\n                  }\n                  else if (child.nodeType === child.ELEMENT_NODE &&\n                      child.tagName === 'TEMPLATE') {\n                    firstChild =\n                      Array.prototype.filter.call(child.content.childNodes, function (templateChild) {\n                        switch (templateChild.nodeType) {\n                        case templateChild.COMMENT_NODE:\n                          return false;\n                        case templateChild.TEXT_NODE:\n                          return !templateChild.textContent.match(/^\\s*$/g);\n                        default:\n                        case templateChild.ELEMENT_NODE:\n                          return true;\n                        }\n                      }).shift();\n                    if (!firstChild) {\n                      firstChild =\n                        Array.prototype.filter.call(child.content.childNodes, function (templateChild) {\n                          switch (templateChild.nodeType) {\n                          case templateChild.COMMENT_NODE:\n                            return false;\n                          default:\n                            return true;\n                          }\n                        }).shift();\n                    }\n                    if (firstChild) {\n                      return [{\n                        node: firstChild,\n                        templateNode: child,\n                        type: firstChild.nodeType,\n                        text: null,\n                        childTextNode: true\n                      }];\n                    }\n                    else {\n                      return [];\n                    }\n                  }\n                  else {\n                    return [{\n                      node: child,\n                      templateNode: null,\n                      type: child.nodeType,\n                      text: child.nodeType === child.TEXT_NODE ? \n                              child.textContent : null,\n                      childTextNode: child.nodeType === child.ELEMENT_NODE &&\n                                     child.childNodes.length > 0\n                    }];\n                  }\n                }.bind(this)).reduce(function (prev, currentList) {\n                  var current;\n                  var textContent;\n                  for (var i = 0; i < currentList.length; i++) {\n                    current = currentList[i];\n                    if (current.text) {\n                      prev.text[0] += current.text;\n                    }\n                    if (current.type === current.node.ELEMENT_NODE) {\n                      n++;\n                      prev.text[0] += '{' + n + '}';\n                      path.push(n);\n                      this._traverseAttributes(current.node, path, bundle);\n                      path.pop();\n                      if (current.childTextNode) {\n                        textContent = current.node.textContent;\n                        if (textContent.length === 0) {\n                          // tag without textContent\n                          prev.text.push('<' + current.node.nodeName.toLowerCase() + '>');\n                          current.node.textContent = '';\n                        }\n                        else if (textContent.match(/^\\s*$/g)) {\n                          // tag with whitespace textContent\n                          prev.text.push('<' + current.node.nodeName.toLowerCase() + '>');\n                          current.node.textContent = ' ';\n                        }\n                        else if (textContent.match(/^[\\s]*({{.*}}|\\[\\[.*\\]\\])[\\s]*$/)) {\n                          // tag with annotation\n                          prev.text.push(textContent);\n                          // textContent is untouched\n                        }\n                        else {\n                          prev.text.push(current.node.textContent.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' '));\n                          current.node.textContent = '{{text.' + messageId + '.' + n + '}}';\n                        }\n                      }\n                      else {\n                        prev.text.push('<' + current.node.nodeName.toLowerCase() + '>');\n                      }\n                      current.node.setAttribute(paramAttribute, n.toString());\n                      prev.params.push(current.templateNode || current.node);\n                    }\n                    else if (current.type === current.node.TEXT_NODE &&\n                             current.childTextNode) {\n                      // in template node\n                      n++;\n                      prev.text[0] += '{' + n + '}';\n                      textContent = current.node.textContent;\n                      if (textContent.length === 0) {\n                        // template without textContent\n                        prev.text.push('<template>');\n                        current.node.textContent = '';\n                      }\n                      else if (textContent.match(/^\\s*$/g)) {\n                        // template with whitespace textContent\n                        prev.text.push('<template>');\n                        current.node.textContent = ' ';\n                      }\n                      else if (textContent.match(/^[\\s]*({{.*}}|\\[\\[.*\\]\\])[\\s]*$/)) {\n                        // tag with annotation\n                        prev.text.push(textContent);\n                        // textContent is untouched\n                      }\n                      else {\n                        prev.text.push(textContent.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' '));\n                        current.node.textContent = '{{text.' + messageId + '.' + n + '}}';\n                      }\n                      span = document.createElement('span');\n                      span.setAttribute(paramAttribute, n.toString());\n                      current.templateNode.content.removeChild(current.node);\n                      span.appendChild(current.node);\n                      current.templateNode.content.appendChild(span);\n                      prev.params.push(current.templateNode);\n                    }\n                  }\n                  return prev;\n                }.bind(this), { text: [ '' ], params: [ '{{text.' + messageId + '.0}}' ] });\n              // clear original childNodes before implicit removals by appendChild to i18n-format for ShadyDOM compatibility\n              if (Polymer.ElementMixin) {\n                // Avoid ShadyDOM issue for Polymer 2.x (Implicit removal by appendChild to another element introduces inconsistencies)\n                node.innerHTML = '';\n              }\n              templateText = document.createElement('i18n-format');\n              templateText.setAttribute('lang', '{{effectiveLang}}');\n              if (Polymer.ElementMixin) {\n                // Avoid ShadyDOM issue for Polymer 2.x (Implicit removal by appendChild to another element introduces inconsistencies)\n                // insert i18n-format\n                Polymer.dom(node).appendChild(templateText);\n              }\n              span = document.createElement('span');\n              // span.innerText does not set an effective value in Firefox\n              span.textContent = templateTextParams.params.shift();\n              templateText.appendChild(span);\n              Array.prototype.forEach.call(templateTextParams.params,\n                function (param) {\n                  templateText.appendChild(param);\n                }\n              );\n              if (!Polymer.ElementMixin) {\n                // Avoid ShadyDOM issue for Polymer 1.x (Clearance of innerHTML unexpectedly removes textContent of child nodes)\n                // insert i18n-format\n                node.innerHTML = '';\n                Polymer.dom(node).appendChild(templateText);\n              }\n              // store the text message\n              templateTextParams.text[0] = templateTextParams.text[0].replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n              this._setBundleValue(bundle, messageId, templateTextParams.text);\n              if (!id) {\n                //node.id = messageId;\n                //console.warn('add missing node id as ' + messageId + ' for ' + templateTextParams.text[0]);\n              }\n              debuglog(messageId + ' = ' + templateTextParams.text);\n            }\n            else {\n              // traverse childNodes\n              for (i = 0; i < node.childNodes.length; i++) {\n                //console.log(path.join(':') + ':' + node.childNodes[i].nodeName + ':' + (i - whiteSpaceElements) + ' i = ' + i + ' whiteSpaceElements = ' + whiteSpaceElements);\n                if (this._traverseTemplateTree(node.childNodes[i], path, bundle, i - whiteSpaceElements)) {\n                  whiteSpaceElements++;\n                }\n              }\n            }\n          }\n          break;\n        }\n        break;\n      case node.TEXT_NODE:\n        // text node\n        text = node.textContent;\n        if (text.length === 0 || text.match(/^\\s*$/g)) {\n          // skip empty or whitespace node\n          isWhiteSpace = true;\n        }\n        else if (text.trim().match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n          // skip annotation node\n        }\n        else {\n          var parent = node.parentNode;\n\n          if (this._isCompoundAnnotatedText(text)) {\n            // apply i18n-format\n            n = 0;\n            messageId = this._generateMessageId(path, id);\n            templateTextParams = Array.prototype.map.call(\n              [ node ], function (child) {\n                return this._compoundAnnotationToSpan(child)\n                  .map(function (_child) {\n                    return {\n                      node: _child,\n                      type: _child.nodeType,\n                      text: _child.nodeType === _child.TEXT_NODE ? \n                              _child.textContent : null,\n                      childTextNode: _child.nodeType === _child.ELEMENT_NODE &&\n                                     _child.childNodes.length > 0\n                    };\n                  });\n              }.bind(this)).reduce(function (prev, currentList) {\n                var current;\n                for (var i = 0; i < currentList.length; i++) {\n                  current = currentList[i];\n                  if (current.text) {\n                    prev.text[0] += current.text;\n                  }\n                  if (current.type === current.node.ELEMENT_NODE) {\n                    n++;\n                    prev.text[0] += '{' + n + '}';\n                    path.push(n);\n                    this._traverseAttributes(current.node, path, bundle);\n                    path.pop();\n                    /* current.childTextNode is always true since current.node is <span>{{annotation}}</span> */\n                    prev.text.push(current.node.textContent);\n                    current.node.setAttribute(paramAttribute, n.toString());\n                    prev.params.push(current.node);\n                  }\n                }\n                return prev;\n              }.bind(this), { text: [ '' ], params: [ '{{text.' + messageId + '.0}}' ] });\n            templateText = document.createElement('i18n-format');\n            templateText.setAttribute('lang', '{{effectiveLang}}');\n            // insert i18n-format\n            Polymer.dom(parent).insertBefore(templateText, node);\n            Polymer.dom(parent).removeChild(node);\n            span = document.createElement('span');\n            // span.innerText does not set an effective value in Firefox\n            span.textContent = templateTextParams.params.shift();\n            templateText.appendChild(span);\n            Array.prototype.forEach.call(templateTextParams.params,\n              function (param) {\n                templateText.appendChild(param);\n              }\n            );\n            // store the text message\n            templateTextParams.text[0] = templateTextParams.text[0].replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n            this._setBundleValue(bundle, messageId, templateTextParams.text);\n            debuglog(messageId + ' = ' + templateTextParams.text);\n          }\n          else {\n            // generate message id\n            messageId = this._generateMessageId(path, id);\n            // store the text message\n            text = text.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n            this._setBundleValue(bundle, messageId, text);\n            // replace textContent with annotation\n            node.textContent = '{{text.' + messageId + '}}';\n            if (!id) {\n              //span.id = messageId;\n              //console.warn('add missing span with id as ' + messageId + ' for ' + text);\n            }\n            debuglog(messageId + ' = ' + text);\n          }\n        }\n        break;\n      case node.DOCUMENT_NODE:\n      case node.DOCUMENT_FRAGMENT_NODE:\n        // traverse childNodes\n        for (i = 0; i < node.childNodes.length; i++) {\n          //console.log(path.join(':') + ':' + node.childNodes[i].nodeName + ':' + (i - whiteSpaceElements) + ' i = ' + i + ' whiteSpaceElements = ' + whiteSpaceElements);\n          if (this._traverseTemplateTree(node.childNodes[i], path, bundle, i - whiteSpaceElements)) {\n            whiteSpaceElements++;\n          }\n        }\n        break;\n      default:\n        isWhiteSpace = true;\n        // comment node, etc.\n        break;\n      }\n      path.pop();\n      return isWhiteSpace;\n    },\n\n    /**\n     * Check if the text has compound annotation \n     * \n     * @param {string} text target text to check compound annotation\n     * @return {Boolean} true if the text contains compound annotation\n     */\n    _isCompoundAnnotatedText: function (text) {\n      return !text.trim().match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/) &&\n             !!text.match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])/);\n    },\n\n    /**\n     * Check if the text has annotation \n     * \n     * @param {string} text target text to check annotation\n     * @return {Boolean} true if the text contains annotation\n     */\n    _hasAnnotatedText: function (text) {\n      return !!text.match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])/);\n    },\n\n    /**\n     * Convert compound annotations to span elements\n     * \n     * @param {Text} node target text node to convert compound annotations\n     * @return {Object[]} Array of Text or span elements\n     */\n    _compoundAnnotationToSpan: function (node) {\n      var result;\n      /* istanbul ignore else: node is prechecked to contain annotation(s) */\n      if (node.textContent.match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])/)) {\n        result = node.textContent\n          .match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\]|[^{}\\[\\]]{1,}|[{}\\[\\]]{1,})/g)\n          .reduce(function (prev, current) {\n            if (current.match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n              prev.push(current);\n              prev.push('');\n            }\n            else {\n              if (prev.length === 0) {\n                prev.push(current);\n              }\n              else {\n                prev[prev.length - 1] += current;\n              }\n            }\n            return prev;\n          }.bind(this), [])\n          .map(function (item) {\n            var childNode;\n            if (item.match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n              childNode = document.createElement('span');\n              childNode.textContent = item;\n            }\n            else if (item) {\n              childNode = document.createTextNode(item);\n            }\n            else {\n              childNode = null;\n            }\n            return childNode;\n          });\n        if (result.length > 0) {\n          if (!result[result.length - 1]) {\n            result.pop(); // pop null node for ''\n          }\n        }\n      }\n      else {\n        // no compound annotation\n        result = [ node ];\n      }\n      return result;\n    },\n\n    /**\n     * Add the value to the target default bundle with the specified message Id \n     * \n     * @param {Object} bundle Default bundle.\n     * @param {string} messageId ID string of the value.\n     * @param {Object} value Value of the text message. Normally a string.\n     */\n    _setBundleValue: function (bundle, messageId, value) {\n      var messageIdPath = messageId.split('.');\n      bundle.model = bundle.model || {};\n      if (messageIdPath.length === 1) {\n        bundle[messageId] = value;\n      }\n      else {\n        var cursor = bundle;\n        for (var i = 0; i < messageIdPath.length; i++) {\n          if (i < messageIdPath.length - 1) {\n            cursor[messageIdPath[i]] = cursor[messageIdPath[i]] || {};\n            cursor = cursor[messageIdPath[i]];\n          }\n          else {\n            cursor[messageIdPath[i]] = value;\n          }\n        }\n      }\n    },\n\n    /**\n     * Generate a message ID from the specified path and id.\n     * \n     * ### TODO: \n     *\n     * - Shorten or optimize ids\n     *\n     * @param {Array} path List of ascestor elements of the current node in traversal.\n     * @param {id} id Value of `id` or `text-id` attribute of the current node.\n     */\n    _generateMessageId: function (path, id) {\n      var messageId;\n      if (!id || id.length === 0) {\n        for (var i = 1; i < path.length; i++) {\n          if (path[i][0] === '#') {\n            if (path[i] !== '#document-fragment') {\n              if (messageId && path[i].substr(0, 5) === '#text') {\n                messageId += ':' + path[i].substr(1);\n              }\n              else {\n                messageId = path[i].substr(1);\n              }\n            }\n          }\n          else {\n            if (messageId) {\n              messageId += ':' + path[i];\n            }\n            else {\n              messageId = path[i];\n            }\n          }\n        }\n      }\n      else {\n        messageId = id;\n      }\n      return messageId;\n    },\n\n    /**\n     * Merge `this.defaultText` into the target default bundle.\n     * \n     * ### TODO: \n     *\n     * - Need more research on the effective usage of this feature.\n     *\n     * @param {Object} bundle Default bundle.\n     */\n    /*\n    _mergeDefaultText: function (bundle) {\n      if (this.defaultText) {\n        this._deepMap(bundle, this.defaultText, function (text) { return text; });\n      }\n    },\n    */\n\n    /**\n     * Return the first non-null argument.\n     *\n     * Utility method for use in annotations.\n     *\n     * ### Example Usage:\n     * ```\n     *   <input is=\"iron-input\" class=\"flex\"\n     *     type=\"search\" id=\"query\" bind-value=\"{{query}}\"\n     *     autocomplete=\"off\"\n     *     placeholder=\"{{or(placeholder,text.search)}}\">\n     * ```\n     *\n     * @param {*} arguments List of arguments.\n     */\n    or: function () {\n      var result = arguments[0];\n      var i = 1;\n      while (!result && i < arguments.length) {\n        result = arguments[i++];\n      }\n      return result;\n    },\n\n\n    /**\n     * Translate a string by a message table.\n     *\n     * Utility method for use in annotations.\n     *\n     * ### Example Usage:\n     * ```\n     *   <span>{{tr(status,text.statusMsgs)}}</span>\n     *   <span>{{tr(errorId,text)}}</span>\n     *   <template>\n     *     <json-data text-id=\"statusMsgs\">{\n     *       \"signed-in\": \"Authenticated\",\n     *       \"signed-out\": \"Not Authenticated\",\n     *       \"error\": \"Error in Authentication\",\n     *       \"default\": \"Unknown Status in Authentication\"\n     *     }</json-data>\n     *     <span text-id=\"http-404\">File Not Found</span>\n     *     <span text-id=\"http-301\">Moved Permanently</span>\n     *   </template>\n     * ```\n     *\n     * Note: The second `table` parameter should always be specified in order\n     * to trigger automatic updates on `this.text` mutations, i.e., updates of `this.effectiveLang`.\n     *\n     * @param {string} key Key of the message.\n     * @param {Object} table The message table object or this.text itself if omitted\n     * @return {string} Translated string, `table.default` if `table[key]` is undefined, or key string if table.default is undefined.\n     */\n    tr: function (key, table) {\n      if (table) {\n        if (typeof table === 'object') {\n          if (typeof table[key] !== 'undefined') {\n            return table[key];\n          }\n          else if (typeof table['default'] !== 'undefined') {\n            return table['default'];\n          }\n          else {\n            return key;\n          }\n        }\n        else {\n          return key;\n        }\n      }\n      else {\n        return (typeof this.text === 'object') &&\n               (typeof key !== 'undefined') &&\n               (typeof this.text[key] !== 'undefined') ? this.text[key] : key;\n      }\n    },\n\n    /**\n     * Format a parameterized string.\n     *\n     * Utility method for use in annotations.\n     *\n     * ### Example Usage:\n     * ```\n     *   <span attr=\"{{i18nFormat(text.param.0,text.textparam1,text.textparam2)}}\"></span>\n     *   <template>\n     *     <json-data text-id=\"param\">[\n     *       \"String with {1} and {2} are formetted\",\n     *       \"[[text.textparam1]]\",\n     *       \"[[text.textparam2]]\"\n     *     ]</json-data>\n     *     <span text-id=\"textparam1\">Parameter 1</span>\n     *     <span text-id=\"textparam2\">Parameter 2</span>\n     *   </template>\n     * ```\n     *\n     * Note: Compound bindings in attributes are automatically converted to {{i18nFormat()}} in preprocessing.\n     *\n     * @param {*} arguments List of arguments.\n     * @return {string} Formatted string\n     */\n    i18nFormat: function () {\n      if (arguments.length > 0) {\n        var formatted = arguments[0] || '';\n        for (var n = 1; n < arguments.length; n++) {\n          formatted = formatted.replace('{' + n + '}', arguments[n]);\n        }\n      }\n      return formatted;\n    },\n\n    // Lifecycle callbacks\n\n    /**\n     * Lifecycle callback before registration of the custom element.\n     *\n     * The default bundle is constructed via traversal of the element's template at this timing per registration.\n     *\n     * ### Notes: \n     *\n     * - For `i18n-dom-bind` elements, bundle construction is put off until `ready` lifecycle callback.\n     * - As called twice per custom element registration, the method skips bundle construction at the second call.\n     */\n    beforeRegister: function () {\n      if (this.is !== 'i18n-dom-bind') {\n        if (!this._templateLocalizable) {\n          this._templateLocalizable = this._constructDefaultBundle();\n        }\n      }\n    },\n\n\n    /**\n     * Lifecycle callback at registration of the custom element.\n     *\n     * this._fetchStatus is initialized per registration.\n     */\n    registered: function () {\n      if (this.is !== 'i18n-dom-bind') {\n        var template = Polymer.DomModule.import(this.is, 'template');\n        if (!template) {\n          var id = this.is;\n          var current = (!window.HTMLImports || HTMLImports.useNative) ? document.currentScript\n                                              : (document._currentScript || document.currentScript);\n          template = (current ? current.ownerDocument\n                      .querySelector('template[id=' + id + ']') : null) ||\n                     document.querySelector('template[id=' + id + ']');\n          if (!template) {\n            template = document.createElement('template');\n            template.setAttribute('id', id);\n          }\n          if (template) {\n            var domModule = document.createElement('dom-module');\n            var assetUrl = new URL((current ? current.baseURI : null) ||\n              (window.currentImport ? window.currentImport.baseURI : null) ||\n              (current && current.ownerDocument ? current.ownerDocument.baseURI : null) ||\n              document.baseURI);\n            domModule.appendChild(template);\n            domModule.setAttribute('assetpath', \n                                    template.hasAttribute('basepath') ?\n                                      template.getAttribute('basepath') :\n                                      template.hasAttribute('assetpath') ? \n                                        template.getAttribute('assetpath') : \n                                        assetUrl.pathname);\n            domModule.register(id);\n            this._template = template;\n          }\n          var bundle = { model: {} };\n          bundles[''][id] = bundle;\n          bundles[defaultLang] = bundles[defaultLang] || {};\n          bundles[defaultLang][id] = bundle;\n          console.warn('I18nBehavior.registered: ' + id + ' has no template. Supplying an empty template');\n        }\n        this._fetchStatus = deepcopy({ // per custom element\n          fetchingInstance: null,\n          ajax: null,\n          ajaxLang: null,\n          lastLang: null,\n          fallbackLanguageList: null,\n          targetLang: null,\n          lastResponse: {},\n          rawResponses: {}\n        });\n      }\n    },\n\n    /**\n     * Lifecycle callback on instance creation\n     */\n    created: function () {\n      // Fix #34. [Polymer 1.4.0] _propertyEffects have to be maintained per instance\n      if (this.is === 'i18n-dom-bind') {\n        this._propertyEffects = deepcopy(this._propertyEffects);\n      }\n      else {\n        var template = Polymer.DomModule.import(this.is, 'template');\n        if (template && template.hasAttribute('lang')) {\n          this.templateDefaultLang = template.getAttribute('lang') || '';\n        }\n        if (!this._fetchStatus) {\n          this._fetchStatus = deepcopy({ // per custom element\n            fetchingInstance: null,\n            ajax: null,\n            ajaxLang: null,\n            lastLang: null,\n            fallbackLanguageList: null,\n            targetLang: null,\n            lastResponse: {},\n            rawResponses: {}\n          });\n        }\n      }\n      if (!isStandardPropertyConfigurable) {\n        // Fix #36. Emulate lang's observer since Safari 7 predefines non-configurable lang property\n        this.observer = new MutationObserver(this._handleLangAttributeChange.bind(this));\n        this.observer.observe(this, {\n          attributes: true,\n          attributeFilter: [ 'lang' ],\n          attributeOldValue: true\n        });\n      }\n    },\n\n    /**\n     * Lifecycle callback when the template children are ready.\n     */\n    ready: function () {\n      if (this.is === 'i18n-dom-bind') {\n        if (!this._templateLocalizable) {\n          this._templateLocalizable = this._constructDefaultBundle();\n        }\n        if (!this._fetchStatus) {\n          this._fetchStatus = deepcopy({ // per instance\n            fetchingInstance: null,\n            ajax: null,\n            ajaxLang: null,\n            lastLang: null,\n            fallbackLanguageList: null,\n            targetLang: null, \n            lastResponse: {},\n            rawResponses: {}\n          });\n        }\n        this._onDomChangeBindThis = this._onDomChange.bind(this);\n        this.addEventListener('dom-change', this._onDomChangeBindThis);\n        // Fix #34. [Polymer 1.4.0] Supply an empty object if this.__data__ is undefined\n        this.__data__ = this.__data__ || Object.create(null);\n      }\n      else {\n        if (!isStandardPropertyConfigurable) {\n          // Fix #36. Patch missing properties except for lang\n          for (var p in this._propertyEffects) {\n            if (this._propertyEffects[p] &&\n                !Object.getOwnPropertyDescriptor(this, p)) {\n              //console.log('ready: creating accessors for ' + p);\n              Polymer.Bind._createAccessors(this, p, this._propertyEffects[p]);\n            }\n          }\n        }\n        if (Polymer.ElementMixin && !this.__data) {\n          this._initializeProperties();\n        }\n        this._langChanged(this.getAttribute('lang'), undefined);\n        // model per instance\n        if (this.text) {\n          this.model = deepcopy(this.text.model);\n        }\n      }\n    },\n\n    /**\n     * attached lifecycle callback.\n     */\n    attached: function () {\n      if (this.is === 'i18n-dom-bind') {\n        if (this._properties) {\n          // Fix #35. [IE10] Restore properties for use in rendering\n          this.properties = this._properties;\n          delete this._properties;\n        }\n      }\n      if (this.observeHtmlLang) {\n        this.lang = html.lang;\n        // TODO: this call is redundant\n        this._observeHtmlLangChanged(true);\n      }\n    },\n\n    /**\n     * Handle `dom-change` event for `i18n-dom-bind`\n     */\n    _onDomChange: function () {\n      // Fix #16: [IE11][Polymer 1.3.0] On IE11, i18n-dom-bind does not work with Polymer 1.3.0\n      // Patch the broken lang property accessors manually if it is missing\n      // Fix #34: [IE11][Polymer 1.4.0] Create missing property accessors including lang\n      for (var p in this._propertyEffects) {\n        if (this._propertyEffects[p] &&\n            !Object.getOwnPropertyDescriptor(this, p)) {\n          Polymer.Bind._createAccessors(this, p, this._propertyEffects[p]);\n        }\n      }\n      this.removeEventListener('dom-change', this._onDomChangeBindThis);\n      if (this.text && this.text.model) {\n        this.model = deepcopy(this.text.model);\n      }\n      // Fix #17: [Polymer 1.3.0] observeHtmlLang is undefined in i18n-dom-bind\n      // Explicitly initialize observeHtmlLang if the value is undefined.\n      if (typeof this.observeHtmlLang === 'undefined' &&\n          !this.hasAttribute('observe-html-lang')) {\n        this.observeHtmlLang = true;\n      }\n      if (this.observeHtmlLang) {\n        this.lang = html.lang;\n        this._observeHtmlLangChanged(true);\n      }\n    },\n\n    /**\n     * detached lifecycle callback\n     */\n    detached: function () {\n      if (this.observeHtmlLang) {\n        this._observeHtmlLangChanged(false);\n      }\n    }\n  };\n\n  // Fix #36. Rename lang property as _lang to avoid conflict with the predefined lang property\n  if (!isStandardPropertyConfigurable) {\n    var _properties = Object.create(null);\n    for (var p in BehaviorsStore.I18nBehavior.properties) {\n      if (p === 'lang') {\n        _properties._lang = BehaviorsStore.I18nBehavior.properties.lang;\n      }\n      else {\n        _properties[p] = BehaviorsStore.I18nBehavior.properties[p];\n      }\n    }\n    BehaviorsStore.I18nBehavior.properties = _properties;\n    BehaviorsStore.I18nBehavior.properties._lang.reflectToAttribute = false;\n    BehaviorsStore.I18nBehavior.properties.text.computed = '_getBundle(_lang)';\n    BehaviorsStore.I18nBehavior._updateEffectiveLang = function (event) {\n      if ((!Polymer.ElementMixin && Polymer.dom(event).rootTarget === this) ||\n          (Polymer.ElementMixin && event.composedPath()[0] === this)) {\n        //console.log('lang-updated: _updateEffectiveLang: assigning effectiveLang = ' + this._lang);\n        this.effectiveLang = this._lang;\n      }\n    };\n    BehaviorsStore.I18nBehavior.hostAttributes = {\n      'lang': defaultLang\n    };\n  }\n\n  if (Polymer.ElementMixin) {\n    // Polymer 2.x\n    BehaviorsStore._I18nBehavior = BehaviorsStore.I18nBehavior;\n    BehaviorsStore.I18nBehavior = [ BehaviorsStore._I18nBehavior ];\n    Object.defineProperty(BehaviorsStore.I18nBehavior, '0', {\n      get: function() {\n        var current = (!window.HTMLImports || HTMLImports.hasNative || HTMLImports.useNative) ? document.currentScript : (document._currentScript || document.currentScript);\n        var ownerDocument = current.ownerDocument;\n        if (ownerDocument.nodeType === ownerDocument.DOCUMENT_NODE) {\n          // HTML Imports are flatten in the root document and not under document fragment nodes\n          // Fix #62: Emulate a subset of \"non-HTMLImports-link-traversing\" querySelectorAll for latest Firefox 51\n          // since currentScript.ownerDocument, HTML Imports polyfill, and querySelectorAll behave differently\n          var _tmpNode = current;\n          // check for DOCUMENT_FRAGMENT_NODE for fail safe\n          while (_tmpNode && _tmpNode.tagName !== 'LINK' &&\n            _tmpNode.nodeType !== _tmpNode.DOCUMENT_FRAGMENT_NODE &&\n            _tmpNode.nodeType !== _tmpNode.DOCUMENT_NODE) {\n            _tmpNode = _tmpNode.parentNode;\n          }\n          if (_tmpNode &&\n            (_tmpNode.nodeType === _tmpNode.DOCUMENT_FRAGMENT_NODE ||\n             _tmpNode.nodeType === _tmpNode.DOCUMENT_NODE)) {\n            ownerDocument = _tmpNode; // reach the containing document fragment\n          }\n          else if (_tmpNode && _tmpNode.import === _tmpNode) { // html-imports polyfill v1\n            ownerDocument = _tmpNode.children; // reach the immediate import link containing the currentScript\n            ownerDocument.querySelectorAll = function (selector) {\n              var match = selector.match(/^([a-zA-Z0-9-]{1,})(:not\\(\\[(processed)\\]\\))?(\\[(legacy)\\])?$/);\n              var list = [];\n              var node;\n              var tagName;\n              var i;\n              for (i = 0; i < this.length; i++) {\n                node = this[i];\n                tagName = node.tagName.toLowerCase();\n                switch (tagName) {\n                case 'link':\n                  break;\n                case match[1]:\n                  if (match[2]) {\n                    if (!node.hasAttribute(match[3])) {\n                      list.push(node);\n                    }\n                  }\n                  else if (match[4]) {\n                    if (node.hasAttribute(match[5])) {\n                      list.push(node);\n                    }\n                  }\n                  else {\n                    list.push(node);\n                  }\n                  break;\n                default:\n                  Array.prototype.forEach.call(node.querySelectorAll(selector), function (child) { list.push(child); });\n                  break;\n                }\n              }\n              return list;\n            }\n          }\n        }\n        var i18nAttrRepos = ownerDocument.querySelectorAll('i18n-attr-repo:not([processed])');\n        var domModules = ownerDocument.querySelectorAll('dom-module[legacy]');\n        if (domModules.length === 0) {\n          domModules = ownerDocument.querySelectorAll('dom-module');\n          if (domModules.length !== 1) {\n            domModules = [];\n          }\n        }\n        BehaviorsStore._I18nAttrRepo._created();\n        Array.prototype.forEach.call(i18nAttrRepos, function (repo) {\n          if (!repo.hasAttribute('processed')) {\n            var customAttributes = repo.querySelector('template#custom');\n            if (customAttributes) {\n              BehaviorsStore._I18nAttrRepo._traverseTemplateTree(customAttributes.content || customAttributes._content);\n            }\n            repo.setAttribute('processed', '');\n          }\n        });\n        Array.prototype.forEach.call(domModules, function (domModule) {\n          if (domModule && domModule.id) {\n            var template = domModule.querySelector('template');\n            if (template) {\n              BehaviorsStore._I18nBehavior._constructDefaultBundle(template, domModule.id);\n              domModule.removeAttribute('legacy');\n            }\n          }\n        });\n        return BehaviorsStore._I18nBehavior;\n      }\n    });\n  }\n  else {\n    // Polymer 1.x\n  /**\n   * `<template is=\"i18n-dom-bind\">` element extends `dom-bind` template element with `I18nBehavior`\n   *\n   * @group I18nBehavior\n   * @element i18n-dom-bind\n   */\n  var i18nBehaviorDomBind = {};\n  Polymer.Base.extend(i18nBehaviorDomBind, BehaviorsStore.I18nBehavior);\n  var i18nDomBind = {};\n  var domBind = document.createElement('template', 'dom-bind');\n  var domBindProto = Object.getPrototypeOf(domBind);\n  if (typeof domBindProto.render !== 'function') {\n    domBindProto = domBind.__proto__; // fallback for IE10\n  }\n  Polymer.Base.extend(i18nDomBind, domBindProto);\n  i18nDomBind.is = 'i18n-dom-bind';\n  if (!navigator.language && navigator.browserLanguage) { // Detect IE10\n    // Fix #35. [IE10] Hide properties until attached phase in IE10\n    // to avoid exceptions in overriding unconfigurable properties in Object.defineProperty\n    i18nBehaviorDomBind._properties = i18nBehaviorDomBind.properties;\n    i18nBehaviorDomBind.properties = Object.create(null);\n  }\n  /* As of Polymer 1.3.1, dom-bind does not have predefined behaviors */\n  /* istanbul ignore if */\n  if (i18nDomBind.behaviors) {\n    i18nDomBind.behaviors.push(i18nBehaviorDomBind);\n  }\n  else {\n    i18nDomBind.behaviors = [ i18nBehaviorDomBind ];\n  }\n  var _Polymer = Polymer;\n  _Polymer(i18nDomBind);\n  }\n})(document);\nswitch (syntax) {\n  default:\n  case 'mixin':\n    {\n      class PreferenceElement extends Mixins.Localizable(Polymer.LegacyElement) {\n        static get is() { return 'preference-element' }\n        static get config () {\n          return {\n            listeners: {\n              'lang-updated': '_langUpdated'\n            }          \n          }\n        }\n\n        _langUpdated (e) {\n          console.log(this.is, 'lang-updated', e.detail);\n          if (e.composedPath()[0] === this) {\n            console.log(e.detail);\n            console.log('navigator.language = ' + navigator.language);\n            if (!e.detail.lastLang || e.detail.lastLang === 'en') {\n              this.$.oldLang.lang = e.detail.oldLang;\n              this.fire('local-dom-ready');\n            }\n          }\n        }\n      }\n      customElements.define(PreferenceElement.is, PreferenceElement);\n    }\n    break;\n  case 'base-element':\n    {\n      class PreferenceElement extends BaseElements.I18nElement {\n        static get is() { return 'preference-element' }\n        static get config () {\n          return {\n            listeners: {\n              'lang-updated': '_langUpdated'\n            }          \n          }\n        }\n\n        _langUpdated (e) {\n          console.log(this.is, 'lang-updated', e.detail);\n          if (e.composedPath()[0] === this) {\n            console.log(e.detail);\n            console.log('navigator.language = ' + navigator.language);\n            if (!e.detail.lastLang || e.detail.lastLang === 'en') {\n              this.$.oldLang.lang = e.detail.oldLang;\n              this.fire('local-dom-ready');\n            }\n          }\n        }\n      }\n      customElements.define(PreferenceElement.is, PreferenceElement);\n    }\n    break;\n  case 'thin':\n    {\n      Define = class PreferenceElement extends BaseElements.I18nElement {\n        static get config () {\n          return {\n            listeners: {\n              'lang-updated': '_langUpdated'\n            }          \n          }\n        }\n\n        _langUpdated (e) {\n          console.log(this.is, 'lang-updated', e.detail);\n          if (e.composedPath()[0] === this) {\n            console.log(e.detail);\n            console.log('navigator.language = ' + navigator.language);\n            if (!e.detail.lastLang || e.detail.lastLang === 'en') {\n              this.$.oldLang.lang = e.detail.oldLang;\n              this.fire('local-dom-ready');\n            }\n          }\n        }\n      };\n    }\n    break;\n  case 'legacy':\n    {\n      Polymer({\n        is: 'preference-element',\n\n        behaviors: [\n          BehaviorsStore.I18nBehavior\n        ],\n\n        listeners: {\n          'lang-updated': '_langUpdated'\n        },\n\n        _langUpdated: function (e) {\n          if (Polymer.dom(e).rootTarget === this) {\n            console.log(e.detail);\n            console.log('navigator.language = ' + navigator.language);\n            if (!e.detail.lastLang || e.detail.lastLang === 'en') {\n              this.$.oldLang.lang = e.detail.oldLang;\n              this.fire('local-dom-ready');\n            }\n          }\n        }\n      });\n    }\n    break;\n  };\nsuite('I18nElement with ' + \n  (window.location.href.indexOf('?dom=Shadow') >= 0 ? 'Shadow DOM' : 'Shady DOM') +\n  (' in ' + syntax + ' syntax'), \n  function () {\n\n  var lang0 = '';\n  var lang1 = 'en';\n  var lang2 = 'fr';\n  var lang3 = 'ja';\n  var lang4 = 'fr-CA';\n  var lang5 = 'zh-Hans-CN';\n  var lang6 = 'ru';\n  var lang7 = 'zh-yue-Hans-CN';\n  var lang8 = 'zh-CN';\n  var lang9 = 'zh-TW';\n  var lang10 = 'zh-Hans-CN-x-Linux';\n  var navigatorLanguage = navigator.language || navigator.browserLanguage;\n  var isNavigatorLanguageEn = navigatorLanguage.match(/^en/);\n\n  var suites = [\n    s('preference', null, {\n      fixture: 'preference-element-fixture', \n      fixtureModel: undefined,\n      assign: undefined,\n      lang: isNavigatorLanguageEn ? lang1 : lang0,\n      effectiveLang: isNavigatorLanguageEn ? lang1 : lang0,\n      templateDefaultLang: lang1,\n      observeHtmlLang: true,\n      event: 'local-dom-ready',\n      text: { model: {} },\n      model: {},\n      localDOM: [\n        { select: 'span#oldLang', 'lang.raw': navigatorLanguage }\n      ],\n      lightDOM: undefined\n    })\n  ];\n\n  suitesRunner(suites);\n\n  suite('change persist', function () {\n    test('persist true', function (done) {\n      var p = document.querySelector('i18n-preference');\n      p.persist = true;\n      assert.equal(p.persist, true, 'persist is true');\n      done();\n    });\n  });\n\n  suite('detech preference', function () {\n    test('detach', function (done) {\n      var p = document.querySelector('i18n-preference');\n      p.parentNode.removeChild(p);\n      assert.equal(p.persist, true, 'persist is true');\n      done();\n    });\n  });\n\n});"]}